/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{"use strict";var t,e,i,r={16:(t,e,i)=>{i.r(e),i.d(e,{default:()=>o});var r=i(354),s=i.n(r),n=i(314),a=i.n(n)()(s());a.push([t.id,"*{\n    padding: 0;\n    margin: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    overflow: hidden;\n    background-color: #1F444D;\n}","",{version:3,sources:["webpack://./src/css/style.css"],names:[],mappings:"AAAA;IACI,UAAU;IACV,SAAS;IACT,sBAAsB;AAC1B;;AAEA;IACI,gBAAgB;IAChB,yBAAyB;AAC7B",sourcesContent:["*{\r\n    padding: 0;\r\n    margin: 0;\r\n    box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n    overflow: hidden;\r\n    background-color: #1F444D;\r\n}"],sourceRoot:""}]);const o=a},56:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function i(t){for(var i=-1,r=0;r<e.length;r++)if(e[r].identifier===t){i=r;break}return i}function r(t,r){for(var n={},a=[],o=0;o<t.length;o++){var l=t[o],h=r.base?l[0]+r.base:l[0],c=n[h]||0,d="".concat(h," ").concat(c);n[h]=c+1;var u=i(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(f);else{var p=s(f,r);r.byIndex=o,e.splice(o,0,{identifier:d,updater:p,references:1})}a.push(d)}return a}function s(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,s){var n=r(t=t||[],s=s||{});return function(t){t=t||[];for(var a=0;a<n.length;a++){var o=i(n[a]);e[o].references--}for(var l=r(t,s),h=0;h<n.length;h++){var c=i(n[h]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}n=l}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},194:(t,e,i)=>{i(535);var r=i(440),s=i.n(r);const n={gameWidth:800,gameHeight:600,isWebpSupported:!1,soundVolume:100,reelsAmount:3,starterSymbolsData:[0,1,2]};class a extends s().Scene{constructor(){super("PreloadScene")}preload(){}async create(){n.isWebpSupported=await this._checkWebpSupport(),this.scene.start("LoadingScene")}_checkWebpSupport(){return new Promise(t=>{const e=new Image;e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",e.onload=e.onerror=()=>{t(2===e.height)}})}}class o extends s().Scene{constructor(){super("LoadingScene")}preload(){this._draw(),this._initializeLoadingEvents(),this.load.path="../assets/",this.load.image("background","images/background.jpeg"),this.load.atlas("images","images/images."+(n.isWebpSupported?"webp":"png"),"images/images.json"),this.load.audio("bg_music","audio/bg_music.mp3"),this.load.audio("spin","audio/spin.wav"),this.load.audio("win","audio/win.wav"),this.load.spineBinary("spineboy-data","/spine/spineboy.skel"),this.load.spineAtlas("spineboy-atlas","/spine/spineboy.atlas")}_draw(){const{width:t,height:e}=this.game.scale;this._container=this.add.container(0,0);const i=this.add.text(t/2,e/2-70,"Loading Game",{fontSize:"28px"}).setOrigin(.5);this._container.add(i);const r=this.add.graphics().fillStyle(2236962,.8).fillRect(t/2-160,e/2-20,320,50);this._container.add(r),this._progressBar=this.add.graphics(),this._container.add(this._progressBar)}_initializeLoadingEvents(){this.load.on("progress",t=>{this._progressBar.clear().fillStyle(16777215,1).fillRect(250,280,300*t,30)}),this.load.on("complete",()=>{this._container.destroy(!0),this.scene.start("MainGameScene")})}}class l extends Phaser.GameObjects.Sprite{constructor(t,e,i,r,s){super(t,e,i,r,s),this._scene=t}}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var d,u,f,p,m,g,b,x,w,y,v,_,A,S,T,k,C,I={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},M={duration:.5,overwrite:!1,delay:0},E=1e8,R=1e-8,F=2*Math.PI,P=F/4,L=0,Y=Math.sqrt,B=Math.cos,O=Math.sin,X=function(t){return"string"==typeof t},D=function(t){return"function"==typeof t},V=function(t){return"number"==typeof t},N=function(t){return void 0===t},W=function(t){return"object"==typeof t},z=function(t){return!1!==t},U=function(){return"undefined"!=typeof window},q=function(t){return D(t)||X(t)},G="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},j=Array.isArray,H=/(?:-?\.?\d|\.)+/gi,$=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,K=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,J=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Q=/[+-]=-?[.\d]+/,Z=/[^,'"\[\]\s]+/gi,tt=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,et={},it={},rt=function(t){return(it=Pt(t,et))&&Pi},st=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},nt=function(t,e){return!e&&console.warn(t)},at=function(t,e){return t&&(et[t]=e)&&it&&(it[t]=e)||et},ot=function(){return 0},lt={suppressEvents:!0,isStart:!0,kill:!1},ht={suppressEvents:!0,kill:!1},ct={suppressEvents:!0},dt={},ut=[],ft={},pt={},mt={},gt=30,bt=[],xt="",wt=function(t){var e,i,r=t[0];if(W(r)||D(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(i=bt.length;i--&&!bt[i].targetTest(r););e=bt[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new je(t[i],e)))||t.splice(i,1);return t},yt=function(t){return t._gsap||wt(ce(t))[0]._gsap},vt=function(t,e,i){return(i=t[e])&&D(i)?t[e]():N(i)&&t.getAttribute&&t.getAttribute(e)||i},_t=function(t,e){return(t=t.split(",")).forEach(e)||t},At=function(t){return Math.round(1e5*t)/1e5||0},St=function(t){return Math.round(1e7*t)/1e7||0},Tt=function(t,e){var i=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+r:"-"===i?t-r:"*"===i?t*r:t/r},kt=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},Ct=function(){var t,e,i=ut.length,r=ut.slice(0);for(ft={},ut.length=0,t=0;t<i;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},It=function(t){return!!(t._initted||t._startAt||t.add)},Mt=function(t,e,i,r){ut.length&&!u&&Ct(),t.render(e,i,r||!!(u&&e<0&&It(t))),ut.length&&!u&&Ct()},Et=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Z).length<2?e:X(t)?t.trim():t},Rt=function(t){return t},Ft=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Pt=function(t,e){for(var i in e)t[i]=e[i];return t},Lt=function t(e,i){for(var r in i)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=W(i[r])?t(e[r]||(e[r]={}),i[r]):i[r]);return e},Yt=function(t,e){var i,r={};for(i in t)i in e||(r[i]=t[i]);return r},Bt=function(t){var e,i=t.parent||p,r=t.keyframes?(e=j(t.keyframes),function(t,i){for(var r in i)r in t||"duration"===r&&e||"ease"===r||(t[r]=i[r])}):Ft;if(z(t.inherit))for(;i;)r(t,i.vars.defaults),i=i.parent||i._dp;return t},Ot=function(t,e,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var n,a=t[r];if(s)for(n=e[s];a&&a[s]>n;)a=a._prev;return a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t,e},Xt=function(t,e,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=e._prev,n=e._next;s?s._next=n:t[i]===e&&(t[i]=n),n?n._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Dt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Vt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Nt=function(t,e,i,r){return t._startAt&&(u?t._startAt.revert(ht):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},Wt=function t(e){return!e||e._ts&&t(e.parent)},zt=function(t){return t._repeat?Ut(t._tTime,t=t.duration()+t._rDelay)*t:0},Ut=function(t,e){var i=Math.floor(t=St(t/e));return t&&i===t?i-1:i},qt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Gt=function(t){return t._end=St(t._start+(t._tDur/Math.abs(t._ts||t._rts||R)||0))},jt=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=St(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Gt(t),i._dirty||Vt(i,t)),t},Ht=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=qt(t.rawTime(),e),(!e._dur||ae(0,e.totalDuration(),i)-e._tTime>R)&&e.render(i,!0)),Vt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},$t=function(t,e,i,r){return e.parent&&Dt(e),e._start=St((V(i)?i:i||t!==p?re(t,i,e):t._time)+e._delay),e._end=St(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Ot(t,e,"_first","_last",t._sort?"_start":0),Zt(e)||(t._recent=e),r||Ht(t,e),t._ts<0&&jt(t,t._tTime),t},Kt=function(t,e){return(et.ScrollTrigger||st("scrollTrigger",e))&&et.ScrollTrigger.create(e,t)},Jt=function(t,e,i,r,s){return ei(t,e,s),t._initted?!i&&t._pt&&!u&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&w!==Le.frame?(ut.push(t),t._lazy=[s,r],1):void 0:1},Qt=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))},Zt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},te=function(t,e,i,r){var s=t._repeat,n=St(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=n/t._dur),t._dur=n,t._tDur=s?s<0?1e10:St(n*(s+1)+t._rDelay*s):n,a>0&&!r&&jt(t,t._tTime=t._tDur*a),t.parent&&Gt(t),i||Vt(t.parent,t),t},ee=function(t){return t instanceof $e?Vt(t):te(t,t._dur)},ie={_start:0,endTime:ot,totalDuration:ot},re=function t(e,i,r){var s,n,a,o=e.labels,l=e._recent||ie,h=e.duration()>=E?l.endTime(!1):e._dur;return X(i)&&(isNaN(i)||i in o)?(n=i.charAt(0),a="%"===i.substr(-1),s=i.indexOf("="),"<"===n||">"===n?(s>=0&&(i=i.replace(/=/,"")),("<"===n?l._start:l.endTime(l._repeat>=0))+(parseFloat(i.substr(1))||0)*(a?(s<0?l:r).totalDuration()/100:1)):s<0?(i in o||(o[i]=h),o[i]):(n=parseFloat(i.charAt(s-1)+i.substr(s+1)),a&&r&&(n=n/100*(j(r)?r[0]:r).totalDuration()),s>1?t(e,i.substr(0,s-1),r)+n:h+n)):null==i?h:+i},se=function(t,e,i){var r,s,n=V(e[1]),a=(n?2:1)+(t<2?0:1),o=e[a];if(n&&(o.duration=e[1]),o.parent=i,t){for(r=o,s=i;s&&!("immediateRender"in r);)r=s.vars.defaults||{},s=z(s.vars.inherit)&&s.parent;o.immediateRender=z(r.immediateRender),t<2?o.runBackwards=1:o.startAt=e[a-1]}return new ai(e[0],o,e[a+1])},ne=function(t,e){return t||0===t?e(t):e},ae=function(t,e,i){return i<t?t:i>e?e:i},oe=function(t,e){return X(t)&&(e=tt.exec(t))?e[1]:""},le=[].slice,he=function(t,e){return t&&W(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&W(t[0]))&&!t.nodeType&&t!==m},ce=function(t,e,i){return f&&!e&&f.selector?f.selector(t):!X(t)||i||!g&&Ye()?j(t)?function(t,e,i){return void 0===i&&(i=[]),t.forEach(function(t){var r;return X(t)&&!e||he(t,1)?(r=i).push.apply(r,ce(t)):i.push(t)})||i}(t,i):he(t)?le.call(t,0):t?[t]:[]:le.call((e||b).querySelectorAll(t),0)},de=function(t){return t=ce(t)[0]||nt("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ce(e,i.querySelectorAll?i:i===t?nt("Invalid scope")||b.createElement("div"):t)}},ue=function(t){return t.sort(function(){return.5-Math.random()})},fe=function(t){if(D(t))return t;var e=W(t)?t:{each:t},i=We(e.ease),r=e.from||0,s=parseFloat(e.base)||0,n={},a=r>0&&r<1,o=isNaN(r)||a,l=e.axis,h=r,c=r;return X(r)?h=c={center:.5,edges:.5,end:1}[r]||0:!a&&o&&(h=r[0],c=r[1]),function(t,a,d){var u,f,p,m,g,b,x,w,y,v=(d||e).length,_=n[v];if(!_){if(!(y="auto"===e.grid?0:(e.grid||[1,E])[1])){for(x=-E;x<(x=d[y++].getBoundingClientRect().left)&&y<v;);y<v&&y--}for(_=n[v]=[],u=o?Math.min(y,v)*h-.5:r%y,f=y===E?0:o?v*c/y-.5:r/y|0,x=0,w=E,b=0;b<v;b++)p=b%y-u,m=f-(b/y|0),_[b]=g=l?Math.abs("y"===l?m:p):Y(p*p+m*m),g>x&&(x=g),g<w&&(w=g);"random"===r&&ue(_),_.max=x-w,_.min=w,_.v=v=(parseFloat(e.amount)||parseFloat(e.each)*(y>v?v-1:l?"y"===l?v/y:y:Math.max(y,v/y))||0)*("edges"===r?-1:1),_.b=v<0?s-v:s,_.u=oe(e.amount||e.each)||0,i=i&&v<0?Ve(i):i}return v=(_[t]-_.min)/_.max||0,St(_.b+(i?i(v):v)*_.v)+_.u}},pe=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var r=St(Math.round(parseFloat(i)/t)*t*e);return(r-r%1)/e+(V(i)?0:oe(i))}},me=function(t,e){var i,r,s=j(t);return!s&&W(t)&&(i=s=t.radius||E,t.values?(t=ce(t.values),(r=!V(t[0]))&&(i*=i)):t=pe(t.increment)),ne(e,s?D(t)?function(e){return r=t(e),Math.abs(r-e)<=i?r:e}:function(e){for(var s,n,a=parseFloat(r?e.x:e),o=parseFloat(r?e.y:0),l=E,h=0,c=t.length;c--;)(s=r?(s=t[c].x-a)*s+(n=t[c].y-o)*n:Math.abs(t[c]-a))<l&&(l=s,h=c);return h=!i||l<=i?t[h]:e,r||h===e||V(e)?h:h+oe(e)}:pe(t))},ge=function(t,e,i,r){return ne(j(t)?!e:!0===i?!!(i=0):!r,function(){return j(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*r)/r})},be=function(t,e,i){return ne(i,function(i){return t[~~e(i)]})},xe=function(t){for(var e,i,r,s,n=0,a="";~(e=t.indexOf("random(",n));)r=t.indexOf(")",e),s="["===t.charAt(e+7),i=t.substr(e+7,r-e-7).match(s?Z:H),a+=t.substr(n,e-n)+ge(s?i:+i[0],s?0:+i[1],+i[2]||1e-5),n=r+1;return a+t.substr(n,t.length-n)},we=function(t,e,i,r,s){var n=e-t,a=r-i;return ne(s,function(e){return i+((e-t)/n*a||0)})},ye=function(t,e,i){var r,s,n,a=t.labels,o=E;for(r in a)(s=a[r]-e)<0==!!i&&s&&o>(s=Math.abs(s))&&(n=r,o=s);return n},ve=function(t,e,i){var r,s,n,a=t.vars,o=a[e],l=f,h=t._ctx;if(o)return r=a[e+"Params"],s=a.callbackScope||t,i&&ut.length&&Ct(),h&&(f=h),n=r?o.apply(s,r):o.call(s),f=l,n},_e=function(t){return Dt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!u),t.progress()<1&&ve(t,"onInterrupt"),t},Ae=[],Se=function(t){if(t)if(t=!t.name&&t.default||t,U()||t.headless){var e=t.name,i=D(t),r=e&&!i&&t.init?function(){this._props=[]}:t,s={init:ot,render:mi,add:Ze,kill:bi,modifier:gi,rawVars:0},n={targetTest:0,get:0,getSetter:di,aliases:{},register:0};if(Ye(),t!==r){if(pt[e])return;Ft(r,Ft(Yt(t,s),n)),Pt(r.prototype,Pt(s,Yt(t,n))),pt[r.prop=e]=r,t.targetTest&&(bt.push(r),dt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}at(e,r),t.register&&t.register(Pi,r,yi)}else Ae.push(t)},Te=255,ke={aqua:[0,Te,Te],lime:[0,Te,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Te],navy:[0,0,128],white:[Te,Te,Te],olive:[128,128,0],yellow:[Te,Te,0],orange:[Te,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Te,0,0],pink:[Te,192,203],cyan:[0,Te,Te],transparent:[Te,Te,Te,0]},Ce=function(t,e,i){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*Te+.5|0},Ie=function(t,e,i){var r,s,n,a,o,l,h,c,d,u,f=t?V(t)?[t>>16,t>>8&Te,t&Te]:0:ke.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ke[t])f=ke[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),s=t.charAt(2),n=t.charAt(3),t="#"+r+r+s+s+n+n+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&Te,f&Te,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&Te,t&Te]}else if("hsl"===t.substr(0,3))if(f=u=t.match(H),e){if(~t.indexOf("="))return f=t.match($),i&&f.length<4&&(f[3]=1),f}else a=+f[0]%360/360,o=+f[1]/100,r=2*(l=+f[2]/100)-(s=l<=.5?l*(o+1):l+o-l*o),f.length>3&&(f[3]*=1),f[0]=Ce(a+1/3,r,s),f[1]=Ce(a,r,s),f[2]=Ce(a-1/3,r,s);else f=t.match(H)||ke.transparent;f=f.map(Number)}return e&&!u&&(r=f[0]/Te,s=f[1]/Te,n=f[2]/Te,l=((h=Math.max(r,s,n))+(c=Math.min(r,s,n)))/2,h===c?a=o=0:(d=h-c,o=l>.5?d/(2-h-c):d/(h+c),a=h===r?(s-n)/d+(s<n?6:0):h===s?(n-r)/d+2:(r-s)/d+4,a*=60),f[0]=~~(a+.5),f[1]=~~(100*o+.5),f[2]=~~(100*l+.5)),i&&f.length<4&&(f[3]=1),f},Me=function(t){var e=[],i=[],r=-1;return t.split(Re).forEach(function(t){var s=t.match(K)||[];e.push.apply(e,s),i.push(r+=s.length+1)}),e.c=i,e},Ee=function(t,e,i){var r,s,n,a,o="",l=(t+o).match(Re),h=e?"hsla(":"rgba(",c=0;if(!l)return t;if(l=l.map(function(t){return(t=Ie(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),i&&(n=Me(t),(r=i.c).join(o)!==n.c.join(o)))for(a=(s=t.replace(Re,"1").split(K)).length-1;c<a;c++)o+=s[c]+(~r.indexOf(c)?l.shift()||h+"0,0,0,0)":(n.length?n:l.length?l:i).shift());if(!s)for(a=(s=t.split(Re)).length-1;c<a;c++)o+=s[c]+l[c];return o+s[a]},Re=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ke)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Fe=/hsl[a]?\(/,Pe=function(t){var e,i=t.join(" ");if(Re.lastIndex=0,Re.test(i))return e=Fe.test(i),t[1]=Ee(t[1],e),t[0]=Ee(t[0],e,Me(t[1])),!0},Le=function(){var t,e,i,r,s,n,a=Date.now,o=500,l=33,h=a(),c=h,d=1e3/240,u=d,f=[],p=function i(p){var m,g,b,x,w=a()-c,y=!0===p;if((w>o||w<0)&&(h+=w-l),((m=(b=(c+=w)-h)-u)>0||y)&&(x=++r.frame,s=b-1e3*r.time,r.time=b/=1e3,u+=m+(m>=d?4:d-m),g=1),y||(t=e(i)),g)for(n=0;n<f.length;n++)f[n](b,s,x,p)};return r={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(t){return s/(1e3/(t||60))},wake:function(){x&&(!g&&U()&&(m=g=window,b=m.document||{},et.gsap=Pi,(m.gsapVersions||(m.gsapVersions=[])).push(Pi.version),rt(it||m.GreenSockGlobals||!m.gsap&&m||{}),Ae.forEach(Se)),i="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,t&&r.sleep(),e=i||function(t){return setTimeout(t,u-1e3*r.time+1|0)},v=1,p(2))},sleep:function(){(i?cancelAnimationFrame:clearTimeout)(t),v=0,e=ot},lagSmoothing:function(t,e){o=t||1/0,l=Math.min(e||33,o)},fps:function(t){d=1e3/(t||240),u=1e3*r.time+d},add:function(t,e,i){var s=e?function(e,i,n,a){t(e,i,n,a),r.remove(s)}:t;return r.remove(t),f[i?"unshift":"push"](s),Ye(),s},remove:function(t,e){~(e=f.indexOf(t))&&f.splice(e,1)&&n>=e&&n--},_listeners:f}}(),Ye=function(){return!v&&Le.wake()},Be={},Oe=/^[\d.\-M][\d.\-,\s]/,Xe=/["']/g,De=function(t){for(var e,i,r,s={},n=t.substr(1,t.length-3).split(":"),a=n[0],o=1,l=n.length;o<l;o++)i=n[o],e=o!==l-1?i.lastIndexOf(","):i.length,r=i.substr(0,e),s[a]=isNaN(r)?r.replace(Xe,"").trim():+r,a=i.substr(e+1).trim();return s},Ve=function(t){return function(e){return 1-t(1-e)}},Ne=function t(e,i){for(var r,s=e._first;s;)s instanceof $e?t(s,i):!s.vars.yoyoEase||s._yoyo&&s._repeat||s._yoyo===i||(s.timeline?t(s.timeline,i):(r=s._ease,s._ease=s._yEase,s._yEase=r,s._yoyo=i)),s=s._next},We=function(t,e){return t&&(D(t)?t:Be[t]||function(t){var e,i,r,s,n=(t+"").split("("),a=Be[n[0]];return a&&n.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[De(n[1])]:(e=t,i=e.indexOf("(")+1,r=e.indexOf(")"),s=e.indexOf("(",i),e.substring(i,~s&&s<r?e.indexOf(")",r+1):r)).split(",").map(Et)):Be._CE&&Oe.test(t)?Be._CE("",t):a}(t))||e},ze=function(t,e,i,r){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var s,n={easeIn:e,easeOut:i,easeInOut:r};return _t(t,function(t){for(var e in Be[t]=et[t]=n,Be[s=t.toLowerCase()]=i,n)Be[s+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Be[t+"."+e]=n[e]}),n},Ue=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},qe=function t(e,i,r){var s=i>=1?i:1,n=(r||(e?.3:.45))/(i<1?i:1),a=n/F*(Math.asin(1/s)||0),o=function(t){return 1===t?1:s*Math.pow(2,-10*t)*O((t-a)*n)+1},l="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:Ue(o);return n=F/n,l.config=function(i,r){return t(e,i,r)},l},Ge=function t(e,i){void 0===i&&(i=1.70158);var r=function(t){return t?--t*t*((i+1)*t+i)+1:0},s="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:Ue(r);return s.config=function(i){return t(e,i)},s};_t("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var i=e<5?e+1:e;ze(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},function(t){return 1-Math.pow(1-t,i)},function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2})}),Be.Linear.easeNone=Be.none=Be.Linear.easeIn,ze("Elastic",qe("in"),qe("out"),qe()),_=7.5625,T=2*(S=1/(A=2.75)),k=2.5*S,ze("Bounce",function(t){return 1-C(1-t)},C=function(t){return t<S?_*t*t:t<T?_*Math.pow(t-1.5/A,2)+.75:t<k?_*(t-=2.25/A)*t+.9375:_*Math.pow(t-2.625/A,2)+.984375}),ze("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)}),ze("Circ",function(t){return-(Y(1-t*t)-1)}),ze("Sine",function(t){return 1===t?1:1-B(t*P)}),ze("Back",Ge("in"),Ge("out"),Ge()),Be.SteppedEase=Be.steps=et.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,r=t+(e?0:1),s=e?1:0;return function(t){return((r*ae(0,.99999999,t)|0)+s)*i}}},M.ease=Be["quad.out"],_t("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return xt+=t+","+t+"Params,"});var je=function(t,e){this.id=L++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:vt,this.set=e?e.getSetter:di},He=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,te(this,+t.duration,1,1),this.data=t.data,f&&(this._ctx=f,f.data.push(this)),v||Le.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,te(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Ye(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(jt(this,t),!i._dp||i.parent||Ht(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&$t(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===R||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Mt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+zt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+zt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Ut(this._tTime,i)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var i=this.parent&&this._ts?qt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(ae(-Math.abs(this._delay),this.totalDuration(),i),!1!==e),Gt(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ye(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==R&&(this._tTime-=R)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&$t(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(z(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?qt(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=ct);var e=u;return u=t,It(this)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),u=e,this},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,ee(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,ee(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(re(this,t),z(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,z(e)),this._dur||(this._zTime=-1e-8),this},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-R))},e.eventCallback=function(t,e,i){var r=this.vars;return arguments.length>1?(e?(r[t]=e,i&&(r[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise(function(i){var r=D(t)?t:Rt,s=function(){var t=e.then;e.then=null,D(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),i(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?s():e._prom=s})},e.kill=function(){_e(this)},t}();Ft(He.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var $e=function(t){function e(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=z(e.sortChildren),p&&$t(e.parent||p,h(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&Kt(h(r),e.scrollTrigger),r}c(e,t);var i=e.prototype;return i.to=function(t,e,i){return se(0,arguments,this),this},i.from=function(t,e,i){return se(1,arguments,this),this},i.fromTo=function(t,e,i,r){return se(2,arguments,this),this},i.set=function(t,e,i){return e.duration=0,e.parent=this,Bt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new ai(t,e,re(this,i),1),this},i.call=function(t,e,i){return $t(this,ai.delayedCall(0,t,e),i)},i.staggerTo=function(t,e,i,r,s,n,a){return i.duration=e,i.stagger=i.stagger||r,i.onComplete=n,i.onCompleteParams=a,i.parent=this,new ai(t,i,re(this,s)),this},i.staggerFrom=function(t,e,i,r,s,n,a){return i.runBackwards=1,Bt(i).immediateRender=z(i.immediateRender),this.staggerTo(t,e,i,r,s,n,a)},i.staggerFromTo=function(t,e,i,r,s,n,a,o){return r.startAt=i,Bt(r).immediateRender=z(r.immediateRender),this.staggerTo(t,e,r,s,n,a,o)},i.render=function(t,e,i){var r,s,n,a,o,l,h,c,d,f,m,g,b=this._time,x=this._dirty?this.totalDuration():this._tDur,w=this._dur,y=t<=0?0:St(t),v=this._zTime<0!=t<0&&(this._initted||!w);if(this!==p&&y>x&&t>=0&&(y=x),y!==this._tTime||i||v){if(b!==this._time&&w&&(y+=this._time-b,t+=this._time-b),r=y,d=this._start,l=!(c=this._ts),v&&(w||(b=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(m=this._yoyo,o=w+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,i);if(r=St(y%o),y===x?(a=this._repeat,r=w):((a=~~(f=St(y/o)))&&a===f&&(r=w,a--),r>w&&(r=w)),f=Ut(this._tTime,o),!b&&this._tTime&&f!==a&&this._tTime-f*o-this._dur<=0&&(f=a),m&&1&a&&(r=w-r,g=1),a!==f&&!this._lock){var _=m&&1&f,A=_===(m&&1&a);if(a<f&&(_=!_),b=_?0:y%w?w:y,this._lock=1,this.render(b||(g?0:St(a*o)),e,!w)._lock=0,this._tTime=y,!e&&this.parent&&ve(this,"onRepeat"),this.vars.repeatRefresh&&!g&&(this.invalidate()._lock=1),b&&b!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(w=this._dur,x=this._tDur,A&&(this._lock=2,b=_?w:-1e-4,this.render(b,!0),this.vars.repeatRefresh&&!g&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Ne(this,g)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if("isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if("isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,St(b),St(r)),h&&(y-=r-(r=h._start))),this._tTime=y,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,b=0),!b&&y&&!e&&!f&&(ve(this,"onStart"),this._tTime!==y))return this;if(r>=b&&t>=0)for(s=this._first;s;){if(n=s._next,(s._act||r>=s._start)&&s._ts&&h!==s){if(s.parent!==this)return this.render(t,e,i);if(s.render(s._ts>0?(r-s._start)*s._ts:(s._dirty?s.totalDuration():s._tDur)+(r-s._start)*s._ts,e,i),r!==this._time||!this._ts&&!l){h=0,n&&(y+=this._zTime=-1e-8);break}}s=n}else{s=this._last;for(var S=t<0?t:r;s;){if(n=s._prev,(s._act||S<=s._end)&&s._ts&&h!==s){if(s.parent!==this)return this.render(t,e,i);if(s.render(s._ts>0?(S-s._start)*s._ts:(s._dirty?s.totalDuration():s._tDur)+(S-s._start)*s._ts,e,i||u&&It(s)),r!==this._time||!this._ts&&!l){h=0,n&&(y+=this._zTime=S?-1e-8:R);break}}s=n}}if(h&&!e&&(this.pause(),h.render(r>=b?0:-1e-8)._zTime=r>=b?1:-1,this._ts))return this._start=d,Gt(this),this.render(t,e,i);this._onUpdate&&!e&&ve(this,"onUpdate",!0),(y===x&&this._tTime>=this.totalDuration()||!y&&b)&&(d!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((t||!w)&&(y===x&&this._ts>0||!y&&this._ts<0)&&Dt(this,1),e||t<0&&!b||!y&&!b&&x||(ve(this,y===x&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<x&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(t,e){var i=this;if(V(e)||(e=re(this,e,t)),!(t instanceof He)){if(j(t))return t.forEach(function(t){return i.add(t,e)}),this;if(X(t))return this.addLabel(t,e);if(!D(t))return this;t=ai.delayedCall(0,t)}return this!==t?$t(this,t,e):this},i.getChildren=function(t,e,i,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=-E);for(var s=[],n=this._first;n;)n._start>=r&&(n instanceof ai?e&&s.push(n):(i&&s.push(n),t&&s.push.apply(s,n.getChildren(!0,e,i)))),n=n._next;return s},i.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},i.remove=function(t){return X(t)?this.removeLabel(t):D(t)?this.killTweensOf(t):(t.parent===this&&Xt(this,t),t===this._recent&&(this._recent=this._last),Vt(this))},i.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=St(Le.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},i.addLabel=function(t,e){return this.labels[t]=re(this,e),this},i.removeLabel=function(t){return delete this.labels[t],this},i.addPause=function(t,e,i){var r=ai.delayedCall(0,e||ot,i);return r.data="isPause",this._hasPause=1,$t(this,r,re(this,t))},i.removePause=function(t){var e=this._first;for(t=re(this,t);e;)e._start===t&&"isPause"===e.data&&Dt(e),e=e._next},i.killTweensOf=function(t,e,i){for(var r=this.getTweensOf(t,i),s=r.length;s--;)Ke!==r[s]&&r[s].kill(t,e);return this},i.getTweensOf=function(t,e){for(var i,r=[],s=ce(t),n=this._first,a=V(e);n;)n instanceof ai?kt(n._targets,s)&&(a?(!Ke||n._initted&&n._ts)&&n.globalTime(0)<=e&&n.globalTime(n.totalDuration())>e:!e||n.isActive())&&r.push(n):(i=n.getTweensOf(s,e)).length&&r.push.apply(r,i),n=n._next;return r},i.tweenTo=function(t,e){e=e||{};var i,r=this,s=re(r,t),n=e,a=n.startAt,o=n.onStart,l=n.onStartParams,h=n.immediateRender,c=ai.to(r,Ft({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:s,overwrite:"auto",duration:e.duration||Math.abs((s-(a&&"time"in a?a.time:r._time))/r.timeScale())||R,onStart:function(){if(r.pause(),!i){var t=e.duration||Math.abs((s-(a&&"time"in a?a.time:r._time))/r.timeScale());c._dur!==t&&te(c,t,0,1).render(c._time,!0,!0),i=1}o&&o.apply(c,l||[])}},e));return h?c.render(0):c},i.tweenFromTo=function(t,e,i){return this.tweenTo(e,Ft({startAt:{time:re(this,t)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(t){return void 0===t&&(t=this._time),ye(this,re(this,t))},i.previousLabel=function(t){return void 0===t&&(t=this._time),ye(this,re(this,t),1)},i.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+R)},i.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var r,s=this._first,n=this.labels;s;)s._start>=i&&(s._start+=t,s._end+=t),s=s._next;if(e)for(r in n)n[r]>=i&&(n[r]+=t);return Vt(this)},i.invalidate=function(e){var i=this._first;for(this._lock=0;i;)i.invalidate(e),i=i._next;return t.prototype.invalidate.call(this,e)},i.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Vt(this)},i.totalDuration=function(t){var e,i,r,s=0,n=this,a=n._last,o=E;if(arguments.length)return n.timeScale((n._repeat<0?n.duration():n.totalDuration())/(n.reversed()?-t:t));if(n._dirty){for(r=n.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(i=a._start)>o&&n._sort&&a._ts&&!n._lock?(n._lock=1,$t(n,a,i-a._delay,1)._lock=0):o=i,i<0&&a._ts&&(s-=i,(!r&&!n._dp||r&&r.smoothChildTiming)&&(n._start+=i/n._ts,n._time-=i,n._tTime-=i),n.shiftChildren(-i,!1,-Infinity),o=0),a._end>s&&a._ts&&(s=a._end),a=e;te(n,n===p&&n._time>s?n._time:s,1,1),n._dirty=0}return n._tDur},e.updateRoot=function(t){if(p._ts&&(Mt(p,qt(t,p)),w=Le.frame),Le.frame>=gt){gt+=I.autoSleep||120;var e=p._first;if((!e||!e._ts)&&I.autoSleep&&Le._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Le.sleep()}}},e}(He);Ft($e.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ke,Je,Qe=function(t,e,i,r,s,n,a){var o,l,h,c,d,u,f,p,m=new yi(this._pt,t,e,0,1,pi,null,s),g=0,b=0;for(m.b=i,m.e=r,i+="",(f=~(r+="").indexOf("random("))&&(r=xe(r)),n&&(n(p=[i,r],t,e),i=p[0],r=p[1]),l=i.match(J)||[];o=J.exec(r);)c=o[0],d=r.substring(g,o.index),h?h=(h+1)%5:"rgba("===d.substr(-5)&&(h=1),c!==l[b++]&&(u=parseFloat(l[b-1])||0,m._pt={_next:m._pt,p:d||1===b?d:",",s:u,c:"="===c.charAt(1)?Tt(u,c)-u:parseFloat(c)-u,m:h&&h<4?Math.round:0},g=J.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(Q.test(r)||f)&&(m.e=0),this._pt=m,m},Ze=function(t,e,i,r,s,n,a,o,l,h){D(r)&&(r=r(s||0,t,n));var c,d=t[e],u="get"!==i?i:D(d)?l?t[e.indexOf("set")||!D(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():d,f=D(d)?l?hi:li:oi;if(X(r)&&(~r.indexOf("random(")&&(r=xe(r)),"="===r.charAt(1)&&((c=Tt(u,r)+(oe(u)||0))||0===c)&&(r=c)),!h||u!==r||Je)return isNaN(u*r)||""===r?(!d&&!(e in t)&&st(e,r),Qe.call(this,t,e,u,r,f,o||I.stringFilter,l)):(c=new yi(this._pt,t,e,+u||0,r-(u||0),"boolean"==typeof d?fi:ui,0,f),l&&(c.fp=l),a&&c.modifier(a,this,t),this._pt=c)},ti=function(t,e,i,r,s,n){var a,o,l,h;if(pt[t]&&!1!==(a=new pt[t]).init(s,a.rawVars?e[t]:function(t,e,i,r,s){if(D(t)&&(t=ri(t,s,e,i,r)),!W(t)||t.style&&t.nodeType||j(t)||G(t))return X(t)?ri(t,s,e,i,r):t;var n,a={};for(n in t)a[n]=ri(t[n],s,e,i,r);return a}(e[t],r,s,n,i),i,r,n)&&(i._pt=o=new yi(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==y))for(l=i._ptLookup[i._targets.indexOf(s)],h=a._props.length;h--;)l[a._props[h]]=o;return a},ei=function t(e,i,r){var s,n,a,o,l,h,c,f,m,g,b,x,w,y=e.vars,v=y.ease,_=y.startAt,A=y.immediateRender,S=y.lazy,T=y.onUpdate,k=y.runBackwards,C=y.yoyoEase,I=y.keyframes,F=y.autoRevert,P=e._dur,L=e._startAt,Y=e._targets,B=e.parent,O=B&&"nested"===B.data?B.vars.targets:Y,X="auto"===e._overwrite&&!d,D=e.timeline;if(D&&(!I||!v)&&(v="none"),e._ease=We(v,M.ease),e._yEase=C?Ve(We(!0===C?v:C,M.ease)):0,C&&e._yoyo&&!e._repeat&&(C=e._yEase,e._yEase=e._ease,e._ease=C),e._from=!D&&!!y.runBackwards,!D||I&&!y.stagger){if(x=(f=Y[0]?yt(Y[0]).harness:0)&&y[f.prop],s=Yt(y,dt),L&&(L._zTime<0&&L.progress(1),i<0&&k&&A&&!F?L.render(-1,!0):L.revert(k&&P?ht:lt),L._lazy=0),_){if(Dt(e._startAt=ai.set(Y,Ft({data:"isStart",overwrite:!1,parent:B,immediateRender:!0,lazy:!L&&z(S),startAt:null,delay:0,onUpdate:T&&function(){return ve(e,"onUpdate")},stagger:0},_))),e._startAt._dp=0,e._startAt._sat=e,i<0&&(u||!A&&!F)&&e._startAt.revert(ht),A&&P&&i<=0&&r<=0)return void(i&&(e._zTime=i))}else if(k&&P&&!L)if(i&&(A=!1),a=Ft({overwrite:!1,data:"isFromStart",lazy:A&&!L&&z(S),immediateRender:A,stagger:0,parent:B},s),x&&(a[f.prop]=x),Dt(e._startAt=ai.set(Y,a)),e._startAt._dp=0,e._startAt._sat=e,i<0&&(u?e._startAt.revert(ht):e._startAt.render(-1,!0)),e._zTime=i,A){if(!i)return}else t(e._startAt,R,R);for(e._pt=e._ptCache=0,S=P&&z(S)||S&&!P,n=0;n<Y.length;n++){if(c=(l=Y[n])._gsap||wt(Y)[n]._gsap,e._ptLookup[n]=g={},ft[c.id]&&ut.length&&Ct(),b=O===Y?n:O.indexOf(l),f&&!1!==(m=new f).init(l,x||s,e,b,O)&&(e._pt=o=new yi(e._pt,l,m.name,0,1,m.render,m,0,m.priority),m._props.forEach(function(t){g[t]=o}),m.priority&&(h=1)),!f||x)for(a in s)pt[a]&&(m=ti(a,s,e,b,l,O))?m.priority&&(h=1):g[a]=o=Ze.call(e,l,a,"get",s[a],b,O,0,y.stringFilter);e._op&&e._op[n]&&e.kill(l,e._op[n]),X&&e._pt&&(Ke=e,p.killTweensOf(l,g,e.globalTime(i)),w=!e.parent,Ke=0),e._pt&&S&&(ft[c.id]=1)}h&&wi(e),e._onInit&&e._onInit(e)}e._onUpdate=T,e._initted=(!e._op||e._pt)&&!w,I&&i<=0&&D.render(E,!0,!0)},ii=function(t,e,i,r){var s,n,a=e.ease||r||"power1.inOut";if(j(e))n=i[t]||(i[t]=[]),e.forEach(function(t,i){return n.push({t:i/(e.length-1)*100,v:t,e:a})});else for(s in e)n=i[s]||(i[s]=[]),"ease"===s||n.push({t:parseFloat(t),v:e[s],e:a})},ri=function(t,e,i,r,s){return D(t)?t.call(e,i,r,s):X(t)&&~t.indexOf("random(")?xe(t):t},si=xt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ni={};_t(si+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return ni[t]=1});var ai=function(t){function e(e,i,r,s){var n;"number"==typeof i&&(r.duration=i,i=r,r=null);var a,o,l,c,u,f,m,g,b=(n=t.call(this,s?i:Bt(i))||this).vars,x=b.duration,w=b.delay,y=b.immediateRender,v=b.stagger,_=b.overwrite,A=b.keyframes,S=b.defaults,T=b.scrollTrigger,k=b.yoyoEase,C=i.parent||p,M=(j(e)||G(e)?V(e[0]):"length"in i)?[e]:ce(e);if(n._targets=M.length?wt(M):nt("GSAP target "+e+" not found. https://gsap.com",!I.nullTargetWarn)||[],n._ptLookup=[],n._overwrite=_,A||v||q(x)||q(w)){if(i=n.vars,(a=n.timeline=new $e({data:"nested",defaults:S||{},targets:C&&"nested"===C.data?C.vars.targets:M})).kill(),a.parent=a._dp=h(n),a._start=0,v||q(x)||q(w)){if(c=M.length,m=v&&fe(v),W(v))for(u in v)~si.indexOf(u)&&(g||(g={}),g[u]=v[u]);for(o=0;o<c;o++)(l=Yt(i,ni)).stagger=0,k&&(l.yoyoEase=k),g&&Pt(l,g),f=M[o],l.duration=+ri(x,h(n),o,f,M),l.delay=(+ri(w,h(n),o,f,M)||0)-n._delay,!v&&1===c&&l.delay&&(n._delay=w=l.delay,n._start+=w,l.delay=0),a.to(f,l,m?m(o,f,M):0),a._ease=Be.none;a.duration()?x=w=0:n.timeline=0}else if(A){Bt(Ft(a.vars.defaults,{ease:"none"})),a._ease=We(A.ease||i.ease||"none");var E,R,F,P=0;if(j(A))A.forEach(function(t){return a.to(M,t,">")}),a.duration();else{for(u in l={},A)"ease"===u||"easeEach"===u||ii(u,A[u],l,A.easeEach);for(u in l)for(E=l[u].sort(function(t,e){return t.t-e.t}),P=0,o=0;o<E.length;o++)(F={ease:(R=E[o]).e,duration:(R.t-(o?E[o-1].t:0))/100*x})[u]=R.v,a.to(M,F,P),P+=F.duration;a.duration()<x&&a.to({},{duration:x-a.duration()})}}x||n.duration(x=a.duration())}else n.timeline=0;return!0!==_||d||(Ke=h(n),p.killTweensOf(M),Ke=0),$t(C,h(n),r),i.reversed&&n.reverse(),i.paused&&n.paused(!0),(y||!x&&!A&&n._start===St(C._time)&&z(y)&&Wt(h(n))&&"nested"!==C.data)&&(n._tTime=-1e-8,n.render(Math.max(0,-w)||0)),T&&Kt(h(n),T),n}c(e,t);var i=e.prototype;return i.render=function(t,e,i){var r,s,n,a,o,l,h,c,d,f=this._time,p=this._tDur,m=this._dur,g=t<0,b=t>p-R&&!g?p:t<R?0:t;if(m){if(b!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(r=b,c=this.timeline,this._repeat){if(a=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*a+t,e,i);if(r=St(b%a),b===p?(n=this._repeat,r=m):(n=~~(o=St(b/a)))&&n===o?(r=m,n--):r>m&&(r=m),(l=this._yoyo&&1&n)&&(d=this._yEase,r=m-r),o=Ut(this._tTime,a),r===f&&!i&&this._initted&&n===o)return this._tTime=b,this;n!==o&&(c&&this._yEase&&Ne(c,l),this.vars.repeatRefresh&&!l&&!this._lock&&r!==a&&this._initted&&(this._lock=i=1,this.render(St(a*n),!0).invalidate()._lock=0))}if(!this._initted){if(Jt(this,g?t:r,i,e,b))return this._tTime=0,this;if(!(f===this._time||i&&this.vars.repeatRefresh&&n!==o))return this;if(m!==this._dur)return this.render(t,e,i)}if(this._tTime=b,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(d||this._ease)(r/m),this._from&&(this.ratio=h=1-h),!f&&b&&!e&&!o&&(ve(this,"onStart"),this._tTime!==b))return this;for(s=this._pt;s;)s.r(h,s.d),s=s._next;c&&c.render(t<0?t:c._dur*c._ease(r/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(g&&Nt(this,t,0,i),ve(this,"onUpdate")),this._repeat&&n!==o&&this.vars.onRepeat&&!e&&this.parent&&ve(this,"onRepeat"),b!==this._tDur&&b||this._tTime!==b||(g&&!this._onUpdate&&Nt(this,t,0,!0),(t||!m)&&(b===this._tDur&&this._ts>0||!b&&this._ts<0)&&Dt(this,1),e||g&&!f||!(b||f||l)||(ve(this,b===p?"onComplete":"onReverseComplete",!0),this._prom&&!(b<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,i,r){var s,n,a,o=t.ratio,l=e<0||!e&&(!t._start&&Qt(t)&&(t._initted||!Zt(t))||(t._ts<0||t._dp._ts<0)&&!Zt(t))?0:1,h=t._rDelay,c=0;if(h&&t._repeat&&(c=ae(0,t._tDur,e),n=Ut(c,h),t._yoyo&&1&n&&(l=1-l),n!==Ut(t._tTime,h)&&(o=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==o||u||r||t._zTime===R||!e&&t._zTime){if(!t._initted&&Jt(t,e,r,i,c))return;for(a=t._zTime,t._zTime=e||(i?R:0),i||(i=e&&!a),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=c,s=t._pt;s;)s.r(l,s.d),s=s._next;e<0&&Nt(t,e,0,!0),t._onUpdate&&!i&&ve(t,"onUpdate"),c&&t._repeat&&!i&&t.parent&&ve(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Dt(t,1),i||u||(ve(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},i.targets=function(){return this._targets},i.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},i.resetTo=function(t,e,i,r,s){v||Le.wake(),this._ts||this.play();var n=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||ei(this,n),function(t,e,i,r,s,n,a,o){var l,h,c,d,u=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!u)for(u=t._ptCache[e]=[],c=t._ptLookup,d=t._targets.length;d--;){if((l=c[d][e])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return Je=1,t.vars[e]="+=0",ei(t,a),Je=0,o?nt(e+" not eligible for reset"):1;u.push(l)}for(d=u.length;d--;)(l=(h=u[d])._pt||h).s=!r&&0!==r||s?l.s+(r||0)+n*l.c:r,l.c=i-l.s,h.e&&(h.e=At(i)+oe(h.e)),h.b&&(h.b=l.s+oe(h.b))}(this,t,e,i,r,this._ease(n/this._dur),n,s)?this.resetTo(t,e,i,r,1):(jt(this,0),this.parent||Ot(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?_e(this):this.scrollTrigger&&this.scrollTrigger.kill(!!u),this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ke&&!0!==Ke.vars.overwrite)._first||_e(this),this.parent&&i!==this.timeline.totalDuration()&&te(this,this._dur*this.timeline._tDur/i,0,1),this}var r,s,n,a,o,l,h,c=this._targets,d=t?ce(t):c,f=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0}(c,d))return"all"===e&&(this._pt=0),_e(this);for(r=this._op=this._op||[],"all"!==e&&(X(e)&&(o={},_t(e,function(t){return o[t]=1}),e=o),e=function(t,e){var i,r,s,n,a=t[0]?yt(t[0]).harness:0,o=a&&a.aliases;if(!o)return e;for(r in i=Pt({},e),o)if(r in i)for(s=(n=o[r].split(",")).length;s--;)i[n[s]]=i[r];return i}(c,e)),h=c.length;h--;)if(~d.indexOf(c[h]))for(o in s=f[h],"all"===e?(r[h]=e,a=s,n={}):(n=r[h]=r[h]||{},a=e),a)(l=s&&s[o])&&("kill"in l.d&&!0!==l.d.kill(o)||Xt(this,l,"_pt"),delete s[o]),"all"!==n&&(n[o]=1);return this._initted&&!this._pt&&p&&_e(this),this},e.to=function(t,i){return new e(t,i,arguments[2])},e.from=function(t,e){return se(1,arguments)},e.delayedCall=function(t,i,r,s){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:i,onReverseComplete:i,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:s})},e.fromTo=function(t,e,i){return se(2,arguments)},e.set=function(t,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(t,i)},e.killTweensOf=function(t,e,i){return p.killTweensOf(t,e,i)},e}(He);Ft(ai.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_t("staggerTo,staggerFrom,staggerFromTo",function(t){ai[t]=function(){var e=new $e,i=le.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}});var oi=function(t,e,i){return t[e]=i},li=function(t,e,i){return t[e](i)},hi=function(t,e,i,r){return t[e](r.fp,i)},ci=function(t,e,i){return t.setAttribute(e,i)},di=function(t,e){return D(t[e])?li:N(t[e])&&t.setAttribute?ci:oi},ui=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},fi=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},pi=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},mi=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},gi=function(t,e,i,r){for(var s,n=this._pt;n;)s=n._next,n.p===r&&n.modifier(t,e,i),n=s},bi=function(t){for(var e,i,r=this._pt;r;)i=r._next,r.p===t&&!r.op||r.op===t?Xt(this,r,"_pt"):r.dep||(e=1),r=i;return!e},xi=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},wi=function(t){for(var e,i,r,s,n=t._pt;n;){for(e=n._next,i=r;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:s)?n._prev._next=n:r=n,(n._next=i)?i._prev=n:s=n,n=e}t._pt=r},yi=function(){function t(t,e,i,r,s,n,a,o,l){this.t=e,this.s=r,this.c=s,this.p=i,this.r=n||ui,this.d=a||this,this.set=o||oi,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=xi,this.m=t,this.mt=i,this.tween=e},t}();_t(xt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return dt[t]=1}),et.TweenMax=et.TweenLite=ai,et.TimelineLite=et.TimelineMax=$e,p=new $e({sortChildren:!1,defaults:M,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),I.stringFilter=Pe;var vi=[],_i={},Ai=[],Si=0,Ti=0,ki=function(t){return(_i[t]||Ai).map(function(t){return t()})},Ci=function(){var t=Date.now(),e=[];t-Si>2&&(ki("matchMediaInit"),vi.forEach(function(t){var i,r,s,n,a=t.queries,o=t.conditions;for(r in a)(i=m.matchMedia(a[r]).matches)&&(s=1),i!==o[r]&&(o[r]=i,n=1);n&&(t.revert(),s&&e.push(t))}),ki("matchMediaRevert"),e.forEach(function(t){return t.onMatch(t,function(e){return t.add(null,e)})}),Si=t,ki("matchMedia"))},Ii=function(){function t(t,e){this.selector=e&&de(e),this.data=[],this._r=[],this.isReverted=!1,this.id=Ti++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,i){D(t)&&(i=e,e=t,t=D);var r=this,s=function(){var t,s=f,n=r.selector;return s&&s!==r&&s.data.push(r),i&&(r.selector=de(i)),f=r,t=e.apply(r,arguments),D(t)&&r._r.push(t),f=s,r.selector=n,r.isReverted=!1,t};return r.last=s,t===D?s(r,function(t){return r.add(null,t)}):t?r[t]=s:s},e.ignore=function(t){var e=f;f=null,t(this),f=e},e.getTweens=function(){var e=[];return this.data.forEach(function(i){return i instanceof t?e.push.apply(e,i.getTweens()):i instanceof ai&&!(i.parent&&"nested"===i.parent.data)&&e.push(i)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var i=this;if(t?function(){for(var e,r=i.getTweens(),s=i.data.length;s--;)"isFlip"===(e=i.data[s]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach(function(t){return r.splice(r.indexOf(t),1)}));for(r.map(function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t}}).sort(function(t,e){return e.g-t.g||-1/0}).forEach(function(e){return e.t.revert(t)}),s=i.data.length;s--;)(e=i.data[s])instanceof $e?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof ai)&&e.revert&&e.revert(t);i._r.forEach(function(e){return e(t,i)}),i.isReverted=!0}():this.data.forEach(function(t){return t.kill&&t.kill()}),this.clear(),e)for(var r=vi.length;r--;)vi[r].id===this.id&&vi.splice(r,1)},e.revert=function(t){this.kill(t||{})},t}(),Mi=function(){function t(t){this.contexts=[],this.scope=t,f&&f.data.push(this)}var e=t.prototype;return e.add=function(t,e,i){W(t)||(t={matches:t});var r,s,n,a=new Ii(0,i||this.scope),o=a.conditions={};for(s in f&&!a.selector&&(a.selector=f.selector),this.contexts.push(a),e=a.add("onMatch",e),a.queries=t,t)"all"===s?n=1:(r=m.matchMedia(t[s]))&&(vi.indexOf(a)<0&&vi.push(a),(o[s]=r.matches)&&(n=1),r.addListener?r.addListener(Ci):r.addEventListener("change",Ci));return n&&e(a,function(t){return a.add(null,t)}),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach(function(e){return e.kill(t,!0)})},t}(),Ei={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(t){return Se(t)})},timeline:function(t){return new $e(t)},getTweensOf:function(t,e){return p.getTweensOf(t,e)},getProperty:function(t,e,i,r){X(t)&&(t=ce(t)[0]);var s=yt(t||{}).get,n=i?Rt:Et;return"native"===i&&(i=""),t?e?n((pt[e]&&pt[e].get||s)(t,e,i,r)):function(e,i,r){return n((pt[e]&&pt[e].get||s)(t,e,i,r))}:t},quickSetter:function(t,e,i){if((t=ce(t)).length>1){var r=t.map(function(t){return Pi.quickSetter(t,e,i)}),s=r.length;return function(t){for(var e=s;e--;)r[e](t)}}t=t[0]||{};var n=pt[e],a=yt(t),o=a.harness&&(a.harness.aliases||{})[e]||e,l=n?function(e){var r=new n;y._pt=0,r.init(t,i?e+i:e,y,0,[t]),r.render(1,r),y._pt&&mi(1,y)}:a.set(t,o);return n?l:function(e){return l(t,o,i?e+i:e,a,1)}},quickTo:function(t,e,i){var r,s=Pi.to(t,Ft(((r={})[e]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),n=function(t,i,r){return s.resetTo(e,t,i,r)};return n.tween=s,n},isTweening:function(t){return p.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=We(t.ease,M.ease)),Lt(M,t||{})},config:function(t){return Lt(I,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,s=t.defaults,n=t.extendTimeline;(r||"").split(",").forEach(function(t){return t&&!pt[t]&&!et[t]&&nt(e+" effect requires "+t+" plugin.")}),mt[e]=function(t,e,r){return i(ce(t),Ft(e||{},s),r)},n&&($e.prototype[e]=function(t,i,r){return this.add(mt[e](t,W(i)?i:(r=i)&&{},this),r)})},registerEase:function(t,e){Be[t]=We(e)},parseEase:function(t,e){return arguments.length?We(t,e):Be},getById:function(t){return p.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,r,s=new $e(t);for(s.smoothChildTiming=z(t.smoothChildTiming),p.remove(s),s._dp=0,s._time=s._tTime=p._time,i=p._first;i;)r=i._next,!e&&!i._dur&&i instanceof ai&&i.vars.onComplete===i._targets[0]||$t(s,i,i._start-i._delay),i=r;return $t(p,s,0),s},context:function(t,e){return t?new Ii(t,e):f},matchMedia:function(t){return new Mi(t)},matchMediaRefresh:function(){return vi.forEach(function(t){var e,i,r=t.conditions;for(i in r)r[i]&&(r[i]=!1,e=1);e&&t.revert()})||Ci()},addEventListener:function(t,e){var i=_i[t]||(_i[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=_i[t],r=i&&i.indexOf(e);r>=0&&i.splice(r,1)},utils:{wrap:function t(e,i,r){var s=i-e;return j(e)?be(e,t(0,e.length),i):ne(r,function(t){return(s+(t-e)%s)%s+e})},wrapYoyo:function t(e,i,r){var s=i-e,n=2*s;return j(e)?be(e,t(0,e.length-1),i):ne(r,function(t){return e+((t=(n+(t-e)%n)%n||0)>s?n-t:t)})},distribute:fe,random:ge,snap:me,normalize:function(t,e,i){return we(t,e,0,1,i)},getUnit:oe,clamp:function(t,e,i){return ne(i,function(i){return ae(t,e,i)})},splitColor:Ie,toArray:ce,selector:de,mapRange:we,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||oe(i))}},interpolate:function t(e,i,r,s){var n=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!n){var a,o,l,h,c,d=X(e),u={};if(!0===r&&(s=1)&&(r=null),d)e={p:e},i={p:i};else if(j(e)&&!j(i)){for(l=[],h=e.length,c=h-2,o=1;o<h;o++)l.push(t(e[o-1],e[o]));h--,n=function(t){t*=h;var e=Math.min(c,~~t);return l[e](t-e)},r=i}else s||(e=Pt(j(e)?[]:{},e));if(!l){for(a in i)Ze.call(u,e,a,"get",i[a]);n=function(t){return mi(t,u)||(d?e.p:e)}}}return ne(r,n)},shuffle:ue},install:rt,effects:mt,ticker:Le,updateRoot:$e.updateRoot,plugins:pt,globalTimeline:p,core:{PropTween:yi,globals:at,Tween:ai,Timeline:$e,Animation:He,getCache:yt,_removeLinkedListItem:Xt,reverting:function(){return u},context:function(t){return t&&f&&(f.data.push(t),t._ctx=f),f},suppressOverwrites:function(t){return d=t}}};_t("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Ei[t]=ai[t]}),Le.add($e.updateRoot),y=Ei.to({},{duration:0});var Ri=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Fi=function(t,e){return{name:t,headless:1,rawVars:1,init:function(t,i,r){r._onInit=function(t){var r,s;if(X(i)&&(r={},_t(i,function(t){return r[t]=1}),i=r),e){for(s in r={},i)r[s]=e(i[s]);i=r}!function(t,e){var i,r,s,n=t._targets;for(i in e)for(r=n.length;r--;)(s=t._ptLookup[r][i])&&(s=s.d)&&(s._pt&&(s=Ri(s,i)),s&&s.modifier&&s.modifier(e[i],t,n[r],i))}(t,i)}}}},Pi=Ei.registerPlugin({name:"attr",init:function(t,e,i,r,s){var n,a,o;for(n in this.tween=i,e)o=t.getAttribute(n)||"",(a=this.add(t,"setAttribute",(o||0)+"",e[n],r,s,0,0,n)).op=n,a.b=o,this._props.push(n)},render:function(t,e){for(var i=e._pt;i;)u?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Fi("roundProps",pe),Fi("modifiers"),Fi("snap",me))||Ei;ai.version=$e.version=Pi.version="3.13.0",x=1,U()&&Ye(),Be.Power0,Be.Power1,Be.Power2,Be.Power3,Be.Power4,Be.Linear,Be.Quad,Be.Cubic,Be.Quart,Be.Quint,Be.Strong,Be.Elastic,Be.Back,Be.SteppedEase,Be.Bounce,Be.Sine,Be.Expo,Be.Circ;var Li,Yi,Bi,Oi,Xi,Di,Vi,Ni,Wi={},zi=180/Math.PI,Ui=Math.PI/180,qi=Math.atan2,Gi=/([A-Z])/g,ji=/(left|right|width|margin|padding|x)/i,Hi=/[\s,\(]\S/,$i={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ki=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Ji=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Qi=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Zi=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},tr=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},er=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},ir=function(t,e,i){return t.style[e]=i},rr=function(t,e,i){return t.style.setProperty(e,i)},sr=function(t,e,i){return t._gsap[e]=i},nr=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},ar=function(t,e,i,r,s){var n=t._gsap;n.scaleX=n.scaleY=i,n.renderTransform(s,n)},or=function(t,e,i,r,s){var n=t._gsap;n[e]=i,n.renderTransform(s,n)},lr="transform",hr=lr+"Origin",cr=function t(e,i){var r=this,s=this.target,n=s.style,a=s._gsap;if(e in Wi&&n){if(this.tfm=this.tfm||{},"transform"===e)return $i.transform.split(",").forEach(function(e){return t.call(r,e,i)});if(~(e=$i[e]||e).indexOf(",")?e.split(",").forEach(function(t){return r.tfm[t]=Ir(s,t)}):this.tfm[e]=a.x?a[e]:Ir(s,e),e===hr&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(lr)>=0)return;a.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(hr,i,"")),e=lr}(n||i)&&this.props.push(e,i,n[e])},dr=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},ur=function(){var t,e,i=this.props,r=this.target,s=r.style,n=r._gsap;for(t=0;t<i.length;t+=3)i[t+1]?2===i[t+1]?r[i[t]](i[t+2]):r[i[t]]=i[t+2]:i[t+2]?s[i[t]]=i[t+2]:s.removeProperty("--"===i[t].substr(0,2)?i[t]:i[t].replace(Gi,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)n[e]=this.tfm[e];n.svg&&(n.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(t=Vi())&&t.isStart||s[lr]||(dr(s),n.zOrigin&&s[hr]&&(s[hr]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},fr=function(t,e){var i={target:t,props:[],revert:ur,save:cr};return t._gsap||Pi.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(t){return i.save(t)}),i},pr=function(t,e){var i=Yi.createElementNS?Yi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Yi.createElement(t);return i&&i.style?i:Yi.createElement(t)},mr=function t(e,i,r){var s=getComputedStyle(e);return s[i]||s.getPropertyValue(i.replace(Gi,"-$1").toLowerCase())||s.getPropertyValue(i)||!r&&t(e,br(i)||i,1)||""},gr="O,Moz,ms,Ms,Webkit".split(","),br=function(t,e,i){var r=(e||Xi).style,s=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(gr[s]+t in r););return s<0?null:(3===s?"ms":s>=0?gr[s]:"")+t},xr=function(){"undefined"!=typeof window&&window.document&&(Li=window,Yi=Li.document,Bi=Yi.documentElement,Xi=pr("div")||{style:{}},pr("div"),lr=br(lr),hr=lr+"Origin",Xi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ni=!!br("perspective"),Vi=Pi.core.reverting,Oi=1)},wr=function(t){var e,i=t.ownerSVGElement,r=pr("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=t.cloneNode(!0);s.style.display="block",r.appendChild(s),Bi.appendChild(r);try{e=s.getBBox()}catch(t){}return r.removeChild(s),Bi.removeChild(r),e},yr=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},vr=function(t){var e,i;try{e=t.getBBox()}catch(r){e=wr(t),i=1}return e&&(e.width||e.height)||i||(e=wr(t)),!e||e.width||e.x||e.y?e:{x:+yr(t,["x","cx","x1"])||0,y:+yr(t,["y","cy","y1"])||0,width:0,height:0}},_r=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!vr(t))},Ar=function(t,e){if(e){var i,r=t.style;e in Wi&&e!==hr&&(e=lr),r.removeProperty?("ms"!==(i=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty("--"===i?e:e.replace(Gi,"-$1").toLowerCase())):r.removeAttribute(e)}},Sr=function(t,e,i,r,s,n){var a=new yi(t._pt,e,i,0,1,n?er:tr);return t._pt=a,a.b=r,a.e=s,t._props.push(i),a},Tr={deg:1,rad:1,turn:1},kr={grid:1,flex:1},Cr=function t(e,i,r,s){var n,a,o,l,h=parseFloat(r)||0,c=(r+"").trim().substr((h+"").length)||"px",d=Xi.style,u=ji.test(i),f="svg"===e.tagName.toLowerCase(),p=(f?"client":"offset")+(u?"Width":"Height"),m=100,g="px"===s,b="%"===s;if(s===c||!h||Tr[s]||Tr[c])return h;if("px"!==c&&!g&&(h=t(e,i,r,"px")),l=e.getCTM&&_r(e),(b||"%"===c)&&(Wi[i]||~i.indexOf("adius")))return n=l?e.getBBox()[u?"width":"height"]:e[p],At(b?h/n*m:h/100*n);if(d[u?"width":"height"]=m+(g?c:s),a="rem"!==s&&~i.indexOf("adius")||"em"===s&&e.appendChild&&!f?e:e.parentNode,l&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==Yi&&a.appendChild||(a=Yi.body),(o=a._gsap)&&b&&o.width&&u&&o.time===Le.time&&!o.uncache)return At(h/o.width*m);if(!b||"height"!==i&&"width"!==i)(b||"%"===c)&&!kr[mr(a,"display")]&&(d.position=mr(e,"position")),a===e&&(d.position="static"),a.appendChild(Xi),n=Xi[p],a.removeChild(Xi),d.position="absolute";else{var x=e.style[i];e.style[i]=m+s,n=e[p],x?e.style[i]=x:Ar(e,i)}return u&&b&&((o=yt(a)).time=Le.time,o.width=a[p]),At(g?n*h/m:n&&h?m/n*h:0)},Ir=function(t,e,i,r){var s;return Oi||xr(),e in $i&&"transform"!==e&&~(e=$i[e]).indexOf(",")&&(e=e.split(",")[0]),Wi[e]&&"transform"!==e?(s=Vr(t,r),s="transformOrigin"!==e?s[e]:s.svg?s.origin:Nr(mr(t,hr))+" "+s.zOrigin+"px"):(!(s=t.style[e])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=Pr[e]&&Pr[e](t,e,i)||mr(t,e)||vt(t,e)||("opacity"===e?1:0)),i&&!~(s+"").trim().indexOf(" ")?Cr(t,e,s,i)+i:s},Mr=function(t,e,i,r){if(!i||"none"===i){var s=br(e,t,1),n=s&&mr(t,s,1);n&&n!==i?(e=s,i=n):"borderColor"===e&&(i=mr(t,"borderTopColor"))}var a,o,l,h,c,d,u,f,p,m,g,b=new yi(this._pt,t.style,e,0,1,pi),x=0,w=0;if(b.b=i,b.e=r,i+="","var(--"===(r+="").substring(0,6)&&(r=mr(t,r.substring(4,r.indexOf(")")))),"auto"===r&&(d=t.style[e],t.style[e]=r,r=mr(t,e)||r,d?t.style[e]=d:Ar(t,e)),Pe(a=[i,r]),r=a[1],l=(i=a[0]).match(K)||[],(r.match(K)||[]).length){for(;o=K.exec(r);)u=o[0],p=r.substring(x,o.index),c?c=(c+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(c=1),u!==(d=l[w++]||"")&&(h=parseFloat(d)||0,g=d.substr((h+"").length),"="===u.charAt(1)&&(u=Tt(h,u)+g),f=parseFloat(u),m=u.substr((f+"").length),x=K.lastIndex-m.length,m||(m=m||I.units[e]||g,x===r.length&&(r+=m,b.e+=m)),g!==m&&(h=Cr(t,e,d,m)||0),b._pt={_next:b._pt,p:p||1===w?p:",",s:h,c:f-h,m:c&&c<4||"zIndex"===e?Math.round:0});b.c=x<r.length?r.substring(x,r.length):""}else b.r="display"===e&&"none"===r?er:tr;return Q.test(r)&&(b.e=0),this._pt=b,b},Er={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Rr=function(t){var e=t.split(" "),i=e[0],r=e[1]||"50%";return"top"!==i&&"bottom"!==i&&"left"!==r&&"right"!==r||(t=i,i=r,r=t),e[0]=Er[i]||i,e[1]=Er[r]||r,e.join(" ")},Fr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,r,s,n=e.t,a=n.style,o=e.u,l=n._gsap;if("all"===o||!0===o)a.cssText="",r=1;else for(s=(o=o.split(",")).length;--s>-1;)i=o[s],Wi[i]&&(r=1,i="transformOrigin"===i?hr:lr),Ar(n,i);r&&(Ar(n,lr),l&&(l.svg&&n.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",Vr(n,1),l.uncache=1,dr(a)))}},Pr={clearProps:function(t,e,i,r,s){if("isFromStart"!==s.data){var n=t._pt=new yi(t._pt,e,i,0,0,Fr);return n.u=r,n.pr=-10,n.tween=s,t._props.push(i),1}}},Lr=[1,0,0,1,0,0],Yr={},Br=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Or=function(t){var e=mr(t,lr);return Br(e)?Lr:e.substr(7).match($).map(At)},Xr=function(t,e){var i,r,s,n,a=t._gsap||yt(t),o=t.style,l=Or(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(s=t.transform.baseVal.consolidate().matrix).a,s.b,s.c,s.d,s.e,s.f]).join(",")?Lr:l:(l!==Lr||t.offsetParent||t===Bi||a.svg||(s=o.display,o.display="block",(i=t.parentNode)&&(t.offsetParent||t.getBoundingClientRect().width)||(n=1,r=t.nextElementSibling,Bi.appendChild(t)),l=Or(t),s?o.display=s:Ar(t,"display"),n&&(r?i.insertBefore(t,r):i?i.appendChild(t):Bi.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Dr=function(t,e,i,r,s,n){var a,o,l,h=t._gsap,c=s||Xr(t,!0),d=h.xOrigin||0,u=h.yOrigin||0,f=h.xOffset||0,p=h.yOffset||0,m=c[0],g=c[1],b=c[2],x=c[3],w=c[4],y=c[5],v=e.split(" "),_=parseFloat(v[0])||0,A=parseFloat(v[1])||0;i?c!==Lr&&(o=m*x-g*b)&&(l=_*(-g/o)+A*(m/o)-(m*y-g*w)/o,_=_*(x/o)+A*(-b/o)+(b*y-x*w)/o,A=l):(_=(a=vr(t)).x+(~v[0].indexOf("%")?_/100*a.width:_),A=a.y+(~(v[1]||v[0]).indexOf("%")?A/100*a.height:A)),r||!1!==r&&h.smooth?(w=_-d,y=A-u,h.xOffset=f+(w*m+y*b)-w,h.yOffset=p+(w*g+y*x)-y):h.xOffset=h.yOffset=0,h.xOrigin=_,h.yOrigin=A,h.smooth=!!r,h.origin=e,h.originIsAbsolute=!!i,t.style[hr]="0px 0px",n&&(Sr(n,h,"xOrigin",d,_),Sr(n,h,"yOrigin",u,A),Sr(n,h,"xOffset",f,h.xOffset),Sr(n,h,"yOffset",p,h.yOffset)),t.setAttribute("data-svg-origin",_+" "+A)},Vr=function(t,e){var i=t._gsap||new je(t);if("x"in i&&!e&&!i.uncache)return i;var r,s,n,a,o,l,h,c,d,u,f,p,m,g,b,x,w,y,v,_,A,S,T,k,C,M,E,R,F,P,L,Y,B=t.style,O=i.scaleX<0,X="px",D="deg",V=getComputedStyle(t),N=mr(t,hr)||"0";return r=s=n=l=h=c=d=u=f=0,a=o=1,i.svg=!(!t.getCTM||!_r(t)),V.translate&&("none"===V.translate&&"none"===V.scale&&"none"===V.rotate||(B[lr]=("none"!==V.translate?"translate3d("+(V.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==V.rotate?"rotate("+V.rotate+") ":"")+("none"!==V.scale?"scale("+V.scale.split(" ").join(",")+") ":"")+("none"!==V[lr]?V[lr]:"")),B.scale=B.rotate=B.translate="none"),g=Xr(t,i.svg),i.svg&&(i.uncache?(C=t.getBBox(),N=i.xOrigin-C.x+"px "+(i.yOrigin-C.y)+"px",k=""):k=!e&&t.getAttribute("data-svg-origin"),Dr(t,k||N,!!k||i.originIsAbsolute,!1!==i.smooth,g)),p=i.xOrigin||0,m=i.yOrigin||0,g!==Lr&&(y=g[0],v=g[1],_=g[2],A=g[3],r=S=g[4],s=T=g[5],6===g.length?(a=Math.sqrt(y*y+v*v),o=Math.sqrt(A*A+_*_),l=y||v?qi(v,y)*zi:0,(d=_||A?qi(_,A)*zi+l:0)&&(o*=Math.abs(Math.cos(d*Ui))),i.svg&&(r-=p-(p*y+m*_),s-=m-(p*v+m*A))):(Y=g[6],P=g[7],E=g[8],R=g[9],F=g[10],L=g[11],r=g[12],s=g[13],n=g[14],h=(b=qi(Y,F))*zi,b&&(k=S*(x=Math.cos(-b))+E*(w=Math.sin(-b)),C=T*x+R*w,M=Y*x+F*w,E=S*-w+E*x,R=T*-w+R*x,F=Y*-w+F*x,L=P*-w+L*x,S=k,T=C,Y=M),c=(b=qi(-_,F))*zi,b&&(x=Math.cos(-b),L=A*(w=Math.sin(-b))+L*x,y=k=y*x-E*w,v=C=v*x-R*w,_=M=_*x-F*w),l=(b=qi(v,y))*zi,b&&(k=y*(x=Math.cos(b))+v*(w=Math.sin(b)),C=S*x+T*w,v=v*x-y*w,T=T*x-S*w,y=k,S=C),h&&Math.abs(h)+Math.abs(l)>359.9&&(h=l=0,c=180-c),a=At(Math.sqrt(y*y+v*v+_*_)),o=At(Math.sqrt(T*T+Y*Y)),b=qi(S,T),d=Math.abs(b)>2e-4?b*zi:0,f=L?1/(L<0?-L:L):0),i.svg&&(k=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Br(mr(t,lr)),k&&t.setAttribute("transform",k))),Math.abs(d)>90&&Math.abs(d)<270&&(O?(a*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,d+=d<=0?180:-180)),e=e||i.uncache,i.x=r-((i.xPercent=r&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+X,i.y=s-((i.yPercent=s&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-s)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+X,i.z=n+X,i.scaleX=At(a),i.scaleY=At(o),i.rotation=At(l)+D,i.rotationX=At(h)+D,i.rotationY=At(c)+D,i.skewX=d+D,i.skewY=u+D,i.transformPerspective=f+X,(i.zOrigin=parseFloat(N.split(" ")[2])||!e&&i.zOrigin||0)&&(B[hr]=Nr(N)),i.xOffset=i.yOffset=0,i.force3D=I.force3D,i.renderTransform=i.svg?Hr:Ni?jr:zr,i.uncache=0,i},Nr=function(t){return(t=t.split(" "))[0]+" "+t[1]},Wr=function(t,e,i){var r=oe(e);return At(parseFloat(e)+parseFloat(Cr(t,"x",i+"px",r)))+r},zr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,jr(t,e)},Ur="0deg",qr="0px",Gr=") ",jr=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,n=i.x,a=i.y,o=i.z,l=i.rotation,h=i.rotationY,c=i.rotationX,d=i.skewX,u=i.skewY,f=i.scaleX,p=i.scaleY,m=i.transformPerspective,g=i.force3D,b=i.target,x=i.zOrigin,w="",y="auto"===g&&t&&1!==t||!0===g;if(x&&(c!==Ur||h!==Ur)){var v,_=parseFloat(h)*Ui,A=Math.sin(_),S=Math.cos(_);_=parseFloat(c)*Ui,v=Math.cos(_),n=Wr(b,n,A*v*-x),a=Wr(b,a,-Math.sin(_)*-x),o=Wr(b,o,S*v*-x+x)}m!==qr&&(w+="perspective("+m+Gr),(r||s)&&(w+="translate("+r+"%, "+s+"%) "),(y||n!==qr||a!==qr||o!==qr)&&(w+=o!==qr||y?"translate3d("+n+", "+a+", "+o+") ":"translate("+n+", "+a+Gr),l!==Ur&&(w+="rotate("+l+Gr),h!==Ur&&(w+="rotateY("+h+Gr),c!==Ur&&(w+="rotateX("+c+Gr),d===Ur&&u===Ur||(w+="skew("+d+", "+u+Gr),1===f&&1===p||(w+="scale("+f+", "+p+Gr),b.style[lr]=w||"translate(0, 0)"},Hr=function(t,e){var i,r,s,n,a,o=e||this,l=o.xPercent,h=o.yPercent,c=o.x,d=o.y,u=o.rotation,f=o.skewX,p=o.skewY,m=o.scaleX,g=o.scaleY,b=o.target,x=o.xOrigin,w=o.yOrigin,y=o.xOffset,v=o.yOffset,_=o.forceCSS,A=parseFloat(c),S=parseFloat(d);u=parseFloat(u),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),u+=p),u||f?(u*=Ui,f*=Ui,i=Math.cos(u)*m,r=Math.sin(u)*m,s=Math.sin(u-f)*-g,n=Math.cos(u-f)*g,f&&(p*=Ui,a=Math.tan(f-p),s*=a=Math.sqrt(1+a*a),n*=a,p&&(a=Math.tan(p),i*=a=Math.sqrt(1+a*a),r*=a)),i=At(i),r=At(r),s=At(s),n=At(n)):(i=m,n=g,r=s=0),(A&&!~(c+"").indexOf("px")||S&&!~(d+"").indexOf("px"))&&(A=Cr(b,"x",c,"px"),S=Cr(b,"y",d,"px")),(x||w||y||v)&&(A=At(A+x-(x*i+w*s)+y),S=At(S+w-(x*r+w*n)+v)),(l||h)&&(a=b.getBBox(),A=At(A+l/100*a.width),S=At(S+h/100*a.height)),a="matrix("+i+","+r+","+s+","+n+","+A+","+S+")",b.setAttribute("transform",a),_&&(b.style[lr]=a)},$r=function(t,e,i,r,s){var n,a,o=360,l=X(s),h=parseFloat(s)*(l&&~s.indexOf("rad")?zi:1)-r,c=r+h+"deg";return l&&("short"===(n=s.split("_")[1])&&(h%=o)!==h%180&&(h+=h<0?o:-360),"cw"===n&&h<0?h=(h+36e9)%o-~~(h/o)*o:"ccw"===n&&h>0&&(h=(h-36e9)%o-~~(h/o)*o)),t._pt=a=new yi(t._pt,e,i,r,h,Ji),a.e=c,a.u="deg",t._props.push(i),a},Kr=function(t,e){for(var i in e)t[i]=e[i];return t},Jr=function(t,e,i){var r,s,n,a,o,l,h,c=Kr({},i._gsap),d=i.style;for(s in c.svg?(n=i.getAttribute("transform"),i.setAttribute("transform",""),d[lr]=e,r=Vr(i,1),Ar(i,lr),i.setAttribute("transform",n)):(n=getComputedStyle(i)[lr],d[lr]=e,r=Vr(i,1),d[lr]=n),Wi)(n=c[s])!==(a=r[s])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(s)<0&&(o=oe(n)!==(h=oe(a))?Cr(i,s,n,h):parseFloat(n),l=parseFloat(a),t._pt=new yi(t._pt,r,s,o,l-o,Ki),t._pt.u=h||0,t._props.push(s));Kr(r,c)};_t("padding,margin,Width,Radius",function(t,e){var i="Top",r="Right",s="Bottom",n="Left",a=(e<3?[i,r,s,n]:[i+n,i+r,s+r,s+n]).map(function(i){return e<2?t+i:"border"+i+t});Pr[e>1?"border"+t:t]=function(t,e,i,r,s){var n,o;if(arguments.length<4)return n=a.map(function(e){return Ir(t,e,i)}),5===(o=n.join(" ")).split(n[0]).length?n[0]:o;n=(r+"").split(" "),o={},a.forEach(function(t,e){return o[t]=n[e]=n[e]||n[(e-1)/2|0]}),t.init(e,o,s)}});var Qr,Zr,ts={name:"css",register:xr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,s){var n,a,o,l,h,c,d,u,f,p,m,g,b,x,w,y,v=this._props,_=t.style,A=i.vars.startAt;for(d in Oi||xr(),this.styles=this.styles||fr(t),y=this.styles.props,this.tween=i,e)if("autoRound"!==d&&(a=e[d],!pt[d]||!ti(d,e,i,r,t,s)))if(h=typeof a,c=Pr[d],"function"===h&&(h=typeof(a=a.call(i,r,t,s))),"string"===h&&~a.indexOf("random(")&&(a=xe(a)),c)c(this,t,d,a,i)&&(w=1);else if("--"===d.substr(0,2))n=(getComputedStyle(t).getPropertyValue(d)+"").trim(),a+="",Re.lastIndex=0,Re.test(n)||(u=oe(n),f=oe(a)),f?u!==f&&(n=Cr(t,d,n,f)+f):u&&(a+=u),this.add(_,"setProperty",n,a,r,s,0,0,d),v.push(d),y.push(d,0,_[d]);else if("undefined"!==h){if(A&&d in A?(n="function"==typeof A[d]?A[d].call(i,r,t,s):A[d],X(n)&&~n.indexOf("random(")&&(n=xe(n)),oe(n+"")||"auto"===n||(n+=I.units[d]||oe(Ir(t,d))||""),"="===(n+"").charAt(1)&&(n=Ir(t,d))):n=Ir(t,d),l=parseFloat(n),(p="string"===h&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),d in $i&&("autoAlpha"===d&&(1===l&&"hidden"===Ir(t,"visibility")&&o&&(l=0),y.push("visibility",0,_.visibility),Sr(this,_,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==d&&"transform"!==d&&~(d=$i[d]).indexOf(",")&&(d=d.split(",")[0])),m=d in Wi)if(this.styles.save(d),"string"===h&&"var(--"===a.substring(0,6)&&(a=mr(t,a.substring(4,a.indexOf(")"))),o=parseFloat(a)),g||((b=t._gsap).renderTransform&&!e.parseTransform||Vr(t,e.parseTransform),x=!1!==e.smoothOrigin&&b.smooth,(g=this._pt=new yi(this._pt,_,lr,0,1,b.renderTransform,b,0,-1)).dep=1),"scale"===d)this._pt=new yi(this._pt,b,"scaleY",b.scaleY,(p?Tt(b.scaleY,p+o):o)-b.scaleY||0,Ki),this._pt.u=0,v.push("scaleY",d),d+="X";else{if("transformOrigin"===d){y.push(hr,0,_[hr]),a=Rr(a),b.svg?Dr(t,a,0,x,0,this):((f=parseFloat(a.split(" ")[2])||0)!==b.zOrigin&&Sr(this,b,"zOrigin",b.zOrigin,f),Sr(this,_,d,Nr(n),Nr(a)));continue}if("svgOrigin"===d){Dr(t,a,1,x,0,this);continue}if(d in Yr){$r(this,b,d,l,p?Tt(l,p+a):a);continue}if("smoothOrigin"===d){Sr(this,b,"smooth",b.smooth,a);continue}if("force3D"===d){b[d]=a;continue}if("transform"===d){Jr(this,a,t);continue}}else d in _||(d=br(d)||d);if(m||(o||0===o)&&(l||0===l)&&!Hi.test(a)&&d in _)o||(o=0),(u=(n+"").substr((l+"").length))!==(f=oe(a)||(d in I.units?I.units[d]:u))&&(l=Cr(t,d,n,f)),this._pt=new yi(this._pt,m?b:_,d,l,(p?Tt(l,p+o):o)-l,m||"px"!==f&&"zIndex"!==d||!1===e.autoRound?Ki:Zi),this._pt.u=f||0,u!==f&&"%"!==f&&(this._pt.b=n,this._pt.r=Qi);else if(d in _)Mr.call(this,t,d,n,p?p+a:a);else if(d in t)this.add(t,d,n||t[d],p?p+a:a,r,s);else if("parseTransform"!==d){st(d,a);continue}m||(d in _?y.push(d,0,_[d]):"function"==typeof t[d]?y.push(d,2,t[d]()):y.push(d,1,n||t[d])),v.push(d)}w&&wi(this)},render:function(t,e){if(e.tween._time||!Vi())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:Ir,aliases:$i,getSetter:function(t,e,i){var r=$i[e];return r&&r.indexOf(",")<0&&(e=r),e in Wi&&e!==hr&&(t._gsap.x||Ir(t,"x"))?i&&Di===i?"scale"===e?nr:sr:(Di=i||{})&&("scale"===e?ar:or):t.style&&!N(t.style[e])?ir:~e.indexOf("-")?rr:di(t,e)},core:{_removeProperty:Ar,_getMatrix:Xr}};Pi.utils.checkPrefix=br,Pi.core.getStyleSaver=fr,Zr=_t("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(Qr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){Wi[t]=1}),_t(Qr,function(t){I.units[t]="deg",Yr[t]=1}),$i[Zr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Qr,_t("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");$i[e[1]]=Zr[e[0]]}),_t("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){I.units[t]="px"}),Pi.registerPlugin(ts);var es,is=Pi.registerPlugin(ts)||Pi;is.core.Tween,function(t){t[t.banana=1]="banana",t[t.blackberry=2]="blackberry",t[t.cherry=3]="cherry"}(es||(es={}));const rs=Object.keys(es).filter(t=>isNaN(Number(t)));class ss extends Phaser.GameObjects.Container{constructor(t,e,i){super(t,e,i),this._symbols=[],this._symbolHeight=170,this._spinCurrentSymbolsAmount=0,this._spinSymbolsAmount=10,this._scene=t}play(t,e){this._spinCurrentSymbolsAmount=0;const i=this._symbolHeight*this._spinSymbolsAmount;this._spinFinalResult=e,is.to(this,{y:this.y+i,duration:t,ease:"linear",onStart:()=>this._generateTopSymbol(),onUpdate:()=>this._recycleSymbols(),onComplete:()=>this._completeSpinning()})}_generateTopSymbol(){const t=Phaser.Math.RND.pick(rs),e=new l(this._scene,0,this._symbols[0].y-this._symbolHeight,"images",t).setScale(.5);this.add(e),this._symbols.unshift(e),this._spinCurrentSymbolsAmount++}_recycleSymbols(){const t=this._symbols[0],e=this._symbols[1];if(e.y+this.y>=this._symbolHeight){let i;this._spinCurrentSymbolsAmount++,e.y=t.y-this._symbolHeight,i=this._spinCurrentSymbolsAmount<this._spinSymbolsAmount?Phaser.Math.RND.pick(rs):rs[this._spinFinalResult],e.setFrame(i),this._symbols=[e,t]}}_completeSpinning(){this._symbols[0].destroy(),this._symbols.splice(0,1),is.to(this,{y:this.y+15,duration:.4,ease:"power2.out",repeat:1,yoyo:!0,onComplete:()=>{var t;return null===(t=this._onFinish)||void 0===t?void 0:t.call(this)}})}fillWithDefaults(t){const e=new l(this._scene,0,0,"images",rs[t]).setScale(.5);this.add(e),this._symbols.push(e)}onFinish(t){return this._onFinish=t,this}}class ns extends Phaser.GameObjects.Container{constructor(t,e,i){super(t,e,i),this._reels=[],this._scene=t,this._draw()}_draw(){this._board=this._scene.add.sprite(0,0,"images","board"),this._board.setDisplaySize(n.gameWidth/1.2,this._board.height*(n.gameWidth/1.2*1/this._board.width)),this.add(this._board),this._maskContainer=this._scene.add.container(0,0),this.add(this._maskContainer);for(let t=0;t<n.reelsAmount;t++){const e=this._board.displayWidth/6+-this._board.displayWidth/2+this._board.displayWidth*t/3,i=new ss(this._scene,e,0);this._reels.push(i),this._maskContainer.add(i);const r=n.starterSymbolsData[t];i.fillWithDefaults(r),t===n.reelsAmount-1&&this._reels[t].onFinish(()=>{this._onFinish(this._isWin)})}this._mask=this._scene.add.graphics().fillStyle(16777215).fillRect(this.x-this._board.displayWidth/2+15,this.y-this._board.displayHeight/2+15,this._board.displayWidth-30,this._board.displayHeight-30).setVisible(!1);const t=this._mask.createGeometryMask();this._maskContainer.setMask(t)}async play(){const t=await this.mockServerSpin();this._isWin=1===new Set(t).size;const e=[1.2,1.4,1.6];for(let i=0;i<n.reelsAmount;i++)this._reels[i].play(e[i],t[i])}mockServerSpin(){return new Promise(t=>{setTimeout(()=>{const e=Phaser.Math.Between(0,2),i=Phaser.Math.Between(0,2),r=Phaser.Math.Between(0,2);t([e,i,r])},Phaser.Math.Between(0,500))})}onFinish(t){return this._onFinish=e=>{t(e)},this}}class as extends Phaser.GameObjects.Sprite{constructor(t,e,i,r,s){super(t,e,i,r,s.defaultFrame),this._scene=t,this._frames=s,this.setInteractive()}onClick(t){return this.on("pointerdown",t),this}disable(){this.disableInteractive(),this._frames.disableFrame?this.setFrame(this._frames.disableFrame):this.setTint(8421504)}enable(){this.setInteractive(),this._frames.disableFrame?this.setFrame(this._frames.defaultFrame):this.clearTint()}disableInteractions(){this.disableInteractive()}enableInteractions(){this.setInteractive()}}class os extends Phaser.GameObjects.Container{constructor(t,e,i){super(t,e,i),this._scene=t,this._draw()}_draw(){this._spinButton=new as(this._scene,n.gameWidth/2,n.gameHeight/2+130,"images",{defaultFrame:"spin"}).setOrigin(.5,.5).setScale(.5).onClick(()=>{this._play()}),this.add(this._spinButton),this._soundButton=new as(this._scene,n.gameWidth/2-300,n.gameHeight/2+130,"images",{defaultFrame:"sound_on",disableFrame:"sound_off"}).setOrigin(.5,.5).setScale(1).onClick(()=>{this._toggleSound()}),this.add(this._soundButton)}_play(){this._spinButton.disable(),n.audioManager.spin.play(),this._onPlay()}_toggleSound(){n.audioManager.getMute()?(this._soundButton.enable(),n.audioManager.setMute(!1)):(this._soundButton.disable(),n.audioManager.setMute(!0)),this._soundButton.enableInteractions()}finish(){this._spinButton.enable()}onPlay(t){return this._onPlay=t,this}}class ls{constructor(t){this._scene=t,this._scene.sound.pauseOnBlur=!1,this._scene.game.events.on(Phaser.Core.Events.HIDDEN,()=>{this._scene.sound.pauseAll()}),this._scene.game.events.on(Phaser.Core.Events.VISIBLE,()=>{this._scene.sound.resumeAll()}),this.setVolume(n.soundVolume),this.bgMusic=this._scene.sound.add("bg_music",{loop:!0}),this.spin=this._scene.sound.add("spin"),this.win=this._scene.sound.add("win")}_changeVolumeWithFade(t,e,i){is.to(t,{volume:i,duration:e/1e3})}setVolume(t){this._scene.sound.volume=t/100}setMute(t){this._scene.sound.mute=t}getMute(){return this._scene.sound.mute}}class hs extends s().Scene{constructor(){super("MainGameScene")}create(){n.audioManager=new ls(this),n.audioManager.bgMusic.play(),this._container=this.add.container(0,0),this._background=this.add.image(n.gameWidth/2,n.gameHeight/2,"background").setOrigin(.5,.5);const t=Math.max(n.gameWidth/this._background.width,n.gameHeight/this._background.height);this._background.setScale(t),this._container.add(this._background),this._board=new ns(this,n.gameWidth/2,n.gameHeight/2-80).onFinish(t=>{t?(n.audioManager.win.play(),this._spineBoy.animationState.setAnimation(0,"jump")):this._spineBoy.animationState.setAnimation(0,"death"),this._spineBoy.animationState.addAnimation(0,"walk",!0,0),this._controlPanel.finish()}),this._container.add(this._board),this._controlPanel=new os(this,0,40).onPlay(()=>{n.audioManager.win.isPlaying&&n.audioManager.win.stop(),this._board.play(),this._spineBoy.animationState.setAnimation(0,"walk",!0)}),this._container.add(this._controlPanel),this._spineBoy=this.add.spine(n.gameWidth/2+300,n.gameHeight/2+200,"spineboy-data","spineboy-atlas"),this._spineBoy.setScale(.2),this._spineBoy.animationState.setAnimation(0,"walk",!0),this._container.add(this._spineBoy)}}if("undefined"!=typeof window&&window.Phaser){let t=window.require;window.require=e=>t?t(e):"Phaser"===e?window.Phaser:void 0}const cs="spine";class ds{entries={};size=0;add(t){let e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)}addAll(t){let e=this.size;for(var i=0,r=t.length;i<r;i++)this.add(t[i]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}class us{r;g;b;a;static WHITE=new us(1,1,1,1);static RED=new us(1,0,0,1);static GREEN=new us(0,1,0,1);static BLUE=new us(0,0,1,1);static MAGENTA=new us(1,0,1,1);constructor(t=0,e=0,i=0,r=0){this.r=t,this.g=e,this.b=i,this.a=r}set(t,e,i,r){return this.r=t,this.g=e,this.b=i,this.a=r,this.clamp()}setFromColor(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}setFromString(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this}add(t,e,i,r){return this.r+=t,this.g+=e,this.b+=i,this.a+=r,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255}static rgb888ToColor(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255}toRgb888(){const t=t=>("0"+(255*t).toString(16)).slice(-2);return Number("0x"+t(this.r)+t(this.g)+t(this.b))}static fromString(t){return(new us).setFromString(t)}}class fs{static PI=3.1415927;static PI2=2*fs.PI;static invPI2=1/fs.PI2;static radiansToDegrees=180/fs.PI;static radDeg=fs.radiansToDegrees;static degreesToRadians=fs.PI/180;static degRad=fs.degreesToRadians;static clamp(t,e,i){return t<e?e:t>i?i:t}static cosDeg(t){return Math.cos(t*fs.degRad)}static sinDeg(t){return Math.sin(t*fs.degRad)}static atan2Deg(t,e){return Math.atan2(t,e)*fs.degRad}static signum(t){return t>0?1:t<0?-1:0}static toInt(t){return t>0?Math.floor(t):Math.ceil(t)}static cbrt(t){let e=Math.pow(Math.abs(t),1/3);return t<0?-e:e}static randomTriangular(t,e){return fs.randomTriangularWith(t,e,.5*(t+e))}static randomTriangularWith(t,e,i){let r=Math.random(),s=e-t;return r<=(i-t)/s?t+Math.sqrt(r*s*(i-t)):e-Math.sqrt((1-r)*s*(e-i))}static isPowerOfTwo(t){return t&&!(t&t-1)}}class ps{static SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array;static arrayCopy(t,e,i,r,s){for(let n=e,a=r;n<e+s;n++,a++)i[a]=t[n]}static arrayFill(t,e,i,r){for(let s=e;s<i;s++)t[s]=r}static setArraySize(t,e,i=0){let r=t.length;if(r==e)return t;if(t.length=e,r<e)for(let s=r;s<e;s++)t[s]=i;return t}static ensureArrayCapacity(t,e,i=0){return t.length>=e?t:ps.setArraySize(t,e,i)}static newArray(t,e){let i=new Array(t);for(let r=0;r<t;r++)i[r]=e;return i}static newFloatArray(t){if(ps.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static newShortArray(t){if(ps.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);{let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=0;return e}}static toFloatArray(t){return ps.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t}static toSinglePrecision(t){return ps.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t}static webkit602BugfixHelper(t,e){}static contains(t,e,i=!0){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1}static enumValue(t,e){return t[e[0].toUpperCase()+e.slice(1)]}}class ms{items=new Array;instantiator;constructor(t){this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}}class gs{x;y;constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){let t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){let t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this}}class bs{name;constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}}class xs extends bs{static nextID=0;id=xs.nextID++;bones=null;vertices=[];worldVerticesLength=0;timelineAttachment=this;constructor(t){super(t)}computeWorldVertices(t,e,i,r,s,n){i=s+(i>>1)*n;let a=t.bone.skeleton,o=t.deform,l=this.vertices,h=this.bones;if(!h){o.length>0&&(l=o);let a=t.bone,h=a.worldX,c=a.worldY,d=a.a,u=a.b,f=a.c,p=a.d;for(let t=e,a=s;a<i;t+=2,a+=n){let e=l[t],i=l[t+1];r[a]=e*d+i*u+h,r[a+1]=e*f+i*p+c}return}let c=0,d=0;for(let t=0;t<e;t+=2){let t=h[c];c+=t+1,d+=t}let u=a.bones;if(0==o.length)for(let t=s,e=3*d;t<i;t+=n){let i=0,s=0,n=h[c++];for(n+=c;c<n;c++,e+=3){let t=u[h[c]],r=l[e],n=l[e+1],a=l[e+2];i+=(r*t.a+n*t.b+t.worldX)*a,s+=(r*t.c+n*t.d+t.worldY)*a}r[t]=i,r[t+1]=s}else{let t=o;for(let e=s,a=3*d,o=d<<1;e<i;e+=n){let i=0,s=0,n=h[c++];for(n+=c;c<n;c++,a+=3,o+=2){let e=u[h[c]],r=l[a]+t[o],n=l[a+1]+t[o+1],d=l[a+2];i+=(r*e.a+n*e.b+e.worldX)*d,s+=(r*e.c+n*e.d+e.worldY)*d}r[e]=i,r[e+1]=s}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),ps.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=ps.newFloatArray(this.vertices.length),ps.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}}class ws{static _nextID=0;id=ws.nextID();regions;start=0;digits=0;setupIndex=0;constructor(t){this.regions=new Array(t)}copy(){let t=new ws(this.regions.length);return ps.arrayCopy(this.regions,0,t.regions,0,this.regions.length),t.start=this.start,t.digits=this.digits,t.setupIndex=this.setupIndex,t}apply(t,e){let i=t.sequenceIndex;-1==i&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);let r=this.regions[i];e.region!=r&&(e.region=r,e.updateRegion())}getPath(t,e){let i=t,r=(this.start+e).toString();for(let t=this.digits-r.length;t>0;t--)i+="0";return i+=r,i}static nextID(){return ws._nextID++}}var ys;!function(t){t[t.hold=0]="hold",t[t.once=1]="once",t[t.loop=2]="loop",t[t.pingpong=3]="pingpong",t[t.onceReverse=4]="onceReverse",t[t.loopReverse=5]="loopReverse",t[t.pingpongReverse=6]="pingpongReverse"}(ys||(ys={}));const vs=[ys.hold,ys.once,ys.loop,ys.pingpong,ys.onceReverse,ys.loopReverse,ys.pingpongReverse];class _s{name;timelines=[];timelineIds=new ds;duration;constructor(t,e,i){if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=i}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,i,r,s,n,a,o){if(!t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));let l=this.timelines;for(let r=0,h=l.length;r<h;r++)l[r].apply(t,e,i,s,n,a,o)}}var As,Ss;!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(As||(As={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(Ss||(Ss={}));const Ts={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};class ks{propertyIds;frames;constructor(t,e){this.propertyIds=e,this.frames=ps.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){let i=t.length;for(let r=1;r<i;r++)if(t[r]>e)return r-1;return i-1}static search(t,e,i){let r=t.length;for(let s=i;s<r;s+=i)if(t[s]>e)return s-i;return r-i}}class Cs extends ks{curves;constructor(t,e,i){super(t,i),this.curves=ps.newFloatArray(t+18*e),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let e=this.getFrameCount()+18*t;if(this.curves.length>e){let t=ps.newFloatArray(e);ps.arrayCopy(this.curves,0,t,0,e),this.curves=t}}setBezier(t,e,i,r,s,n,a,o,l,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==i&&(d[e]=2+u);let f=.03*(r-2*n+o),p=.03*(s-2*a+l),m=.006*(3*(n-o)-r+h),g=.006*(3*(a-l)-s+c),b=2*f+m,x=2*p+g,w=.3*(n-r)+f+.16666667*m,y=.3*(a-s)+p+.16666667*g,v=r+w,_=s+y;for(let t=u+18;u<t;u+=2)d[u]=v,d[u+1]=_,w+=b,y+=x,b+=m,x+=g,v+=w,_+=y}getBezierValue(t,e,i,r){let s=this.curves;if(s[r]>t){let n=this.frames[e],a=this.frames[e+i];return a+(t-n)/(s[r]-n)*(s[r+1]-a)}let n=r+18;for(r+=2;r<n;r+=2)if(s[r]>=t){let e=s[r-2],i=s[r-1];return i+(t-e)/(s[r]-e)*(s[r+1]-i)}e+=this.getFrameEntries();let a=s[n-2],o=s[n-1];return o+(t-a)/(this.frames[e]-a)*(this.frames[e+i]-o)}}class Is extends Cs{constructor(t,e,i){super(t,e,[i])}getFrameEntries(){return 2}setFrame(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i}getCurveValue(t){let e=this.frames,i=e.length-2;for(let r=2;r<=i;r+=2)if(e[r]>t){i=r-2;break}let r=this.curves[i>>1];switch(r){case 0:let r=e[i],s=e[i+1];return s+(t-r)/(e[i+2]-r)*(e[i+2+1]-s);case 1:return e[i+1]}return this.getBezierValue(t,i,1,r-2)}getRelativeValue(t,e,i,r,s){if(t<this.frames[0]){switch(i){case As.setup:return s;case As.first:return r+(s-r)*e}return r}let n=this.getCurveValue(t);switch(i){case As.setup:return s+n*e;case As.first:case As.replace:n+=s-r}return r+n*e}getAbsoluteValue(t,e,i,r,s){if(t<this.frames[0]){switch(i){case As.setup:return s;case As.first:return r+(s-r)*e}return r}let n=this.getCurveValue(t);return i==As.setup?s+(n-s)*e:r+(n-r)*e}getAbsoluteValue2(t,e,i,r,s,n){if(t<this.frames[0]){switch(i){case As.setup:return s;case As.first:return r+(s-r)*e}return r}return i==As.setup?s+(n-s)*e:r+(n-r)*e}getScaleValue(t,e,i,r,s,n){if(t<this.frames[0]){switch(i){case As.setup:return n;case As.first:return s+(n-s)*e}return s}let a=this.getCurveValue(t)*n;if(1==e)return i==As.add?s+a-n:a;if(r==Ss.mixOut)switch(i){case As.setup:return n+(Math.abs(a)*fs.signum(n)-n)*e;case As.first:case As.replace:return s+(Math.abs(a)*fs.signum(s)-s)*e}else{let t=0;switch(i){case As.setup:return t=Math.abs(n)*fs.signum(a),t+(a-t)*e;case As.first:case As.replace:return t=Math.abs(s)*fs.signum(a),t+(a-t)*e}}return s+(a-n)*e}}class Ms extends Cs{constructor(t,e,i,r){super(t,e,[i,r])}getFrameEntries(){return 3}setFrame(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r}}class Es extends Is{boneIndex=0;constructor(t,e,i){super(t,e,Ts.rotate+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];o.active&&(o.rotation=this.getRelativeValue(i,s,n,o.rotation,o.data.rotation))}}class Rs extends Ms{boneIndex=0;constructor(t,e,i){super(t,e,Ts.x+"|"+i,Ts.y+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(n){case As.setup:return o.x=o.data.x,void(o.y=o.data.y);case As.first:o.x+=(o.data.x-o.x)*s,o.y+=(o.data.y-o.y)*s}return}let h=0,c=0,d=ks.search(l,i,3),u=this.curves[d/3];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(i-t)/(l[d+3]-t);h+=(l[d+3+1]-h)*e,c+=(l[d+3+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(i,d,1,u-2),c=this.getBezierValue(i,d,2,u+18-2)}switch(n){case As.setup:o.x=o.data.x+h*s,o.y=o.data.y+c*s;break;case As.first:case As.replace:o.x+=(o.data.x+h-o.x)*s,o.y+=(o.data.y+c-o.y)*s;break;case As.add:o.x+=h*s,o.y+=c*s}}}class Fs extends Is{boneIndex=0;constructor(t,e,i){super(t,e,Ts.x+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];o.active&&(o.x=this.getRelativeValue(i,s,n,o.x,o.data.x))}}class Ps extends Is{boneIndex=0;constructor(t,e,i){super(t,e,Ts.y+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];o.active&&(o.y=this.getRelativeValue(i,s,n,o.y,o.data.y))}}class Ls extends Ms{boneIndex=0;constructor(t,e,i){super(t,e,Ts.scaleX+"|"+i,Ts.scaleY+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let l,h,c=this.frames;if(i<c[0]){switch(n){case As.setup:return o.scaleX=o.data.scaleX,void(o.scaleY=o.data.scaleY);case As.first:o.scaleX+=(o.data.scaleX-o.scaleX)*s,o.scaleY+=(o.data.scaleY-o.scaleY)*s}return}let d=ks.search(c,i,3),u=this.curves[d/3];switch(u){case 0:let t=c[d];l=c[d+1],h=c[d+2];let e=(i-t)/(c[d+3]-t);l+=(c[d+3+1]-l)*e,h+=(c[d+3+2]-h)*e;break;case 1:l=c[d+1],h=c[d+2];break;default:l=this.getBezierValue(i,d,1,u-2),h=this.getBezierValue(i,d,2,u+18-2)}if(l*=o.data.scaleX,h*=o.data.scaleY,1==s)n==As.add?(o.scaleX+=l-o.data.scaleX,o.scaleY+=h-o.data.scaleY):(o.scaleX=l,o.scaleY=h);else{let t=0,e=0;if(a==Ss.mixOut)switch(n){case As.setup:t=o.data.scaleX,e=o.data.scaleY,o.scaleX=t+(Math.abs(l)*fs.signum(t)-t)*s,o.scaleY=e+(Math.abs(h)*fs.signum(e)-e)*s;break;case As.first:case As.replace:t=o.scaleX,e=o.scaleY,o.scaleX=t+(Math.abs(l)*fs.signum(t)-t)*s,o.scaleY=e+(Math.abs(h)*fs.signum(e)-e)*s;break;case As.add:o.scaleX+=(l-o.data.scaleX)*s,o.scaleY+=(h-o.data.scaleY)*s}else switch(n){case As.setup:t=Math.abs(o.data.scaleX)*fs.signum(l),e=Math.abs(o.data.scaleY)*fs.signum(h),o.scaleX=t+(l-t)*s,o.scaleY=e+(h-e)*s;break;case As.first:case As.replace:t=Math.abs(o.scaleX)*fs.signum(l),e=Math.abs(o.scaleY)*fs.signum(h),o.scaleX=t+(l-t)*s,o.scaleY=e+(h-e)*s;break;case As.add:o.scaleX+=(l-o.data.scaleX)*s,o.scaleY+=(h-o.data.scaleY)*s}}}}class Ys extends Is{boneIndex=0;constructor(t,e,i){super(t,e,Ts.scaleX+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];o.active&&(o.scaleX=this.getScaleValue(i,s,n,a,o.scaleX,o.data.scaleX))}}class Bs extends Is{boneIndex=0;constructor(t,e,i){super(t,e,Ts.scaleY+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];o.active&&(o.scaleY=this.getScaleValue(i,s,n,a,o.scaleY,o.data.scaleY))}}class Os extends Ms{boneIndex=0;constructor(t,e,i){super(t,e,Ts.shearX+"|"+i,Ts.shearY+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(n){case As.setup:return o.shearX=o.data.shearX,void(o.shearY=o.data.shearY);case As.first:o.shearX+=(o.data.shearX-o.shearX)*s,o.shearY+=(o.data.shearY-o.shearY)*s}return}let h=0,c=0,d=ks.search(l,i,3),u=this.curves[d/3];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(i-t)/(l[d+3]-t);h+=(l[d+3+1]-h)*e,c+=(l[d+3+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(i,d,1,u-2),c=this.getBezierValue(i,d,2,u+18-2)}switch(n){case As.setup:o.shearX=o.data.shearX+h*s,o.shearY=o.data.shearY+c*s;break;case As.first:case As.replace:o.shearX+=(o.data.shearX+h-o.shearX)*s,o.shearY+=(o.data.shearY+c-o.shearY)*s;break;case As.add:o.shearX+=h*s,o.shearY+=c*s}}}class Xs extends Is{boneIndex=0;constructor(t,e,i){super(t,e,Ts.shearX+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];o.active&&(o.shearX=this.getRelativeValue(i,s,n,o.shearX,o.data.shearX))}}class Ds extends Is{boneIndex=0;constructor(t,e,i){super(t,e,Ts.shearY+"|"+i),this.boneIndex=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];o.active&&(o.shearY=this.getRelativeValue(i,s,n,o.shearY,o.data.shearY))}}class Vs extends ks{boneIndex=0;constructor(t,e){super(t,[Ts.inherit+"|"+e]),this.boneIndex=e}getFrameEntries(){return 2}setFrame(t,e,i){t*=2,this.frames[t]=e,this.frames[t+1]=i}apply(t,e,i,r,s,n,a){let o=t.bones[this.boneIndex];if(!o.active)return;if(a==Ss.mixOut)return void(n==As.setup&&(o.inherit=o.data.inherit));let l=this.frames;i<l[0]?n!=As.setup&&n!=As.first||(o.inherit=o.data.inherit):o.inherit=this.frames[ks.search(l,i,2)+1]}}class Ns extends Cs{slotIndex=0;constructor(t,e,i){super(t,e,[Ts.rgb+"|"+i,Ts.alpha+"|"+i]),this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,e,i,r,s,n){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s,this.frames[t+4]=n}apply(t,e,i,r,s,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(i<l[0]){let t=o.data.color;switch(n){case As.setup:return void h.setFromColor(t);case As.first:h.add((t.r-h.r)*s,(t.g-h.g)*s,(t.b-h.b)*s,(t.a-h.a)*s)}return}let c=0,d=0,u=0,f=0,p=ks.search(l,i,5),m=this.curves[p/5];switch(m){case 0:let t=l[p];c=l[p+1],d=l[p+2],u=l[p+3],f=l[p+4];let e=(i-t)/(l[p+5]-t);c+=(l[p+5+1]-c)*e,d+=(l[p+5+2]-d)*e,u+=(l[p+5+3]-u)*e,f+=(l[p+5+4]-f)*e;break;case 1:c=l[p+1],d=l[p+2],u=l[p+3],f=l[p+4];break;default:c=this.getBezierValue(i,p,1,m-2),d=this.getBezierValue(i,p,2,m+18-2),u=this.getBezierValue(i,p,3,m+36-2),f=this.getBezierValue(i,p,4,m+54-2)}1==s?h.set(c,d,u,f):(n==As.setup&&h.setFromColor(o.data.color),h.add((c-h.r)*s,(d-h.g)*s,(u-h.b)*s,(f-h.a)*s))}}class Ws extends Cs{slotIndex=0;constructor(t,e,i){super(t,e,[Ts.rgb+"|"+i]),this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,r,s){t<<=2,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s}apply(t,e,i,r,s,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color;if(i<l[0]){let t=o.data.color;switch(n){case As.setup:return h.r=t.r,h.g=t.g,void(h.b=t.b);case As.first:h.r+=(t.r-h.r)*s,h.g+=(t.g-h.g)*s,h.b+=(t.b-h.b)*s}return}let c=0,d=0,u=0,f=ks.search(l,i,4),p=this.curves[f>>2];switch(p){case 0:let t=l[f];c=l[f+1],d=l[f+2],u=l[f+3];let e=(i-t)/(l[f+4]-t);c+=(l[f+4+1]-c)*e,d+=(l[f+4+2]-d)*e,u+=(l[f+4+3]-u)*e;break;case 1:c=l[f+1],d=l[f+2],u=l[f+3];break;default:c=this.getBezierValue(i,f,1,p-2),d=this.getBezierValue(i,f,2,p+18-2),u=this.getBezierValue(i,f,3,p+36-2)}if(1==s)h.r=c,h.g=d,h.b=u;else{if(n==As.setup){let t=o.data.color;h.r=t.r,h.g=t.g,h.b=t.b}h.r+=(c-h.r)*s,h.g+=(d-h.g)*s,h.b+=(u-h.b)*s}}}class zs extends Is{slotIndex=0;constructor(t,e,i){super(t,e,Ts.alpha+"|"+i),this.slotIndex=i}apply(t,e,i,r,s,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.color;if(i<this.frames[0]){let t=o.data.color;switch(n){case As.setup:return void(l.a=t.a);case As.first:l.a+=(t.a-l.a)*s}return}let h=this.getCurveValue(i);1==s?l.a=h:(n==As.setup&&(l.a=o.data.color.a),l.a+=(h-l.a)*s)}}class Us extends Cs{slotIndex=0;constructor(t,e,i){super(t,e,[Ts.rgb+"|"+i,Ts.alpha+"|"+i,Ts.rgb2+"|"+i]),this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,e,i,r,s,n,a,o,l){t<<=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o,this.frames[t+7]=l}apply(t,e,i,r,s,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(i<l[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case As.setup:return h.setFromColor(t),c.r=e.r,c.g=e.g,void(c.b=e.b);case As.first:h.add((t.r-h.r)*s,(t.g-h.g)*s,(t.b-h.b)*s,(t.a-h.a)*s),c.r+=(e.r-c.r)*s,c.g+=(e.g-c.g)*s,c.b+=(e.b-c.b)*s}return}let d=0,u=0,f=0,p=0,m=0,g=0,b=0,x=ks.search(l,i,8),w=this.curves[x>>3];switch(w){case 0:let t=l[x];d=l[x+1],u=l[x+2],f=l[x+3],p=l[x+4],m=l[x+5],g=l[x+6],b=l[x+7];let e=(i-t)/(l[x+8]-t);d+=(l[x+8+1]-d)*e,u+=(l[x+8+2]-u)*e,f+=(l[x+8+3]-f)*e,p+=(l[x+8+4]-p)*e,m+=(l[x+8+5]-m)*e,g+=(l[x+8+6]-g)*e,b+=(l[x+8+7]-b)*e;break;case 1:d=l[x+1],u=l[x+2],f=l[x+3],p=l[x+4],m=l[x+5],g=l[x+6],b=l[x+7];break;default:d=this.getBezierValue(i,x,1,w-2),u=this.getBezierValue(i,x,2,w+18-2),f=this.getBezierValue(i,x,3,w+36-2),p=this.getBezierValue(i,x,4,w+54-2),m=this.getBezierValue(i,x,5,w+72-2),g=this.getBezierValue(i,x,6,w+90-2),b=this.getBezierValue(i,x,7,w+108-2)}if(1==s)h.set(d,u,f,p),c.r=m,c.g=g,c.b=b;else{if(n==As.setup){h.setFromColor(o.data.color);let t=o.data.darkColor;c.r=t.r,c.g=t.g,c.b=t.b}h.add((d-h.r)*s,(u-h.g)*s,(f-h.b)*s,(p-h.a)*s),c.r+=(m-c.r)*s,c.g+=(g-c.g)*s,c.b+=(b-c.b)*s}}}class qs extends Cs{slotIndex=0;constructor(t,e,i){super(t,e,[Ts.rgb+"|"+i,Ts.rgb2+"|"+i]),this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,r,s,n,a,o){t*=7,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s,this.frames[t+4]=n,this.frames[t+5]=a,this.frames[t+6]=o}apply(t,e,i,r,s,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=this.frames,h=o.color,c=o.darkColor;if(i<l[0]){let t=o.data.color,e=o.data.darkColor;switch(n){case As.setup:return h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,void(c.b=e.b);case As.first:h.r+=(t.r-h.r)*s,h.g+=(t.g-h.g)*s,h.b+=(t.b-h.b)*s,c.r+=(e.r-c.r)*s,c.g+=(e.g-c.g)*s,c.b+=(e.b-c.b)*s}return}let d=0,u=0,f=0,p=0,m=0,g=0,b=ks.search(l,i,7),x=this.curves[b/7];switch(x){case 0:let t=l[b];d=l[b+1],u=l[b+2],f=l[b+3],p=l[b+4],m=l[b+5],g=l[b+6];let e=(i-t)/(l[b+7]-t);d+=(l[b+7+1]-d)*e,u+=(l[b+7+2]-u)*e,f+=(l[b+7+3]-f)*e,p+=(l[b+7+4]-p)*e,m+=(l[b+7+5]-m)*e,g+=(l[b+7+6]-g)*e;break;case 1:d=l[b+1],u=l[b+2],f=l[b+3],p=l[b+4],m=l[b+5],g=l[b+6];break;default:d=this.getBezierValue(i,b,1,x-2),u=this.getBezierValue(i,b,2,x+18-2),f=this.getBezierValue(i,b,3,x+36-2),p=this.getBezierValue(i,b,4,x+54-2),m=this.getBezierValue(i,b,5,x+72-2),g=this.getBezierValue(i,b,6,x+90-2)}if(1==s)h.r=d,h.g=u,h.b=f,c.r=p,c.g=m,c.b=g;else{if(n==As.setup){let t=o.data.color,e=o.data.darkColor;h.r=t.r,h.g=t.g,h.b=t.b,c.r=e.r,c.g=e.g,c.b=e.b}h.r+=(d-h.r)*s,h.g+=(u-h.g)*s,h.b+=(f-h.b)*s,c.r+=(p-c.r)*s,c.g+=(m-c.g)*s,c.b+=(g-c.b)*s}}}class Gs extends ks{slotIndex=0;attachmentNames;constructor(t,e){super(t,[Ts.attachment+"|"+e]),this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i}apply(t,e,i,r,s,n,a){let o=t.slots[this.slotIndex];o.bone.active&&(a!=Ss.mixOut?i<this.frames[0]?n!=As.setup&&n!=As.first||this.setAttachment(t,o,o.data.attachmentName):this.setAttachment(t,o,this.attachmentNames[ks.search1(this.frames,i)]):n==As.setup&&this.setAttachment(t,o,o.data.attachmentName))}setAttachment(t,e,i){e.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}class js extends Cs{slotIndex=0;attachment;vertices;constructor(t,e,i,r){super(t,e,[Ts.deform+"|"+i+"|"+r.id]),this.slotIndex=i,this.attachment=r,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.vertices[t]=i}setBezier(t,e,i,r,s,n,a,o,l,h,c){let d=this.curves,u=this.getFrameCount()+18*t;0==i&&(d[e]=2+u);let f=.03*(r-2*n+o),p=.03*l-.06*a,m=.006*(3*(n-o)-r+h),g=.018*(a-l+.33333333),b=2*f+m,x=2*p+g,w=.3*(n-r)+f+.16666667*m,y=.3*a+p+.16666667*g,v=r+w,_=y;for(let t=u+18;u<t;u+=2)d[u]=v,d[u+1]=_,w+=b,y+=x,b+=m,x+=g,v+=w,_+=y}getCurvePercent(t,e){let i=this.curves,r=i[e];switch(r){case 0:let i=this.frames[e];return(t-i)/(this.frames[e+this.getFrameEntries()]-i);case 1:return 0}if(r-=2,i[r]>t){let s=this.frames[e];return i[r+1]*(t-s)/(i[r]-s)}let s=r+18;for(r+=2;r<s;r+=2)if(i[r]>=t){let e=i[r-2],s=i[r-1];return s+(t-e)/(i[r]-e)*(i[r+1]-s)}let n=i[s-2],a=i[s-1];return a+(1-a)*(t-n)/(this.frames[e+this.getFrameEntries()]-n)}apply(t,e,i,r,s,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.getAttachment();if(!l)return;if(!(l instanceof xs)||l.timelineAttachment!=this.attachment)return;let h=o.deform;0==h.length&&(n=As.setup);let c=this.vertices,d=c[0].length,u=this.frames;if(i<u[0]){switch(n){case As.setup:return void(h.length=0);case As.first:if(1==s)return void(h.length=0);h.length=d;let t=l;if(t.bones)for(s=1-s,f=0;f<d;f++)h[f]*=s;else{let e=t.vertices;for(var f=0;f<d;f++)h[f]+=(e[f]-h[f])*s}}return}if(h.length=d,i>=u[u.length-1]){let t=c[u.length-1];if(1==s)if(n==As.add){let e=l;if(e.bones)for(let e=0;e<d;e++)h[e]+=t[e];else{let i=e.vertices;for(let e=0;e<d;e++)h[e]+=t[e]-i[e]}}else ps.arrayCopy(t,0,h,0,d);else switch(n){case As.setup:{let e=l;if(e.bones)for(let e=0;e<d;e++)h[e]=t[e]*s;else{let i=e.vertices;for(let e=0;e<d;e++){let r=i[e];h[e]=r+(t[e]-r)*s}}break}case As.first:case As.replace:for(let e=0;e<d;e++)h[e]+=(t[e]-h[e])*s;break;case As.add:let e=l;if(e.bones)for(let e=0;e<d;e++)h[e]+=t[e]*s;else{let i=e.vertices;for(let e=0;e<d;e++)h[e]+=(t[e]-i[e])*s}}return}let p=ks.search1(u,i),m=this.getCurvePercent(i,p),g=c[p],b=c[p+1];if(1==s)if(n==As.add){let t=l;if(t.bones)for(let t=0;t<d;t++){let e=g[t];h[t]+=e+(b[t]-e)*m}else{let e=t.vertices;for(let t=0;t<d;t++){let i=g[t];h[t]+=i+(b[t]-i)*m-e[t]}}}else for(let t=0;t<d;t++){let e=g[t];h[t]=e+(b[t]-e)*m}else switch(n){case As.setup:{let t=l;if(t.bones)for(let t=0;t<d;t++){let e=g[t];h[t]=(e+(b[t]-e)*m)*s}else{let e=t.vertices;for(let t=0;t<d;t++){let i=g[t],r=e[t];h[t]=r+(i+(b[t]-i)*m-r)*s}}break}case As.first:case As.replace:for(let t=0;t<d;t++){let e=g[t];h[t]+=(e+(b[t]-e)*m-h[t])*s}break;case As.add:let t=l;if(t.bones)for(let t=0;t<d;t++){let e=g[t];h[t]+=(e+(b[t]-e)*m)*s}else{let e=t.vertices;for(let t=0;t<d;t++){let i=g[t];h[t]+=(i+(b[t]-i)*m-e[t])*s}}}}}class Hs extends ks{static propertyIds=[""+Ts.event];events;constructor(t){super(t,Hs.propertyIds),this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,i,r,s,n,a){if(!r)return;let o=this.frames,l=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,r,s,n,a),e=-1;else if(e>=o[l-1])return;if(i<o[0])return;let h=0;if(e<o[0])h=0;else{h=ks.search1(o,e)+1;let t=o[h];for(;h>0&&o[h-1]==t;)h--}for(;h<l&&i>=o[h];h++)r.push(this.events[h])}}class $s extends ks{static propertyIds=[""+Ts.drawOrder];drawOrders;constructor(t){super(t,$s.propertyIds),this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,i){this.frames[t]=e,this.drawOrders[t]=i}apply(t,e,i,r,s,n,a){if(a==Ss.mixOut)return void(n==As.setup&&ps.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));if(i<this.frames[0])return void(n!=As.setup&&n!=As.first||ps.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length));let o=ks.search1(this.frames,i),l=this.drawOrders[o];if(l){let e=t.drawOrder,i=t.slots;for(let t=0,r=l.length;t<r;t++)e[t]=i[l[t]]}else ps.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}}class Ks extends Cs{constraintIndex=0;constructor(t,e,i){super(t,e,[Ts.ikConstraint+"|"+i]),this.constraintIndex=i}getFrameEntries(){return 6}setFrame(t,e,i,r,s,n,a){t*=6,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=s,this.frames[t+4]=n?1:0,this.frames[t+5]=a?1:0}apply(t,e,i,r,s,n,a){let o=t.ikConstraints[this.constraintIndex];if(!o.active)return;let l=this.frames;if(i<l[0]){switch(n){case As.setup:return o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,void(o.stretch=o.data.stretch);case As.first:o.mix+=(o.data.mix-o.mix)*s,o.softness+=(o.data.softness-o.softness)*s,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}return}let h=0,c=0,d=ks.search(l,i,6),u=this.curves[d/6];switch(u){case 0:let t=l[d];h=l[d+1],c=l[d+2];let e=(i-t)/(l[d+6]-t);h+=(l[d+6+1]-h)*e,c+=(l[d+6+2]-c)*e;break;case 1:h=l[d+1],c=l[d+2];break;default:h=this.getBezierValue(i,d,1,u-2),c=this.getBezierValue(i,d,2,u+18-2)}n==As.setup?(o.mix=o.data.mix+(h-o.data.mix)*s,o.softness=o.data.softness+(c-o.data.softness)*s,a==Ss.mixOut?(o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch):(o.bendDirection=l[d+3],o.compress=0!=l[d+4],o.stretch=0!=l[d+5])):(o.mix+=(h-o.mix)*s,o.softness+=(c-o.softness)*s,a==Ss.mixIn&&(o.bendDirection=l[d+3],o.compress=0!=l[d+4],o.stretch=0!=l[d+5]))}}class Js extends Cs{constraintIndex=0;constructor(t,e,i){super(t,e,[Ts.transformConstraint+"|"+i]),this.constraintIndex=i}getFrameEntries(){return 7}setFrame(t,e,i,r,s,n,a,o){let l=this.frames;l[t*=7]=e,l[t+1]=i,l[t+2]=r,l[t+3]=s,l[t+4]=n,l[t+5]=a,l[t+6]=o}apply(t,e,i,r,s,n,a){let o=t.transformConstraints[this.constraintIndex];if(!o.active)return;let l,h,c,d,u,f,p=this.frames;if(i<p[0]){let t=o.data;switch(n){case As.setup:return o.mixRotate=t.mixRotate,o.mixX=t.mixX,o.mixY=t.mixY,o.mixScaleX=t.mixScaleX,o.mixScaleY=t.mixScaleY,void(o.mixShearY=t.mixShearY);case As.first:o.mixRotate+=(t.mixRotate-o.mixRotate)*s,o.mixX+=(t.mixX-o.mixX)*s,o.mixY+=(t.mixY-o.mixY)*s,o.mixScaleX+=(t.mixScaleX-o.mixScaleX)*s,o.mixScaleY+=(t.mixScaleY-o.mixScaleY)*s,o.mixShearY+=(t.mixShearY-o.mixShearY)*s}return}let m=ks.search(p,i,7),g=this.curves[m/7];switch(g){case 0:let t=p[m];l=p[m+1],h=p[m+2],c=p[m+3],d=p[m+4],u=p[m+5],f=p[m+6];let e=(i-t)/(p[m+7]-t);l+=(p[m+7+1]-l)*e,h+=(p[m+7+2]-h)*e,c+=(p[m+7+3]-c)*e,d+=(p[m+7+4]-d)*e,u+=(p[m+7+5]-u)*e,f+=(p[m+7+6]-f)*e;break;case 1:l=p[m+1],h=p[m+2],c=p[m+3],d=p[m+4],u=p[m+5],f=p[m+6];break;default:l=this.getBezierValue(i,m,1,g-2),h=this.getBezierValue(i,m,2,g+18-2),c=this.getBezierValue(i,m,3,g+36-2),d=this.getBezierValue(i,m,4,g+54-2),u=this.getBezierValue(i,m,5,g+72-2),f=this.getBezierValue(i,m,6,g+90-2)}if(n==As.setup){let t=o.data;o.mixRotate=t.mixRotate+(l-t.mixRotate)*s,o.mixX=t.mixX+(h-t.mixX)*s,o.mixY=t.mixY+(c-t.mixY)*s,o.mixScaleX=t.mixScaleX+(d-t.mixScaleX)*s,o.mixScaleY=t.mixScaleY+(u-t.mixScaleY)*s,o.mixShearY=t.mixShearY+(f-t.mixShearY)*s}else o.mixRotate+=(l-o.mixRotate)*s,o.mixX+=(h-o.mixX)*s,o.mixY+=(c-o.mixY)*s,o.mixScaleX+=(d-o.mixScaleX)*s,o.mixScaleY+=(u-o.mixScaleY)*s,o.mixShearY+=(f-o.mixShearY)*s}}class Qs extends Is{constraintIndex=0;constructor(t,e,i){super(t,e,Ts.pathConstraintPosition+"|"+i),this.constraintIndex=i}apply(t,e,i,r,s,n,a){let o=t.pathConstraints[this.constraintIndex];o.active&&(o.position=this.getAbsoluteValue(i,s,n,o.position,o.data.position))}}class Zs extends Is{constraintIndex=0;constructor(t,e,i){super(t,e,Ts.pathConstraintSpacing+"|"+i),this.constraintIndex=i}apply(t,e,i,r,s,n,a){let o=t.pathConstraints[this.constraintIndex];o.active&&(o.spacing=this.getAbsoluteValue(i,s,n,o.spacing,o.data.spacing))}}class tn extends Cs{constraintIndex=0;constructor(t,e,i){super(t,e,[Ts.pathConstraintMix+"|"+i]),this.constraintIndex=i}getFrameEntries(){return 4}setFrame(t,e,i,r,s){let n=this.frames;n[t<<=2]=e,n[t+1]=i,n[t+2]=r,n[t+3]=s}apply(t,e,i,r,s,n,a){let o=t.pathConstraints[this.constraintIndex];if(!o.active)return;let l,h,c,d=this.frames;if(i<d[0]){switch(n){case As.setup:return o.mixRotate=o.data.mixRotate,o.mixX=o.data.mixX,void(o.mixY=o.data.mixY);case As.first:o.mixRotate+=(o.data.mixRotate-o.mixRotate)*s,o.mixX+=(o.data.mixX-o.mixX)*s,o.mixY+=(o.data.mixY-o.mixY)*s}return}let u=ks.search(d,i,4),f=this.curves[u>>2];switch(f){case 0:let t=d[u];l=d[u+1],h=d[u+2],c=d[u+3];let e=(i-t)/(d[u+4]-t);l+=(d[u+4+1]-l)*e,h+=(d[u+4+2]-h)*e,c+=(d[u+4+3]-c)*e;break;case 1:l=d[u+1],h=d[u+2],c=d[u+3];break;default:l=this.getBezierValue(i,u,1,f-2),h=this.getBezierValue(i,u,2,f+18-2),c=this.getBezierValue(i,u,3,f+36-2)}if(n==As.setup){let t=o.data;o.mixRotate=t.mixRotate+(l-t.mixRotate)*s,o.mixX=t.mixX+(h-t.mixX)*s,o.mixY=t.mixY+(c-t.mixY)*s}else o.mixRotate+=(l-o.mixRotate)*s,o.mixX+=(h-o.mixX)*s,o.mixY+=(c-o.mixY)*s}}class en extends Is{constraintIndex=0;constructor(t,e,i,r){super(t,e,r+"|"+i),this.constraintIndex=i}apply(t,e,i,r,s,n,a){let o;if(-1==this.constraintIndex){const e=i>=this.frames[0]?this.getCurveValue(i):0;for(const r of t.physicsConstraints)r.active&&this.global(r.data)&&this.set(r,this.getAbsoluteValue2(i,s,n,this.get(r),this.setup(r),e))}else o=t.physicsConstraints[this.constraintIndex],o.active&&this.set(o,this.getAbsoluteValue(i,s,n,this.get(o),this.setup(o)))}}class rn extends en{constructor(t,e,i){super(t,e,i,Ts.physicsConstraintInertia)}setup(t){return t.data.inertia}get(t){return t.inertia}set(t,e){t.inertia=e}global(t){return t.inertiaGlobal}}class sn extends en{constructor(t,e,i){super(t,e,i,Ts.physicsConstraintStrength)}setup(t){return t.data.strength}get(t){return t.strength}set(t,e){t.strength=e}global(t){return t.strengthGlobal}}class nn extends en{constructor(t,e,i){super(t,e,i,Ts.physicsConstraintDamping)}setup(t){return t.data.damping}get(t){return t.damping}set(t,e){t.damping=e}global(t){return t.dampingGlobal}}class an extends en{constructor(t,e,i){super(t,e,i,Ts.physicsConstraintMass)}setup(t){return 1/t.data.massInverse}get(t){return 1/t.massInverse}set(t,e){t.massInverse=1/e}global(t){return t.massGlobal}}class on extends en{constructor(t,e,i){super(t,e,i,Ts.physicsConstraintWind)}setup(t){return t.data.wind}get(t){return t.wind}set(t,e){t.wind=e}global(t){return t.windGlobal}}class ln extends en{constructor(t,e,i){super(t,e,i,Ts.physicsConstraintGravity)}setup(t){return t.data.gravity}get(t){return t.gravity}set(t,e){t.gravity=e}global(t){return t.gravityGlobal}}class hn extends en{constructor(t,e,i){super(t,e,i,Ts.physicsConstraintMix)}setup(t){return t.data.mix}get(t){return t.mix}set(t,e){t.mix=e}global(t){return t.mixGlobal}}class cn extends ks{static propertyIds=[Ts.physicsConstraintReset.toString()];constraintIndex;constructor(t,e){super(t,cn.propertyIds),this.constraintIndex=e}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e}apply(t,e,i,r,s,n,a){let o;if(-1!=this.constraintIndex&&(o=t.physicsConstraints[this.constraintIndex],!o.active))return;const l=this.frames;if(e>i)this.apply(t,e,Number.MAX_VALUE,[],s,n,a),e=-1;else if(e>=l[l.length-1])return;if(!(i<l[0])&&(e<l[0]||i>=l[ks.search1(l,e)+1]))if(null!=o)o.reset();else for(const e of t.physicsConstraints)e.active&&e.reset()}}class dn extends ks{static ENTRIES=3;static MODE=1;static DELAY=2;slotIndex;attachment;constructor(t,e,i){super(t,[Ts.sequence+"|"+e+"|"+i.sequence.id]),this.slotIndex=e,this.attachment=i}getFrameEntries(){return dn.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,e,i,r,s){let n=this.frames;n[t*=dn.ENTRIES]=e,n[t+dn.MODE]=i|r<<4,n[t+dn.DELAY]=s}apply(t,e,i,r,s,n,a){let o=t.slots[this.slotIndex];if(!o.bone.active)return;let l=o.attachment,h=this.attachment;if(!(l==h||l instanceof xs&&l.timelineAttachment==h))return;if(a==Ss.mixOut)return void(n==As.setup&&(o.sequenceIndex=-1));let c=this.frames;if(i<c[0])return void(n!=As.setup&&n!=As.first||(o.sequenceIndex=-1));let d=ks.search(c,i,dn.ENTRIES),u=c[d],f=c[d+dn.MODE],p=c[d+dn.DELAY];if(!this.attachment.sequence)return;let m=f>>4,g=this.attachment.sequence.regions.length,b=vs[15&f];if(b!=ys.hold)switch(m+=(i-u)/p+1e-5|0,b){case ys.once:m=Math.min(g-1,m);break;case ys.loop:m%=g;break;case ys.pingpong:{let t=(g<<1)-2;m=0==t?0:m%t,m>=g&&(m=t-m);break}case ys.onceReverse:m=Math.max(g-1-m,0);break;case ys.loopReverse:m=g-1-m%g;break;case ys.pingpongReverse:{let t=(g<<1)-2;m=0==t?0:(m+g-1)%t,m>=g&&(m=t-m)}}o.sequenceIndex=m}}class un{static _emptyAnimation=new _s("<empty>",[],0);static emptyAnimation(){return un._emptyAnimation}data;tracks=new Array;timeScale=1;unkeyedState=0;events=new Array;listeners=new Array;queue=new pn(this);propertyIDs=new ds;animationsChanged=!1;trackEntryPool=new ms(()=>new fn);constructor(t){this.data=t}update(t){t*=this.timeScale;let e=this.tracks;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(!r)continue;r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;let s=t*r.timeScale;if(r.delay>0){if(r.delay-=s,r.delay>0)continue;s=-r.delay,r.delay=0}let n=r.next;if(n){let e=r.trackLast-n.delay;if(e>=0){for(n.delay=0,n.trackTime+=0==r.timeScale?0:(e/r.timeScale+t)*n.timeScale,r.trackTime+=s,this.setCurrent(i,n,!0);n.mixingFrom;)n.mixTime+=t,n=n.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&!r.mixingFrom){e[i]=null,this.queue.end(r),this.clearNext(r);continue}if(r.mixingFrom&&this.updateMixingFrom(r,t)){let t=r.mixingFrom;for(r.mixingFrom=null,t&&(t.mixingTo=null);t;)this.queue.end(t),t=t.mixingFrom}r.trackTime+=s}this.queue.drain()}updateMixingFrom(t,e){let i=t.mixingFrom;if(!i)return!0;let r=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,-1!=t.nextTrackLast&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),r):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)}apply(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let e=this.events,i=this.tracks,r=!1;for(let n=0,a=i.length;n<a;n++){let a=i[n];if(!a||a.delay>0)continue;r=!0;let o=0==n?As.first:a.mixBlend,l=a.alpha;a.mixingFrom?l*=this.applyMixingFrom(a,t,o):a.trackTime>=a.trackEnd&&!a.next&&(l=0);let h=l>=a.alphaAttachmentThreshold,c=a.animationLast,d=a.getAnimationTime(),u=d,f=e;a.reverse&&(u=a.animation.duration-u,f=null);let p=a.animation.timelines,m=p.length;if(0==n&&1==l||o==As.add){0==n&&(h=!0);for(let e=0;e<m;e++){ps.webkit602BugfixHelper(l,o);var s=p[e];s instanceof Gs?this.applyAttachmentTimeline(s,t,u,o,h):s.apply(t,c,u,f,l,o,Ss.mixIn)}}else{let e=a.timelineMode,i=a.shortestRotation,r=!i&&a.timelinesRotation.length!=m<<1;r&&(a.timelinesRotation.length=m<<1);for(let s=0;s<m;s++){let n=p[s],d=e[s]==gn?o:As.setup;!i&&n instanceof Es?this.applyRotateTimeline(n,t,u,l,d,a.timelinesRotation,s<<1,r):n instanceof Gs?this.applyAttachmentTimeline(n,t,u,o,h):(ps.webkit602BugfixHelper(l,o),n.apply(t,c,u,f,l,d,Ss.mixIn))}}this.queueEvents(a,d),e.length=0,a.nextAnimationLast=d,a.nextTrackLast=a.trackTime}for(var n=this.unkeyedState+vn,a=t.slots,o=0,l=t.slots.length;o<l;o++){var h=a[o];if(h.attachmentState==n){var c=h.data.attachmentName;h.setAttachment(c?t.getAttachment(h.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),r}applyMixingFrom(t,e,i){let r=t.mixingFrom;r.mixingFrom&&this.applyMixingFrom(r,e,i);let s=0;0==t.mixDuration?(s=1,i==As.first&&(i=As.setup)):(s=t.mixTime/t.mixDuration,s>1&&(s=1),i!=As.first&&(i=r.mixBlend));let n=s<r.mixAttachmentThreshold,a=s<r.mixDrawOrderThreshold,o=r.animation.timelines,l=o.length,h=r.alpha*t.interruptAlpha,c=h*(1-s),d=r.animationLast,u=r.getAnimationTime(),f=u,p=null;if(r.reverse?f=r.animation.duration-f:s<r.eventThreshold&&(p=this.events),i==As.add)for(let t=0;t<l;t++)o[t].apply(e,d,f,p,c,i,Ss.mixOut);else{let t=r.timelineMode,s=r.timelineHoldMix,u=r.shortestRotation,m=!u&&r.timelinesRotation.length!=l<<1;m&&(r.timelinesRotation.length=l<<1),r.totalAlpha=0;for(let g=0;g<l;g++){let l,b=o[g],x=Ss.mixOut,w=0;switch(t[g]){case gn:if(!a&&b instanceof $s)continue;l=i,w=c;break;case bn:l=As.setup,w=c;break;case xn:l=i,w=h;break;case wn:l=As.setup,w=h;break;default:l=As.setup;let t=s[g];w=h*Math.max(0,1-t.mixTime/t.mixDuration)}r.totalAlpha+=w,!u&&b instanceof Es?this.applyRotateTimeline(b,e,f,w,l,r.timelinesRotation,g<<1,m):b instanceof Gs?this.applyAttachmentTimeline(b,e,f,l,n&&w>=r.alphaAttachmentThreshold):(ps.webkit602BugfixHelper(w,i),a&&b instanceof $s&&l==As.setup&&(x=Ss.mixIn),b.apply(e,d,f,p,w,l,x))}}return t.mixDuration>0&&this.queueEvents(r,u),this.events.length=0,r.nextAnimationLast=u,r.nextTrackLast=r.trackTime,s}applyAttachmentTimeline(t,e,i,r,s){var n=e.slots[t.slotIndex];n.bone.active&&(i<t.frames[0]?r!=As.setup&&r!=As.first||this.setAttachment(e,n,n.data.attachmentName,s):this.setAttachment(e,n,t.attachmentNames[ks.search1(t.frames,i)],s),n.attachmentState<=this.unkeyedState&&(n.attachmentState=this.unkeyedState+vn))}setAttachment(t,e,i,r){e.setAttachment(i?t.getAttachment(e.data.index,i):null),r&&(e.attachmentState=this.unkeyedState+_n)}applyRotateTimeline(t,e,i,r,s,n,a,o){if(o&&(n[a]=0),1==r)return void t.apply(e,0,i,null,1,s,Ss.mixIn);let l=e.bones[t.boneIndex];if(!l.active)return;let h=0,c=0;if(i<t.frames[0])switch(s){case As.setup:l.rotation=l.data.rotation;default:return;case As.first:h=l.rotation,c=l.data.rotation}else h=s==As.setup?l.data.rotation:l.rotation,c=l.data.rotation+t.getCurveValue(i);let d=0,u=c-h;if(u-=360*Math.ceil(u/360-.5),0==u)d=n[a];else{let t=0,e=0;o?(t=0,e=u):(t=n[a],e=n[a+1]);let i=t-t%360;d=u+i;let r=u>=0,s=t>=0;Math.abs(e)<=90&&fs.signum(e)!=fs.signum(u)&&(Math.abs(t-i)>180?(d+=360*fs.signum(t),s=r):0!=i?d-=360*fs.signum(t):s=r),s!=r&&(d+=360*fs.signum(t)),n[a]=d}n[a+1]=u,l.rotation=h+d*r}queueEvents(t,e){let i=t.animationStart,r=t.animationEnd,s=r-i,n=t.trackLast%s,a=this.events,o=0,l=a.length;for(;o<l;o++){let e=a[o];if(e.time<n)break;e.time>r||this.queue.event(t,e)}let h=!1;if(t.loop)if(0==s)h=!0;else{const e=Math.floor(t.trackTime/s);h=e>0&&e>Math.floor(t.trackLast/s)}else h=e>=r&&t.animationLast<r;for(h&&this.queue.complete(t);o<l;o++){let e=a[o];e.time<i||this.queue.event(t,e)}}clearTracks(){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;let e=this.tracks[t];if(!e)return;this.queue.end(e),this.clearNext(e);let i=e;for(;;){let t=i.mixingFrom;if(!t)break;this.queue.end(t),i.mixingFrom=null,i.mixingTo=null,i=t}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,i){let r=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,r&&(i&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,i=!1){let r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,i)}setAnimationWith(t,e,i=!1){if(!e)throw new Error("animation cannot be null.");let r=!0,s=this.expandToIndex(t);s&&(-1==s.nextTrackLast?(this.tracks[t]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.clearNext(s),s=s.mixingFrom,r=!1):this.clearNext(s));let n=this.trackEntry(t,e,i,s);return this.setCurrent(t,n,r),this.queue.drain(),n}addAnimation(t,e,i=!1,r=0){let s=this.data.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,s,i,r)}addAnimationWith(t,e,i=!1,r=0){if(!e)throw new Error("animation cannot be null.");let s=this.expandToIndex(t);if(s)for(;s.next;)s=s.next;let n=this.trackEntry(t,e,i,s);return s?(s.next=n,n.previous=s,r<=0&&(r+=s.getTrackComplete()-n.mixDuration)):(this.setCurrent(t,n,!0),this.queue.drain()),n.delay=r,n}setEmptyAnimation(t,e=0){let i=this.setAnimationWith(t,un.emptyAnimation(),!1);return i.mixDuration=e,i.trackEnd=e,i}addEmptyAnimation(t,e=0,i=0){let r=this.addAnimationWith(t,un.emptyAnimation(),!1,i);return i<=0&&(r.delay+=r.mixDuration-e),r.mixDuration=e,r.trackEnd=e,r}setEmptyAnimations(t=0){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,i=this.tracks.length;e<i;e++){let i=this.tracks[e];i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(ps.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,i,r){let s=this.trackEntryPool.obtain();return s.reset(),s.trackIndex=t,s.animation=e,s.loop=i,s.holdPrevious=!1,s.reverse=!1,s.shortestRotation=!1,s.eventThreshold=0,s.alphaAttachmentThreshold=0,s.mixAttachmentThreshold=0,s.mixDrawOrderThreshold=0,s.animationStart=0,s.animationEnd=e.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.mixTime=0,s.mixDuration=r?this.data.getMix(r.animation,e):0,s.interruptAlpha=1,s.totalAlpha=0,s.mixBlend=As.replace,s}clearNext(t){let e=t.next;for(;e;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let t=this.tracks;for(let e=0,i=t.length;e<i;e++){let i=t[e];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do{i.mixingTo&&i.mixBlend==As.add||this.computeHold(i),i=i.mixingTo}while(i)}}}computeHold(t){let e=t.mixingTo,i=t.animation.timelines,r=t.animation.timelines.length,s=t.timelineMode;s.length=r;let n=t.timelineHoldMix;n.length=0;let a=this.propertyIDs;if(e&&e.holdPrevious)for(let t=0;t<r;t++)s[t]=a.addAll(i[t].getPropertyIds())?wn:xn;else t:for(let o=0;o<r;o++){let r=i[o],l=r.getPropertyIds();if(a.addAll(l))if(!e||r instanceof Gs||r instanceof $s||r instanceof Hs||!e.animation.hasTimeline(l))s[o]=bn;else{for(let i=e.mixingTo;i;i=i.mixingTo)if(!i.animation.hasTimeline(l)){if(t.mixDuration>0){s[o]=yn,n[o]=i;continue t}break}s[o]=wn}else s[o]=gn}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){let e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}}class fn{animation=null;previous=null;next=null;mixingFrom=null;mixingTo=null;listener=null;trackIndex=0;loop=!1;holdPrevious=!1;reverse=!1;shortestRotation=!1;eventThreshold=0;mixAttachmentThreshold=0;alphaAttachmentThreshold=0;mixDrawOrderThreshold=0;animationStart=0;animationEnd=0;animationLast=0;nextAnimationLast=0;delay=0;trackTime=0;trackLast=0;nextTrackLast=0;trackEnd=0;timeScale=0;alpha=0;mixTime=0;_mixDuration=0;interruptAlpha=0;totalAlpha=0;get mixDuration(){return this._mixDuration}set mixDuration(t){this._mixDuration=t}setMixDurationWithDelay(t,e){this._mixDuration=t,null!=this.previous&&e<=0&&(e+=this.previous.getTrackComplete()-t),this.delay=e}mixBlend=As.replace;timelineMode=new Array;timelineHoldMix=new Array;timelinesRotation=new Array;reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime}wasApplied(){return-1!=this.nextTrackLast}isNextReady(){return null!=this.next&&this.nextTrackLast-this.next.delay>=0}}class pn{objects=[];drainDisabled=!1;animState;constructor(t){this.animState=t}start(t){this.objects.push(mn.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(mn.interrupt),this.objects.push(t)}end(t){this.objects.push(mn.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(mn.dispose),this.objects.push(t)}complete(t){this.objects.push(mn.complete),this.objects.push(t)}event(t,e){this.objects.push(mn.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let t=this.objects,e=this.animState.listeners;for(let i=0;i<t.length;i+=2){let r=t[i],s=t[i+1];switch(r){case mn.start:s.listener&&s.listener.start&&s.listener.start(s);for(let t=0;t<e.length;t++){let i=e[t];i.start&&i.start(s)}break;case mn.interrupt:s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(let t=0;t<e.length;t++){let i=e[t];i.interrupt&&i.interrupt(s)}break;case mn.end:s.listener&&s.listener.end&&s.listener.end(s);for(let t=0;t<e.length;t++){let i=e[t];i.end&&i.end(s)}case mn.dispose:s.listener&&s.listener.dispose&&s.listener.dispose(s);for(let t=0;t<e.length;t++){let i=e[t];i.dispose&&i.dispose(s)}this.animState.trackEntryPool.free(s);break;case mn.complete:s.listener&&s.listener.complete&&s.listener.complete(s);for(let t=0;t<e.length;t++){let i=e[t];i.complete&&i.complete(s)}break;case mn.event:let r=t[2+i++];s.listener&&s.listener.event&&s.listener.event(s,r);for(let t=0;t<e.length;t++){let i=e[t];i.event&&i.event(s,r)}}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var mn;!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(mn||(mn={}));const gn=0,bn=1,xn=2,wn=3,yn=4,vn=1,_n=2;class An{skeletonData;animationToMixTime={};defaultMix=0;constructor(t){if(!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,i){let r=this.skeletonData.findAnimation(t);if(!r)throw new Error("Animation not found: "+t);let s=this.skeletonData.findAnimation(e);if(!s)throw new Error("Animation not found: "+e);this.setMixWith(r,s,i)}setMixWith(t,e,i){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");let r=t.name+"."+e.name;this.animationToMixTime[r]=i}getMix(t,e){let i=t.name+"."+e.name,r=this.animationToMixTime[i];return void 0===r?this.defaultMix:r}}class Sn extends xs{color=new us(1,1,1,1);constructor(t){super(t)}copy(){let t=new Sn(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Tn extends xs{endSlot=null;color=new us(.2275,.2275,.8078,1);constructor(t){super(t)}copy(){let t=new Tn(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class kn{_image;constructor(t){this._image=t}getImage(){return this._image}}var Cn,In,Mn,En,Rn,Fn,Pn,Ln,Yn,Bn,On;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(Cn||(Cn={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(In||(In={}));class Xn{texture;u=0;v=0;u2=0;v2=0;width=0;height=0;degrees=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0}class Dn{pages=new Array;regions=new Array;constructor(t){let e=new Vn(t),i=new Array(4),r={size:t=>{t.width=parseInt(i[1]),t.height=parseInt(i[2])},format:()=>{},filter:t=>{t.minFilter=ps.enumValue(Cn,i[1]),t.magFilter=ps.enumValue(Cn,i[2])},repeat:t=>{-1!=i[1].indexOf("x")&&(t.uWrap=In.Repeat),-1!=i[1].indexOf("y")&&(t.vWrap=In.Repeat)},pma:t=>{t.pma="true"==i[1]}};var s={xy:t=>{t.x=parseInt(i[1]),t.y=parseInt(i[2])},size:t=>{t.width=parseInt(i[1]),t.height=parseInt(i[2])},bounds:t=>{t.x=parseInt(i[1]),t.y=parseInt(i[2]),t.width=parseInt(i[3]),t.height=parseInt(i[4])},offset:t=>{t.offsetX=parseInt(i[1]),t.offsetY=parseInt(i[2])},orig:t=>{t.originalWidth=parseInt(i[1]),t.originalHeight=parseInt(i[2])},offsets:t=>{t.offsetX=parseInt(i[1]),t.offsetY=parseInt(i[2]),t.originalWidth=parseInt(i[3]),t.originalHeight=parseInt(i[4])},rotate:t=>{let e=i[1];"true"==e?t.degrees=90:"false"!=e&&(t.degrees=parseInt(e))},index:t=>{t.index=parseInt(i[1])}};let n=e.readLine();for(;n&&0==n.trim().length;)n=e.readLine();for(;n&&0!=n.trim().length&&0!=e.readEntry(i,n);)n=e.readLine();let a=null,o=null,l=null;for(;null!==n;)if(0==n.trim().length)a=null,n=e.readLine();else if(a){let t=new Wn(a,n);for(;;){let r=e.readEntry(i,n=e.readLine());if(0==r)break;let a=s[i[0]];if(a)a(t);else{o||(o=[]),l||(l=[]),o.push(i[0]);let t=[];for(let e=0;e<r;e++)t.push(parseInt(i[e+1]));l.push(t)}}0==t.originalWidth&&0==t.originalHeight&&(t.originalWidth=t.width,t.originalHeight=t.height),o&&o.length>0&&l&&l.length>0&&(t.names=o,t.values=l,o=null,l=null),t.u=t.x/a.width,t.v=t.y/a.height,90==t.degrees?(t.u2=(t.x+t.height)/a.width,t.v2=(t.y+t.width)/a.height):(t.u2=(t.x+t.width)/a.width,t.v2=(t.y+t.height)/a.height),this.regions.push(t)}else{for(a=new Nn(n.trim());0!=e.readEntry(i,n=e.readLine());){let t=r[i[0]];t&&t(a)}this.pages.push(a)}}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}setTextures(t,e=""){for(let i of this.pages)i.setTexture(t.get(e+i.name))}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].texture?.dispose()}}class Vn{lines;index=0;constructor(t){this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(!e)return 0;if(0==(e=e.trim()).length)return 0;let i=e.indexOf(":");if(-1==i)return 0;t[0]=e.substr(0,i).trim();for(let r=1,s=i+1;;r++){let i=e.indexOf(",",s);if(-1==i)return t[r]=e.substr(s).trim(),r;if(t[r]=e.substr(s,i-s).trim(),s=i+1,4==r)return 4}}}class Nn{name;minFilter=Cn.Nearest;magFilter=Cn.Nearest;uWrap=In.ClampToEdge;vWrap=In.ClampToEdge;texture=null;width=0;height=0;pma=!1;regions=new Array;constructor(t){this.name=t}setTexture(t){this.texture=t,t.setFilters(this.minFilter,this.magFilter),t.setWraps(this.uWrap,this.vWrap);for(let e of this.regions)e.texture=t}}class Wn extends Xn{page;name;x=0;y=0;offsetX=0;offsetY=0;originalWidth=0;originalHeight=0;index=0;degrees=0;names=null;values=null;constructor(t,e){super(),this.page=t,this.name=e,t.regions.push(this)}}class zn extends xs{region=null;path;regionUVs=[];uvs=[];triangles=[];color=new us(1,1,1,1);width=0;height=0;hullLength=0;edges=[];parentMesh=null;sequence=null;tempColor=new us(0,0,0,0);constructor(t,e){super(t),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;this.uvs&&this.uvs.length==t.length||(this.uvs=ps.newFloatArray(t.length));let e=this.uvs,i=this.uvs.length,r=this.region.u,s=this.region.v,n=0,a=0;if(this.region instanceof Wn){let o=this.region,l=o.page,h=l.width,c=l.height;switch(o.degrees){case 90:r-=(o.originalHeight-o.offsetY-o.height)/h,s-=(o.originalWidth-o.offsetX-o.width)/c,n=o.originalHeight/h,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=r+t[o+1]*n,e[o+1]=s+(1-t[o])*a;return;case 180:r-=(o.originalWidth-o.offsetX-o.width)/h,s-=o.offsetY/c,n=o.originalWidth/h,a=o.originalHeight/c;for(let o=0;o<i;o+=2)e[o]=r+(1-t[o])*n,e[o+1]=s+(1-t[o+1])*a;return;case 270:r-=o.offsetY/h,s-=o.offsetX/c,n=o.originalHeight/h,a=o.originalWidth/c;for(let o=0;o<i;o+=2)e[o]=r+(1-t[o+1])*n,e[o+1]=s+t[o]*a;return}r-=o.offsetX/h,s-=(o.originalHeight-o.offsetY-o.height)/c,n=o.originalWidth/h,a=o.originalHeight/c}else this.region?(n=this.region.u2-r,a=this.region.v2-s):(r=s=0,n=a=1);for(let o=0;o<i;o+=2)e[o]=r+t[o]*n,e[o+1]=s+t[o+1]*a}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new zn(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),ps.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),ps.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),ps.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),ps.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,i,r,s,n){null!=this.sequence&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,i,r,s,n)}newLinkedMesh(){let t=new zn(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),null!=t.region&&t.updateRegion(),t}}class Un extends xs{lengths=[];closed=!1;constantSpeed=!1;color=new us(1,1,1,1);constructor(t){super(t)}copy(){let t=new Un(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),ps.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class qn extends xs{x=0;y=0;rotation=0;color=new us(.38,.94,0,1);constructor(t){super(t)}computeWorldPosition(t,e){return e.x=this.x*t.a+this.y*t.b+t.worldX,e.y=this.x*t.c+this.y*t.d+t.worldY,e}computeWorldRotation(t){const e=this.rotation*fs.degRad,i=Math.cos(e),r=Math.sin(e),s=i*t.a+r*t.b,n=i*t.c+r*t.d;return fs.atan2Deg(n,s)}copy(){let t=new qn(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}class Gn extends bs{x=0;y=0;scaleX=1;scaleY=1;rotation=0;width=0;height=0;color=new us(1,1,1,1);path;region=null;sequence=null;offset=ps.newFloatArray(8);uvs=ps.newFloatArray(8);tempColor=new us(1,1,1,1);constructor(t,e){super(t),this.path=e}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,e=this.uvs;if(null==t)return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=1,e[5]=1,e[6]=1,void(e[7]=0);let i=this.width/this.region.originalWidth*this.scaleX,r=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*i,n=-this.height/2*this.scaleY+this.region.offsetY*r,a=s+this.region.width*i,o=n+this.region.height*r,l=this.rotation*fs.degRad,h=Math.cos(l),c=Math.sin(l),d=this.x,u=this.y,f=s*h+d,p=s*c,m=n*h+u,g=n*c,b=a*h+d,x=a*c,w=o*h+u,y=o*c,v=this.offset;v[0]=f-g,v[1]=m+p,v[2]=f-y,v[3]=w+p,v[4]=b-y,v[5]=w+x,v[6]=b-g,v[7]=m+x,90==t.degrees?(e[0]=t.u2,e[1]=t.v2,e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,i,r){null!=this.sequence&&this.sequence.apply(t,this);let s=t.bone,n=this.offset,a=s.worldX,o=s.worldY,l=s.a,h=s.b,c=s.c,d=s.d,u=0,f=0;u=n[0],f=n[1],e[i]=u*l+f*h+a,e[i+1]=u*c+f*d+o,i+=r,u=n[2],f=n[3],e[i]=u*l+f*h+a,e[i+1]=u*c+f*d+o,i+=r,u=n[4],f=n[5],e[i]=u*l+f*h+a,e[i+1]=u*c+f*d+o,i+=r,u=n[6],f=n[7],e[i]=u*l+f*h+a,e[i+1]=u*c+f*d+o}copy(){let t=new Gn(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,ps.arrayCopy(this.uvs,0,t.uvs,0,8),ps.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=null!=this.sequence?this.sequence.copy():null,t}static X1=0;static Y1=1;static C1R=2;static C1G=3;static C1B=4;static C1A=5;static U1=6;static V1=7;static X2=8;static Y2=9;static C2R=10;static C2G=11;static C2B=12;static C2A=13;static U2=14;static V2=15;static X3=16;static Y3=17;static C3R=18;static C3G=19;static C3B=20;static C3A=21;static U3=22;static V3=23;static X4=24;static Y4=25;static C4R=26;static C4G=27;static C4B=28;static C4A=29;static U4=30;static V4=31}class jn{atlas;constructor(t){this.atlas=t}loadSequence(t,e,i){let r=i.regions;for(let s=0,n=r.length;s<n;s++){let n=i.getPath(e,s),a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (sequence: "+t+")");r[s]=a}}newRegionAttachment(t,e,i,r){let s=new Gn(e,i);if(null!=r)this.loadSequence(e,i,r);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");s.region=t}return s}newMeshAttachment(t,e,i,r){let s=new zn(e,i);if(null!=r)this.loadSequence(e,i,r);else{let t=this.atlas.findRegion(i);if(!t)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");s.region=t}return s}newBoundingBoxAttachment(t,e){return new Sn(e)}newPathAttachment(t,e){return new Un(e)}newPointAttachment(t,e){return new qn(e)}newClippingAttachment(t,e){return new Tn(e)}}class Hn{index=0;name;parent=null;length=0;x=0;y=0;rotation=0;scaleX=1;scaleY=1;shearX=0;shearY=0;inherit=Mn.Normal;skinRequired=!1;color=new us;icon;visible=!1;constructor(t,e,i){if(t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i}}!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(Mn||(Mn={}));class $n{data;skeleton;parent=null;children=new Array;x=0;y=0;rotation=0;scaleX=0;scaleY=0;shearX=0;shearY=0;ax=0;ay=0;arotation=0;ascaleX=0;ascaleY=0;ashearX=0;ashearY=0;a=0;b=0;c=0;d=0;worldY=0;worldX=0;inherit=Mn.Normal;sorted=!1;active=!1;constructor(t,e,i){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(t){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,i,r,s,n,a){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=r,this.ascaleY=s,this.ashearX=n,this.ashearY=a;let o=this.parent;if(!o){let o=this.skeleton;const l=o.scaleX,h=o.scaleY,c=(i+n)*fs.degRad,d=(i+90+a)*fs.degRad;return this.a=Math.cos(c)*r*l,this.b=Math.cos(d)*s*l,this.c=Math.sin(c)*r*h,this.d=Math.sin(d)*s*h,this.worldX=t*l+o.x,void(this.worldY=e*h+o.y)}let l=o.a,h=o.b,c=o.c,d=o.d;switch(this.worldX=l*t+h*e+o.worldX,this.worldY=c*t+d*e+o.worldY,this.inherit){case Mn.Normal:{const t=(i+n)*fs.degRad,e=(i+90+a)*fs.degRad,o=Math.cos(t)*r,u=Math.cos(e)*s,f=Math.sin(t)*r,p=Math.sin(e)*s;return this.a=l*o+h*f,this.b=l*u+h*p,this.c=c*o+d*f,void(this.d=c*u+d*p)}case Mn.OnlyTranslation:{const t=(i+n)*fs.degRad,e=(i+90+a)*fs.degRad;this.a=Math.cos(t)*r,this.b=Math.cos(e)*s,this.c=Math.sin(t)*r,this.d=Math.sin(e)*s;break}case Mn.NoRotationOrReflection:{let t=1/this.skeleton.scaleX,e=1/this.skeleton.scaleY;l*=t,c*=e;let o=l*l+c*c,u=0;o>1e-4?(o=Math.abs(l*d*e-h*t*c)/o,h=c*o,d=l*o,u=Math.atan2(c,l)*fs.radDeg):(l=0,c=0,u=90-Math.atan2(d,h)*fs.radDeg);const f=(i+n-u)*fs.degRad,p=(i+a-u+90)*fs.degRad,m=Math.cos(f)*r,g=Math.cos(p)*s,b=Math.sin(f)*r,x=Math.sin(p)*s;this.a=l*m-h*b,this.b=l*g-h*x,this.c=c*m+d*b,this.d=c*g+d*x;break}case Mn.NoScale:case Mn.NoScaleOrReflection:{i*=fs.degRad;const t=Math.cos(i),e=Math.sin(i);let o=(l*t+h*e)/this.skeleton.scaleX,u=(c*t+d*e)/this.skeleton.scaleY,f=Math.sqrt(o*o+u*u);f>1e-5&&(f=1/f),o*=f,u*=f,f=Math.sqrt(o*o+u*u),this.inherit==Mn.NoScale&&l*d-h*c<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(f=-f),i=Math.PI/2+Math.atan2(u,o);const p=Math.cos(i)*f,m=Math.sin(i)*f;n*=fs.degRad,a=(90+a)*fs.degRad;const g=Math.cos(n)*r,b=Math.cos(a)*s,x=Math.sin(n)*r,w=Math.sin(a)*s;this.a=o*g+p*x,this.b=o*b+p*w,this.c=u*g+m*x,this.d=u*b+m*w;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY,this.inherit=t.inherit}updateAppliedTransform(){let t=this.parent;if(!t)return this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*fs.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*fs.radDeg);let e,i,r,s,n=t.a,a=t.b,o=t.c,l=t.d,h=1/(n*l-a*o),c=l*h,d=a*h,u=o*h,f=n*h,p=this.worldX-t.worldX,m=this.worldY-t.worldY;if(this.ax=p*c-m*d,this.ay=m*f-p*u,this.inherit==Mn.OnlyTranslation)e=this.a,i=this.b,r=this.c,s=this.d;else{switch(this.inherit){case Mn.NoRotationOrReflection:{let t=Math.abs(n*l-a*o)/(n*n+o*o);a=-o*this.skeleton.scaleX*t/this.skeleton.scaleY,l=n*this.skeleton.scaleY*t/this.skeleton.scaleX,h=1/(n*l-a*o),c=l*h,d=a*h;break}case Mn.NoScale:case Mn.NoScaleOrReflection:let t=fs.cosDeg(this.rotation),e=fs.sinDeg(this.rotation);n=(n*t+a*e)/this.skeleton.scaleX,o=(o*t+l*e)/this.skeleton.scaleY;let i=Math.sqrt(n*n+o*o);i>1e-5&&(i=1/i),n*=i,o*=i,i=Math.sqrt(n*n+o*o),this.inherit==Mn.NoScale&&h<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(i=-i);let r=fs.PI/2+Math.atan2(o,n);a=Math.cos(r)*i,l=Math.sin(r)*i,h=1/(n*l-a*o),c=l*h,d=a*h,u=o*h,f=n*h}e=c*this.a-d*this.c,i=c*this.b-d*this.d,r=f*this.c-u*this.a,s=f*this.d-u*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(e*e+r*r),this.ascaleX>1e-4){let t=e*s-i*r;this.ascaleY=t/this.ascaleX,this.ashearY=-Math.atan2(e*i+r*s,t)*fs.radDeg,this.arotation=Math.atan2(r,e)*fs.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(i*i+s*s),this.ashearY=0,this.arotation=90-Math.atan2(s,i)*fs.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*fs.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*fs.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(t){let e=1/(this.a*this.d-this.b*this.c),i=t.x-this.worldX,r=t.y-this.worldY;return t.x=i*this.d*e-r*this.b*e,t.y=r*this.a*e-i*this.c*e,t}localToWorld(t){let e=t.x,i=t.y;return t.x=e*this.a+i*this.b+this.worldX,t.y=e*this.c+i*this.d+this.worldY,t}worldToParent(t){if(null==t)throw new Error("world cannot be null.");return null==this.parent?t:this.parent.worldToLocal(t)}parentToWorld(t){if(null==t)throw new Error("world cannot be null.");return null==this.parent?t:this.parent.localToWorld(t)}worldToLocalRotation(t){let e=fs.sinDeg(t),i=fs.cosDeg(t);return Math.atan2(this.a*e-this.c*i,this.d*i-this.b*e)*fs.radDeg+this.rotation-this.shearX}localToWorldRotation(t){t-=this.rotation-this.shearX;let e=fs.sinDeg(t),i=fs.cosDeg(t);return Math.atan2(i*this.c+e*this.d,i*this.a+e*this.b)*fs.radDeg}rotateWorld(t){t*=fs.degRad;const e=Math.sin(t),i=Math.cos(t),r=this.a,s=this.b;this.a=i*r-e*this.c,this.b=i*s-e*this.d,this.c=e*r+i*this.c,this.d=e*s+i*this.d}}class Kn{data;bones;target;bendDirection=0;compress=!1;stretch=!1;mix=1;softness=0;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0;i<t.bones.length;i++){let r=e.findBone(t.bones[i].name);if(!r)throw new Error(`Couldn't find bone ${t.bones[i].name}`);this.bones.push(r)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=i,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}isActive(){return this.active}setToSetupPose(){const t=this.data;this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch}update(t){if(0==this.mix)return;let e=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],e.worldX,e.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],e.worldX,e.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}apply1(t,e,i,r,s,n,a){let o=t.parent;if(!o)throw new Error("IK bone must have parent.");let l=o.a,h=o.b,c=o.c,d=o.d,u=-t.ashearX-t.arotation,f=0,p=0;switch(t.inherit){case Mn.OnlyTranslation:f=(e-t.worldX)*fs.signum(t.skeleton.scaleX),p=(i-t.worldY)*fs.signum(t.skeleton.scaleY);break;case Mn.NoRotationOrReflection:let r=Math.abs(l*d-h*c)/Math.max(1e-4,l*l+c*c),s=l/t.skeleton.scaleX,n=c/t.skeleton.scaleY;h=-n*r*t.skeleton.scaleX,d=s*r*t.skeleton.scaleY,u+=Math.atan2(n,s)*fs.radDeg;default:let a=e-o.worldX,m=i-o.worldY,g=l*d-h*c;Math.abs(g)<=1e-4?(f=0,p=0):(f=(a*d-m*h)/g-t.ax,p=(m*l-a*c)/g-t.ay)}u+=Math.atan2(p,f)*fs.radDeg,t.ascaleX<0&&(u+=180),u>180?u-=360:u<-180&&(u+=360);let m=t.ascaleX,g=t.ascaleY;if(r||s){switch(t.inherit){case Mn.NoScale:case Mn.NoScaleOrReflection:f=e-t.worldX,p=i-t.worldY}const o=t.data.length*m;if(o>1e-4){const t=f*f+p*p;if(r&&t<o*o||s&&t>o*o){const e=(Math.sqrt(t)/o-1)*a+1;m*=e,n&&(g*=e)}}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+u*a,m,g,t.ashearX,t.ashearY)}apply2(t,e,i,r,s,n,a,o,l){if(t.inherit!=Mn.Normal||e.inherit!=Mn.Normal)return;let h=t.ax,c=t.ay,d=t.ascaleX,u=t.ascaleY,f=d,p=u,m=e.ascaleX,g=0,b=0,x=0;d<0?(d=-d,g=180,x=-1):(g=0,x=1),u<0&&(u=-u,x=-x),m<0?(m=-m,b=180):b=0;let w=e.ax,y=0,v=0,_=0,A=t.a,S=t.b,T=t.c,k=t.d,C=Math.abs(d-u)<=1e-4;!C||n?(y=0,v=A*w+t.worldX,_=T*w+t.worldY):(y=e.ay,v=A*w+S*y+t.worldX,_=T*w+k*y+t.worldY);let I=t.parent;if(!I)throw new Error("IK parent must itself have a parent.");A=I.a,S=I.b,T=I.c,k=I.d;let M=A*k-S*T,E=v-I.worldX,R=_-I.worldY;M=Math.abs(M)<=1e-4?0:1/M;let F,P,L=(E*k-R*S)*M-h,Y=(R*A-E*T)*M-c,B=Math.sqrt(L*L+Y*Y),O=e.data.length*m;if(B<1e-4)return this.apply1(t,i,r,!1,n,!1,l),void e.updateWorldTransformWith(w,y,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);E=i-I.worldX,R=r-I.worldY;let X=(E*k-R*S)*M-h,D=(R*A-E*T)*M-c,V=X*X+D*D;if(0!=o){o*=d*(m+1)*.5;let t=Math.sqrt(V),e=t-B-O*d+o;if(e>0){let i=Math.min(1,e/(2*o))-1;i=(e-o*(1-i*i))/t,X-=i*X,D-=i*D,V=X*X+D*D}}t:if(C){O*=d;let t=(V-B*B-O*O)/(2*B*O);t<-1?(t=-1,P=Math.PI*s):t>1?(t=1,P=0,n&&(A=(Math.sqrt(V)/(B+O)-1)*l+1,f*=A,a&&(p*=A))):P=Math.acos(t)*s,A=B+O*t,S=O*Math.sin(P),F=Math.atan2(D*A-X*S,X*A+D*S)}else{A=d*O,S=u*O;let t=A*A,e=S*S,i=Math.atan2(D,X);T=e*B*B+t*V-t*e;let r=-2*e*B,n=e-t;if(k=r*r-4*n*T,k>=0){let t=Math.sqrt(k);r<0&&(t=-t),t=.5*-(r+t);let e=t/n,a=T/t,o=Math.abs(e)<Math.abs(a)?e:a;if(e=V-o*o,e>=0){R=Math.sqrt(e)*s,F=i-Math.atan2(R,o),P=Math.atan2(R/u,(o-B)/d);break t}}let a=fs.PI,o=B-A,l=o*o,h=0,c=0,f=B+A,p=f*f,m=0;T=-A*B/(t-e),T>=-1&&T<=1&&(T=Math.acos(T),E=A*Math.cos(T)+B,R=S*Math.sin(T),k=E*E+R*R,k<l&&(a=T,l=k,o=E,h=R),k>p&&(c=T,p=k,f=E,m=R)),V<=.5*(l+p)?(F=i-Math.atan2(h*s,o),P=a*s):(F=i-Math.atan2(m*s,f),P=c*s)}let N=Math.atan2(y,w)*x,W=t.arotation;F=(F-N)*fs.radDeg+g-W,F>180?F-=360:F<-180&&(F+=360),t.updateWorldTransformWith(h,c,W+F*l,f,p,0,0),W=e.arotation,P=((P+N)*fs.radDeg-e.ashearX)*x+b-W,P>180?P-=360:P<-180&&(P+=360),e.updateWorldTransformWith(w,y,W+P*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class Jn{name;order;skinRequired;constructor(t,e,i){this.name=t,this.order=e,this.skinRequired=i}}class Qn extends Jn{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}bendDirection=0;compress=!1;stretch=!1;uniform=!1;mix=0;softness=0;constructor(t){super(t,0,!1)}}class Zn extends Jn{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}positionMode=En.Fixed;spacingMode=Rn.Fixed;rotateMode=Fn.Chain;offsetRotation=0;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;constructor(t){super(t,0,!1)}}!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(En||(En={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(Rn||(Rn={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(Fn||(Fn={}));class ta{static NONE=-1;static BEFORE=-2;static AFTER=-3;static epsilon=1e-5;data;bones;target;position=0;spacing=0;mixRotate=0;mixX=0;mixY=0;spaces=new Array;positions=new Array;world=new Array;curves=new Array;lengths=new Array;segments=new Array;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0,r=t.bones.length;i<r;i++){let r=e.findBone(t.bones[i].name);if(!r)throw new Error(`Couldn't find bone ${t.bones[i].name}.`);this.bones.push(r)}let i=e.findSlot(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}`);this.target=i,this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}isActive(){return this.active}setToSetupPose(){const t=this.data;this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}update(t){let e=this.target.getAttachment();if(!(e instanceof Un))return;let i=this.mixRotate,r=this.mixX,s=this.mixY;if(0==i&&0==r&&0==s)return;let n=this.data,a=n.rotateMode==Fn.Tangent,o=n.rotateMode==Fn.ChainScale,l=this.bones,h=l.length,c=a?h:h+1,d=ps.setArraySize(this.spaces,c),u=o?this.lengths=ps.setArraySize(this.lengths,h):[],f=this.spacing;switch(n.spacingMode){case Rn.Percent:if(o)for(let t=0,e=c-1;t<e;t++){let e=l[t],i=e.data.length,r=i*e.a,s=i*e.c;u[t]=Math.sqrt(r*r+s*s)}ps.arrayFill(d,1,c,f);break;case Rn.Proportional:let t=0;for(let e=0,i=c-1;e<i;){let i=l[e],r=i.data.length;if(r<ta.epsilon)o&&(u[e]=0),d[++e]=f;else{let s=r*i.a,n=r*i.c,a=Math.sqrt(s*s+n*n);o&&(u[e]=a),d[++e]=a,t+=a}}if(t>0){t=c/t*f;for(let e=1;e<c;e++)d[e]*=t}break;default:let e=n.spacingMode==Rn.Length;for(let t=0,i=c-1;t<i;){let i=l[t],r=i.data.length;if(r<ta.epsilon)o&&(u[t]=0),d[++t]=f;else{let s=r*i.a,n=r*i.c,a=Math.sqrt(s*s+n*n);o&&(u[t]=a),d[++t]=(e?r+f:f)*a/r}}}let p=this.computeWorldPositions(e,c,a),m=p[0],g=p[1],b=n.offsetRotation,x=!1;if(0==b)x=n.rotateMode==Fn.Chain;else{x=!1;let t=this.target.bone;b*=t.a*t.d-t.b*t.c>0?fs.degRad:-fs.degRad}for(let t=0,e=3;t<h;t++,e+=3){let n=l[t];n.worldX+=(m-n.worldX)*r,n.worldY+=(g-n.worldY)*s;let h=p[e],c=p[e+1],f=h-m,w=c-g;if(o){let e=u[t];if(0!=e){let t=(Math.sqrt(f*f+w*w)/e-1)*i+1;n.a*=t,n.c*=t}}if(m=h,g=c,i>0){let r=n.a,s=n.b,o=n.c,l=n.d,h=0,c=0,u=0;if(h=a?p[e-1]:0==d[t+1]?p[e+2]:Math.atan2(w,f),h-=Math.atan2(o,r),x){c=Math.cos(h),u=Math.sin(h);let t=n.data.length;m+=(t*(c*r-u*o)-f)*i,g+=(t*(u*r+c*o)-w)*i}else h+=b;h>fs.PI?h-=fs.PI2:h<-fs.PI&&(h+=fs.PI2),h*=i,c=Math.cos(h),u=Math.sin(h),n.a=c*r-u*o,n.b=c*s-u*l,n.c=u*r+c*o,n.d=u*s+c*l}n.updateAppliedTransform()}}computeWorldPositions(t,e,i){let r=this.target,s=this.position,n=this.spaces,a=ps.setArraySize(this.positions,3*e+2),o=this.world,l=t.closed,h=t.worldVerticesLength,c=h/6,d=ta.NONE;if(!t.constantSpeed){let u=t.lengths;c-=l?1:2;let f,p=u[c];switch(this.data.positionMode==En.Percent&&(s*=p),this.data.spacingMode){case Rn.Percent:f=p;break;case Rn.Proportional:f=p/e;break;default:f=1}o=ps.setArraySize(this.world,8);for(let m=0,g=0,b=0;m<e;m++,g+=3){let e=n[m]*f;s+=e;let x=s;if(l)x%=p,x<0&&(x+=p),b=0;else{if(x<0){d!=ta.BEFORE&&(d=ta.BEFORE,t.computeWorldVertices(r,2,4,o,0,2)),this.addBeforePosition(x,o,0,a,g);continue}if(x>p){d!=ta.AFTER&&(d=ta.AFTER,t.computeWorldVertices(r,h-6,4,o,0,2)),this.addAfterPosition(x-p,o,0,a,g);continue}}for(;;b++){let t=u[b];if(!(x>t)){if(0==b)x/=t;else{let e=u[b-1];x=(x-e)/(t-e)}break}}b!=d&&(d=b,l&&b==c?(t.computeWorldVertices(r,h-4,4,o,0,2),t.computeWorldVertices(r,0,4,o,4,2)):t.computeWorldVertices(r,6*b+2,8,o,0,2)),this.addCurvePosition(x,o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],a,g,i||m>0&&0==e)}return a}l?(h+=2,o=ps.setArraySize(this.world,h),t.computeWorldVertices(r,2,h-4,o,0,2),t.computeWorldVertices(r,0,2,o,h-4,2),o[h-2]=o[0],o[h-1]=o[1]):(c--,h-=4,o=ps.setArraySize(this.world,h),t.computeWorldVertices(r,2,h,o,0,2));let u,f=ps.setArraySize(this.curves,c),p=0,m=o[0],g=o[1],b=0,x=0,w=0,y=0,v=0,_=0,A=0,S=0,T=0,k=0,C=0,I=0,M=0,E=0;for(let t=0,e=2;t<c;t++,e+=6)b=o[e],x=o[e+1],w=o[e+2],y=o[e+3],v=o[e+4],_=o[e+5],A=.1875*(m-2*b+w),S=.1875*(g-2*x+y),T=.09375*(3*(b-w)-m+v),k=.09375*(3*(x-y)-g+_),C=2*A+T,I=2*S+k,M=.75*(b-m)+A+.16666667*T,E=.75*(x-g)+S+.16666667*k,p+=Math.sqrt(M*M+E*E),M+=C,E+=I,C+=T,I+=k,p+=Math.sqrt(M*M+E*E),M+=C,E+=I,p+=Math.sqrt(M*M+E*E),M+=C+T,E+=I+k,p+=Math.sqrt(M*M+E*E),f[t]=p,m=v,g=_;switch(this.data.positionMode==En.Percent&&(s*=p),this.data.spacingMode){case Rn.Percent:u=p;break;case Rn.Proportional:u=p/e;break;default:u=1}let R=this.segments,F=0;for(let t=0,r=0,c=0,P=0;t<e;t++,r+=3){let e=n[t]*u;s+=e;let L=s;if(l)L%=p,L<0&&(L+=p),c=0;else{if(L<0){this.addBeforePosition(L,o,0,a,r);continue}if(L>p){this.addAfterPosition(L-p,o,h-4,a,r);continue}}for(;;c++){let t=f[c];if(!(L>t)){if(0==c)L/=t;else{let e=f[c-1];L=(L-e)/(t-e)}break}}if(c!=d){d=c;let t=6*c;for(m=o[t],g=o[t+1],b=o[t+2],x=o[t+3],w=o[t+4],y=o[t+5],v=o[t+6],_=o[t+7],A=.03*(m-2*b+w),S=.03*(g-2*x+y),T=.006*(3*(b-w)-m+v),k=.006*(3*(x-y)-g+_),C=2*A+T,I=2*S+k,M=.3*(b-m)+A+.16666667*T,E=.3*(x-g)+S+.16666667*k,F=Math.sqrt(M*M+E*E),R[0]=F,t=1;t<8;t++)M+=C,E+=I,C+=T,I+=k,F+=Math.sqrt(M*M+E*E),R[t]=F;M+=C,E+=I,F+=Math.sqrt(M*M+E*E),R[8]=F,M+=C+T,E+=I+k,F+=Math.sqrt(M*M+E*E),R[9]=F,P=0}for(L*=F;;P++){let t=R[P];if(!(L>t)){if(0==P)L/=t;else{let e=R[P-1];L=P+(L-e)/(t-e)}break}}this.addCurvePosition(.1*L,m,g,b,x,w,y,v,_,a,r,i||t>0&&0==e)}return a}addBeforePosition(t,e,i,r,s){let n=e[i],a=e[i+1],o=e[i+2]-n,l=e[i+3]-a,h=Math.atan2(l,o);r[s]=n+t*Math.cos(h),r[s+1]=a+t*Math.sin(h),r[s+2]=h}addAfterPosition(t,e,i,r,s){let n=e[i+2],a=e[i+3],o=n-e[i],l=a-e[i+1],h=Math.atan2(l,o);r[s]=n+t*Math.cos(h),r[s+1]=a+t*Math.sin(h),r[s+2]=h}addCurvePosition(t,e,i,r,s,n,a,o,l,h,c,d){if(0==t||isNaN(t))return h[c]=e,h[c+1]=i,void(h[c+2]=Math.atan2(s-i,r-e));let u=t*t,f=u*t,p=1-t,m=p*p,g=m*p,b=p*t,x=3*b,w=p*x,y=x*t,v=e*g+r*w+n*y+o*f,_=i*g+s*w+a*y+l*f;h[c]=v,h[c+1]=_,d&&(h[c+2]=t<.001?Math.atan2(s-i,r-e):Math.atan2(_-(i*m+s*b*2+a*u),v-(e*m+r*b*2+n*u)))}}class ea{data;_bone=null;set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}inertia=0;strength=0;damping=0;massInverse=0;wind=0;gravity=0;mix=0;_reset=!0;ux=0;uy=0;cx=0;cy=0;tx=0;ty=0;xOffset=0;xVelocity=0;yOffset=0;yVelocity=0;rotateOffset=0;rotateVelocity=0;scaleOffset=0;scaleVelocity=0;active=!1;skeleton;remaining=0;lastTime=0;constructor(t,e){this.data=t,this.skeleton=e,this.bone=e.bones[t.bone.index],this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const t=this.data;this.inertia=t.inertia,this.strength=t.strength,this.damping=t.damping,this.massInverse=t.massInverse,this.wind=t.wind,this.gravity=t.gravity,this.mix=t.mix}isActive(){return this.active}update(t){const e=this.mix;if(0==e)return;const i=this.data.x>0,r=this.data.y>0,s=this.data.rotate>0||this.data.shearX>0,n=this.data.scaleX>0,a=this.bone,o=a.data.length;switch(t){case Pn.none:return;case Pn.reset:this.reset();case Pn.update:const t=this.skeleton,l=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=l,this.lastTime=t.time;const h=a.worldX,c=a.worldY;if(this._reset)this._reset=!1,this.ux=h,this.uy=c;else{let d=this.remaining,u=this.inertia,f=this.data.step,p=this.skeleton.data.referenceScale,m=-1,g=this.data.limit*l,b=g*Math.abs(t.scaleY);if(g*=Math.abs(t.scaleX),i||r){if(i){const t=(this.ux-h)*u;this.xOffset+=t>g?g:t<-g?-g:t,this.ux=h}if(r){const t=(this.uy-c)*u;this.yOffset+=t>b?b:t<-b?-b:t,this.uy=c}if(d>=f){m=Math.pow(this.damping,60*f);const e=this.massInverse*f,s=this.strength,n=this.wind*p*t.scaleX,a=this.gravity*p*t.scaleY;do{i&&(this.xVelocity+=(n-this.xOffset*s)*e,this.xOffset+=this.xVelocity*f,this.xVelocity*=m),r&&(this.yVelocity-=(a+this.yOffset*s)*e,this.yOffset+=this.yVelocity*f,this.yVelocity*=m),d-=f}while(d>=f)}i&&(a.worldX+=this.xOffset*e*this.data.x),r&&(a.worldY+=this.yOffset*e*this.data.y)}if(s||n){let t=Math.atan2(a.c,a.a),i=0,r=0,l=0,h=this.cx-a.worldX,c=this.cy-a.worldY;if(h>g?h=g:h<-g&&(h=-g),c>b?c=b:c<-b&&(c=-b),s){l=(this.data.rotate+this.data.shearX)*e;let s=Math.atan2(c+this.ty,h+this.tx)-t-this.rotateOffset*l;this.rotateOffset+=(s-Math.ceil(s*fs.invPI2-.5)*fs.PI2)*u,s=this.rotateOffset*l+t,i=Math.cos(s),r=Math.sin(s),n&&(s=o*a.getWorldScaleX(),s>0&&(this.scaleOffset+=(h*i+c*r)*u/s))}else{i=Math.cos(t),r=Math.sin(t);const e=o*a.getWorldScaleX();e>0&&(this.scaleOffset+=(h*i+c*r)*u/e)}if(d=this.remaining,d>=f){-1==m&&(m=Math.pow(this.damping,60*f));const e=this.massInverse*f,a=this.strength,h=this.wind,c=sa.yDown?-this.gravity:this.gravity,u=o/p;for(;;)if(d-=f,n&&(this.scaleVelocity+=(h*i-c*r-this.scaleOffset*a)*e,this.scaleOffset+=this.scaleVelocity*f,this.scaleVelocity*=m),s){if(this.rotateVelocity-=((h*r+c*i)*u+this.rotateOffset*a)*e,this.rotateOffset+=this.rotateVelocity*f,this.rotateVelocity*=m,d<f)break;const s=this.rotateOffset*l+t;i=Math.cos(s),r=Math.sin(s)}else if(d<f)break}}this.remaining=d}this.cx=a.worldX,this.cy=a.worldY;break;case Pn.pose:i&&(a.worldX+=this.xOffset*e*this.data.x),r&&(a.worldY+=this.yOffset*e*this.data.y)}if(s){let t=this.rotateOffset*e,i=0,r=0,s=0;if(this.data.shearX>0){let e=0;this.data.rotate>0&&(e=t*this.data.rotate,i=Math.sin(e),r=Math.cos(e),s=a.b,a.b=r*s-i*a.d,a.d=i*s+r*a.d),e+=t*this.data.shearX,i=Math.sin(e),r=Math.cos(e),s=a.a,a.a=r*s-i*a.c,a.c=i*s+r*a.c}else t*=this.data.rotate,i=Math.sin(t),r=Math.cos(t),s=a.a,a.a=r*s-i*a.c,a.c=i*s+r*a.c,s=a.b,a.b=r*s-i*a.d,a.d=i*s+r*a.d}if(n){const t=1+this.scaleOffset*e*this.data.scaleX;a.a*=t,a.c*=t}t!=Pn.pose&&(this.tx=o*a.a,this.ty=o*a.c),a.updateAppliedTransform()}translate(t,e){this.ux-=t,this.uy-=e,this.cx-=t,this.cy-=e}rotate(t,e,i){const r=i*fs.degRad,s=Math.cos(r),n=Math.sin(r),a=this.cx-t,o=this.cy-e;this.translate(a*s-o*n-a,a*n+o*s-o)}}class ia{data;bone;color;darkColor=null;attachment=null;attachmentState=0;sequenceIndex=-1;deform=new Array;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new us,this.darkColor=t.darkColor?new us:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(t instanceof xs&&this.attachment instanceof xs&&t.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class ra{data;bones;target;mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;temp=new gs;active=!1;constructor(t,e){if(!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let i=0;i<t.bones.length;i++){let r=e.findBone(t.bones[i].name);if(!r)throw new Error(`Couldn't find bone ${t.bones[i].name}.`);this.bones.push(r)}let i=e.findBone(t.target.name);if(!i)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=i,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}isActive(){return this.active}setToSetupPose(){const t=this.data;this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY}update(t){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleY&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,r=this.mixScaleX,s=this.mixScaleY,n=this.mixShearY,a=0!=e||0!=i,o=this.target,l=o.a,h=o.b,c=o.c,d=o.d,u=l*d-h*c>0?fs.degRad:-fs.degRad,f=this.data.offsetRotation*u,p=this.data.offsetShearY*u,m=this.bones;for(let u=0,g=m.length;u<g;u++){let g=m[u];if(0!=t){let e=g.a,i=g.b,r=g.c,s=g.d,n=Math.atan2(c,l)-Math.atan2(r,e)+f;n>fs.PI?n-=fs.PI2:n<-fs.PI&&(n+=fs.PI2),n*=t;let a=Math.cos(n),o=Math.sin(n);g.a=a*e-o*r,g.b=a*i-o*s,g.c=o*e+a*r,g.d=o*i+a*s}if(a){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),g.worldX+=(t.x-g.worldX)*e,g.worldY+=(t.y-g.worldY)*i}if(0!=r){let t=Math.sqrt(g.a*g.a+g.c*g.c);0!=t&&(t=(t+(Math.sqrt(l*l+c*c)-t+this.data.offsetScaleX)*r)/t),g.a*=t,g.c*=t}if(0!=s){let t=Math.sqrt(g.b*g.b+g.d*g.d);0!=t&&(t=(t+(Math.sqrt(h*h+d*d)-t+this.data.offsetScaleY)*s)/t),g.b*=t,g.d*=t}if(n>0){let t=g.b,e=g.d,i=Math.atan2(e,t),r=Math.atan2(d,h)-Math.atan2(c,l)-(i-Math.atan2(g.c,g.a));r>fs.PI?r-=fs.PI2:r<-fs.PI&&(r+=fs.PI2),r=i+(r+p)*n;let s=Math.sqrt(t*t+e*e);g.b=Math.cos(r)*s,g.d=Math.sin(r)*s}g.updateAppliedTransform()}}applyRelativeWorld(){let t=this.mixRotate,e=this.mixX,i=this.mixY,r=this.mixScaleX,s=this.mixScaleY,n=this.mixShearY,a=0!=e||0!=i,o=this.target,l=o.a,h=o.b,c=o.c,d=o.d,u=l*d-h*c>0?fs.degRad:-fs.degRad,f=this.data.offsetRotation*u,p=this.data.offsetShearY*u,m=this.bones;for(let u=0,g=m.length;u<g;u++){let g=m[u];if(0!=t){let e=g.a,i=g.b,r=g.c,s=g.d,n=Math.atan2(c,l)+f;n>fs.PI?n-=fs.PI2:n<-fs.PI&&(n+=fs.PI2),n*=t;let a=Math.cos(n),o=Math.sin(n);g.a=a*e-o*r,g.b=a*i-o*s,g.c=o*e+a*r,g.d=o*i+a*s}if(a){let t=this.temp;o.localToWorld(t.set(this.data.offsetX,this.data.offsetY)),g.worldX+=t.x*e,g.worldY+=t.y*i}if(0!=r){let t=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleX)*r+1;g.a*=t,g.c*=t}if(0!=s){let t=(Math.sqrt(h*h+d*d)-1+this.data.offsetScaleY)*s+1;g.b*=t,g.d*=t}if(n>0){let t=Math.atan2(d,h)-Math.atan2(c,l);t>fs.PI?t-=fs.PI2:t<-fs.PI&&(t+=fs.PI2);let e=g.b,i=g.d;t=Math.atan2(i,e)+(t-fs.PI/2+p)*n;let r=Math.sqrt(e*e+i*i);g.b=Math.cos(t)*r,g.d=Math.sin(t)*r}g.updateAppliedTransform()}}applyAbsoluteLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,r=this.mixScaleX,s=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation;0!=t&&(c+=(a.arotation-c+this.data.offsetRotation)*t);let d=h.ax,u=h.ay;d+=(a.ax-d+this.data.offsetX)*e,u+=(a.ay-u+this.data.offsetY)*i;let f=h.ascaleX,p=h.ascaleY;0!=r&&0!=f&&(f=(f+(a.ascaleX-f+this.data.offsetScaleX)*r)/f),0!=s&&0!=p&&(p=(p+(a.ascaleY-p+this.data.offsetScaleY)*s)/p);let m=h.ashearY;0!=n&&(m+=(a.ashearY-m+this.data.offsetShearY)*n),h.updateWorldTransformWith(d,u,c,f,p,h.ashearX,m)}}applyRelativeLocal(){let t=this.mixRotate,e=this.mixX,i=this.mixY,r=this.mixScaleX,s=this.mixScaleY,n=this.mixShearY,a=this.target,o=this.bones;for(let l=0,h=o.length;l<h;l++){let h=o[l],c=h.arotation+(a.arotation+this.data.offsetRotation)*t,d=h.ax+(a.ax+this.data.offsetX)*e,u=h.ay+(a.ay+this.data.offsetY)*i,f=h.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*r+1),p=h.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*s+1),m=h.ashearY+(a.ashearY+this.data.offsetShearY)*n;h.updateWorldTransformWith(d,u,c,f,p,h.ashearX,m)}}}class sa{static quadTriangles=[0,1,2,2,3,0];static yDown=!1;data;bones;slots;drawOrder;ikConstraints;transformConstraints;pathConstraints;physicsConstraints;_updateCache=new Array;skin=null;color;scaleX=1;_scaleY=1;get scaleY(){return sa.yDown?-this._scaleY:this._scaleY}set scaleY(t){this._scaleY=t}x=0;y=0;time=0;constructor(t){if(!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){let i,r=t.bones[e];if(r.parent){let t=this.bones[r.parent.index];i=new $n(r,this,t),t.children.push(i)}else i=new $n(r,this,null);this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){let i=t.slots[e],r=this.bones[i.boneData.index],s=new ia(i,r);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){let i=t.ikConstraints[e];this.ikConstraints.push(new Kn(i,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){let i=t.transformConstraints[e];this.transformConstraints.push(new ra(i,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){let i=t.pathConstraints[e];this.pathConstraints.push(new ta(i,this))}this.physicsConstraints=new Array;for(let e=0;e<t.physicsConstraints.length;e++){let i=t.physicsConstraints[e];this.physicsConstraints.push(new ea(i,this))}this.color=new us(1,1,1,1),this.updateCache()}updateCache(){this._updateCache.length=0;let t=this.bones;for(let e=0,i=t.length;e<i;e++){let i=t[e];i.sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin){let t=this.skin.bones;for(let e=0,i=this.skin.bones.length;e<i;e++){let i=this.bones[t[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(i)}}let e=this.ikConstraints,i=this.transformConstraints,r=this.pathConstraints,s=this.physicsConstraints,n=e.length,a=i.length,o=r.length,l=this.physicsConstraints.length,h=n+a+o+l;t:for(let t=0;t<h;t++){for(let i=0;i<n;i++){let r=e[i];if(r.data.order==t){this.sortIkConstraint(r);continue t}}for(let e=0;e<a;e++){let r=i[e];if(r.data.order==t){this.sortTransformConstraint(r);continue t}}for(let e=0;e<o;e++){let i=r[e];if(i.data.order==t){this.sortPathConstraint(i);continue t}}for(let e=0;e<l;e++){const i=s[e];if(i.data.order==t){this.sortPhysicsConstraint(i);continue t}}}for(let e=0,i=t.length;e<i;e++)this.sortBone(t[e])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&ps.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target;this.sortBone(e);let i=t.bones,r=i[0];if(this.sortBone(r),1==i.length)this._updateCache.push(t),this.sortReset(r.children);else{let e=i[i.length-1];this.sortBone(e),this._updateCache.push(t),this.sortReset(r.children),e.sorted=!0}}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&ps.contains(this.skin.constraints,t.data,!0)),!t.active)return;let e=t.target,i=e.data.index,r=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,r);for(let t=0,e=this.data.skins.length;t<e;t++)this.sortPathConstraintAttachment(this.data.skins[t],i,r);let s=e.getAttachment();s instanceof Un&&this.sortPathConstraintAttachmentWith(s,r);let n=t.bones,a=n.length;for(let t=0;t<a;t++)this.sortBone(n[t]);this._updateCache.push(t);for(let t=0;t<a;t++)this.sortReset(n[t].children);for(let t=0;t<a;t++)n[t].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&ps.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);let e=t.bones,i=e.length;if(t.data.local)for(let t=0;t<i;t++){let i=e[t];this.sortBone(i.parent),this.sortBone(i)}else for(let t=0;t<i;t++)this.sortBone(e[t]);this._updateCache.push(t);for(let t=0;t<i;t++)this.sortReset(e[t].children);for(let t=0;t<i;t++)e[t].sorted=!0}sortPathConstraintAttachment(t,e,i){let r=t.attachments[e];if(r)for(let t in r)this.sortPathConstraintAttachmentWith(r[t],i)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Un))return;let i=t.bones;if(i){let t=this.bones;for(let e=0,r=i.length;e<r;){let r=i[e++];for(r+=e;e<r;)this.sortBone(t[i[e++]])}}else this.sortBone(e)}sortPhysicsConstraint(t){const e=t.bone;t.active=e.active&&(!t.data.skinRequired||null!=this.skin&&ps.contains(this.skin.constraints,t.data,!0)),t.active&&(this.sortBone(e),this._updateCache.push(t),this.sortReset(e.children),e.sorted=!0)}sortBone(t){if(!t)return;if(t.sorted)return;let e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,i=t.length;e<i;e++){let i=t[e];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(t){if(null==t)throw new Error("physics is undefined");let e=this.bones;for(let t=0,i=e.length;t<i;t++){let i=e[t];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY}let i=this._updateCache;for(let e=0,r=i.length;e<r;e++)i[e].update(t)}updateWorldTransformWith(t,e){if(!e)throw new Error("parent cannot be null.");let i=this.bones;for(let t=1,e=i.length;t<e;t++){let e=i[t];e.ax=e.x,e.ay=e.y,e.arotation=e.rotation,e.ascaleX=e.scaleX,e.ascaleY=e.scaleY,e.ashearX=e.shearX,e.ashearY=e.shearY}let r=this.getRootBone();if(!r)throw new Error("Root bone must not be null.");let s=e.a,n=e.b,a=e.c,o=e.d;r.worldX=s*this.x+n*this.y+e.worldX,r.worldY=a*this.x+o*this.y+e.worldY;const l=(r.rotation+r.shearX)*fs.degRad,h=(r.rotation+90+r.shearY)*fs.degRad,c=Math.cos(l)*r.scaleX,d=Math.cos(h)*r.scaleY,u=Math.sin(l)*r.scaleX,f=Math.sin(h)*r.scaleY;r.a=(s*c+n*u)*this.scaleX,r.b=(s*d+n*f)*this.scaleX,r.c=(a*c+o*u)*this.scaleY,r.d=(a*d+o*f)*this.scaleY;let p=this._updateCache;for(let e=0,i=p.length;e<i;e++){let i=p[e];i!=r&&i.update(t)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const t of this.bones)t.setToSetupPose();for(const t of this.ikConstraints)t.setToSetupPose();for(const t of this.transformConstraints)t.setToSetupPose();for(const t of this.pathConstraints)t.setToSetupPose();for(const t of this.physicsConstraints)t.setToSetupPose()}setSlotsToSetupPose(){let t=this.slots;ps.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,i=t.length;e<i;e++)t[e].setToSetupPose()}getRootBone(){return 0==this.bones.length?null:this.bones[0]}findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.data.name==t)return r}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.data.name==t)return r}return null}setSkinByName(t){let e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else{let e=this.slots;for(let i=0,r=e.length;i<r;i++){let r=e[i],s=r.data.attachmentName;if(s){let e=t.getAttachment(i,s);e&&r.setAttachment(e)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){let i=this.data.findSlot(t);if(!i)throw new Error(`Can't find slot with name ${t}`);return this.getAttachment(i.index,e)}getAttachment(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(!t)throw new Error("slotName cannot be null.");let i=this.slots;for(let r=0,s=i.length;r<s;r++){let s=i[r];if(s.data.name==t){let i=null;if(e&&(i=this.getAttachment(r,e),!i))throw new Error("Attachment not found: "+e+", for slot: "+t);return void s.setAttachment(i)}}throw new Error("Slot not found: "+t)}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(e=>e.data.name==t)??null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(e=>e.data.name==t)??null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(e=>e.data.name==t)??null}findPhysicsConstraint(t){if(null==t)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(e=>e.data.name==t)??null}getBoundsRect(t){let e=new gs,i=new gs;return this.getBounds(e,i,void 0,t),{x:e.x,y:e.y,width:i.x,height:i.y}}getBounds(t,e,i=new Array(2),r=null){if(!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");let s=this.drawOrder,n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let t=0,e=s.length;t<e;t++){let e=s[t];if(!e.bone.active)continue;let h=0,c=null,d=null,u=e.getAttachment();if(u instanceof Gn)h=8,c=ps.setArraySize(i,h,0),u.computeWorldVertices(e,c,0,2),d=sa.quadTriangles;else if(u instanceof zn){let t=u;h=t.worldVerticesLength,c=ps.setArraySize(i,h,0),t.computeWorldVertices(e,0,h,c,0,2),d=t.triangles}else if(u instanceof Tn&&null!=r){r.clipStart(e,u);continue}if(c&&d){null!=r&&r.isClipping()&&(r.clipTriangles(c,d,d.length),c=r.clippedVertices,h=r.clippedVertices.length);for(let t=0,e=c.length;t<e;t+=2){let e=c[t],i=c[t+1];n=Math.min(n,e),a=Math.min(a,i),o=Math.max(o,e),l=Math.max(l,i)}}null!=r&&r.clipEndWithSlot(e)}null!=r&&r.clipEnd(),t.set(n,a),e.set(o-n,l-a)}update(t){this.time+=t}physicsTranslate(t,e){const i=this.physicsConstraints;for(let r=0,s=i.length;r<s;r++)i[r].translate(t,e)}physicsRotate(t,e,i){const r=this.physicsConstraints;for(let s=0,n=r.length;s<n;s++)r[s].rotate(t,e,i)}}(Bn=Pn||(Pn={}))[Bn.none=0]="none",Bn[Bn.reset=1]="reset",Bn[Bn.update=2]="update",Bn[Bn.pose=3]="pose";class na{data;intValue=0;floatValue=0;stringValue=null;time=0;volume=0;balance=0;constructor(t,e){if(!e)throw new Error("data cannot be null.");this.time=t,this.data=e}}class aa{name;intValue=0;floatValue=0;stringValue=null;audioPath=null;volume=0;balance=0;constructor(t){this.name=t}}class oa extends Jn{_bone=null;set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}x=0;y=0;rotate=0;scaleX=0;shearX=0;limit=0;step=0;inertia=0;strength=0;damping=0;massInverse=0;wind=0;gravity=0;mix=0;inertiaGlobal=!1;strengthGlobal=!1;dampingGlobal=!1;massGlobal=!1;windGlobal=!1;gravityGlobal=!1;mixGlobal=!1;constructor(t){super(t,0,!1)}}class la{name=null;bones=new Array;slots=new Array;skins=new Array;defaultSkin=null;events=new Array;animations=new Array;ikConstraints=new Array;transformConstraints=new Array;pathConstraints=new Array;physicsConstraints=new Array;x=0;y=0;width=0;height=0;referenceScale=100;version=null;hash=null;fps=0;imagesPath=null;audioPath=null;findBone(t){if(!t)throw new Error("boneName cannot be null.");let e=this.bones;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t)return r}return null}findSlot(t){if(!t)throw new Error("slotName cannot be null.");let e=this.slots;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t)return r}return null}findSkin(t){if(!t)throw new Error("skinName cannot be null.");let e=this.skins;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t)return r}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");let e=this.events;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t)return r}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");let e=this.animations;for(let i=0,r=e.length;i<r;i++){let r=e[i];if(r.name==t)return r}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r.name==t)return r}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r.name==t)return r}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r.name==t)return r}return null}findPhysicsConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.physicsConstraints;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(r.name==t)return r}return null}}class ha{slotIndex;name;attachment;constructor(t=0,e,i){this.slotIndex=t,this.name=e,this.attachment=i}}class ca{name;attachments=new Array;bones=Array();constraints=new Array;color=new us(.99607843,.61960787,.30980393,1);constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,i){if(!i)throw new Error("attachment cannot be null.");let r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=i}addSkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],r=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){r=!0;break}r||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],r=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){r=!0;break}r||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(t){for(let e=0;e<t.bones.length;e++){let i=t.bones[e],r=!1;for(let t=0;t<this.bones.length;t++)if(this.bones[t]==i){r=!0;break}r||this.bones.push(i)}for(let e=0;e<t.constraints.length;e++){let i=t.constraints[e],r=!1;for(let t=0;t<this.constraints.length;t++)if(this.constraints[t]==i){r=!0;break}r||this.constraints.push(i)}let e=t.getAttachments();for(let t=0;t<e.length;t++){var i=e[t];i.attachment&&(i.attachment instanceof zn?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(t,e){let i=this.attachments[t];return i?i[e]:null}removeAttachment(t,e){let i=this.attachments[t];i&&delete i[e]}getAttachments(){let t=new Array;for(var e=0;e<this.attachments.length;e++){let i=this.attachments[e];if(i)for(let r in i){let s=i[r];s&&t.push(new ha(e,r,s))}}return t}getAttachmentsForSlot(t,e){let i=this.attachments[t];if(i)for(let r in i){let s=i[r];s&&e.push(new ha(t,r,s))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let i=0;for(let r=0;r<t.slots.length;r++){let s=t.slots[r],n=s.getAttachment();if(n&&i<e.attachments.length){let t=e.attachments[i];for(let e in t)if(n==t[e]){let t=this.getAttachment(i,e);t&&s.setAttachment(t);break}}i++}}}class da{index=0;name;boneData;color=new us(1,1,1,1);darkColor=null;attachmentName=null;blendMode=Ln.Normal;visible=!0;constructor(t,e,i){if(t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i}}(On=Ln||(Ln={}))[On.Normal=0]="Normal",On[On.Additive=1]="Additive",On[On.Multiply=2]="Multiply",On[On.Screen=3]="Screen";class ua extends Jn{bones=new Array;_target=null;set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}mixRotate=0;mixX=0;mixY=0;mixScaleX=0;mixScaleY=0;mixShearY=0;offsetRotation=0;offsetX=0;offsetY=0;offsetScaleX=0;offsetScaleY=0;offsetShearY=0;relative=!1;local=!1;constructor(t){super(t,0,!1)}}class fa{scale=1;attachmentLoader;linkedMeshes=new Array;constructor(t){this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new la;i.name="";let r=new pa(t),s=r.readInt32(),n=r.readInt32();i.hash=0==n&&0==s?null:n.toString(16)+s.toString(16),i.version=r.readString(),i.x=r.readFloat(),i.y=r.readFloat(),i.width=r.readFloat(),i.height=r.readFloat(),i.referenceScale=r.readFloat()*e;let a=r.readBoolean();a&&(i.fps=r.readFloat(),i.imagesPath=r.readString(),i.audioPath=r.readString());let o=0;o=r.readInt(!0);for(let t=0;t<o;t++){let t=r.readString();if(!t)throw new Error("String in string table must not be null.");r.strings.push(t)}o=r.readInt(!0);for(let t=0;t<o;t++){let s=r.readString();if(!s)throw new Error("Bone name must not be null.");let n=0==t?null:i.bones[r.readInt(!0)],o=new Hn(t,s,n);o.rotation=r.readFloat(),o.x=r.readFloat()*e,o.y=r.readFloat()*e,o.scaleX=r.readFloat(),o.scaleY=r.readFloat(),o.shearX=r.readFloat(),o.shearY=r.readFloat(),o.length=r.readFloat()*e,o.inherit=r.readByte(),o.skinRequired=r.readBoolean(),a&&(us.rgba8888ToColor(o.color,r.readInt32()),o.icon=r.readString()??void 0,o.visible=r.readBoolean()),i.bones.push(o)}o=r.readInt(!0);for(let t=0;t<o;t++){let e=r.readString();if(!e)throw new Error("Slot name must not be null.");let s=i.bones[r.readInt(!0)],n=new da(t,e,s);us.rgba8888ToColor(n.color,r.readInt32());let o=r.readInt32();-1!=o&&us.rgb888ToColor(n.darkColor=new us,o),n.attachmentName=r.readStringRef(),n.blendMode=r.readInt(!0),a&&(n.visible=r.readBoolean()),i.slots.push(n)}o=r.readInt(!0);for(let t,s=0;s<o;s++){let s=r.readString();if(!s)throw new Error("IK constraint data name must not be null.");let n=new Qn(s);n.order=r.readInt(!0),t=r.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[r.readInt(!0)]);n.target=i.bones[r.readInt(!0)];let a=r.readByte();n.skinRequired=!!(1&a),n.bendDirection=2&a?1:-1,n.compress=!!(4&a),n.stretch=!!(8&a),n.uniform=!!(16&a),32&a&&(n.mix=64&a?r.readFloat():1),128&a&&(n.softness=r.readFloat()*e),i.ikConstraints.push(n)}o=r.readInt(!0);for(let t,s=0;s<o;s++){let s=r.readString();if(!s)throw new Error("Transform constraint data name must not be null.");let n=new ua(s);n.order=r.readInt(!0),t=r.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[r.readInt(!0)]);n.target=i.bones[r.readInt(!0)];let a=r.readByte();n.skinRequired=!!(1&a),n.local=!!(2&a),n.relative=!!(4&a),8&a&&(n.offsetRotation=r.readFloat()),16&a&&(n.offsetX=r.readFloat()*e),32&a&&(n.offsetY=r.readFloat()*e),64&a&&(n.offsetScaleX=r.readFloat()),128&a&&(n.offsetScaleY=r.readFloat()),a=r.readByte(),1&a&&(n.offsetShearY=r.readFloat()),2&a&&(n.mixRotate=r.readFloat()),4&a&&(n.mixX=r.readFloat()),8&a&&(n.mixY=r.readFloat()),16&a&&(n.mixScaleX=r.readFloat()),32&a&&(n.mixScaleY=r.readFloat()),64&a&&(n.mixShearY=r.readFloat()),i.transformConstraints.push(n)}o=r.readInt(!0);for(let t,s=0;s<o;s++){let s=r.readString();if(!s)throw new Error("Path constraint data name must not be null.");let n=new Zn(s);n.order=r.readInt(!0),n.skinRequired=r.readBoolean(),t=r.readInt(!0);for(let e=0;e<t;e++)n.bones.push(i.bones[r.readInt(!0)]);n.target=i.slots[r.readInt(!0)];const a=r.readByte();n.positionMode=1&a,n.spacingMode=a>>1&3,n.rotateMode=a>>3&3,128&a&&(n.offsetRotation=r.readFloat()),n.position=r.readFloat(),n.positionMode==En.Fixed&&(n.position*=e),n.spacing=r.readFloat(),n.spacingMode!=Rn.Length&&n.spacingMode!=Rn.Fixed||(n.spacing*=e),n.mixRotate=r.readFloat(),n.mixX=r.readFloat(),n.mixY=r.readFloat(),i.pathConstraints.push(n)}o=r.readInt(!0);for(let t=0;t<o;t++){const t=r.readString();if(!t)throw new Error("Physics constraint data name must not be null.");const s=new oa(t);s.order=r.readInt(!0),s.bone=i.bones[r.readInt(!0)];let n=r.readByte();s.skinRequired=!!(1&n),2&n&&(s.x=r.readFloat()),4&n&&(s.y=r.readFloat()),8&n&&(s.rotate=r.readFloat()),16&n&&(s.scaleX=r.readFloat()),32&n&&(s.shearX=r.readFloat()),s.limit=(64&n?r.readFloat():5e3)*e,s.step=1/r.readUnsignedByte(),s.inertia=r.readFloat(),s.strength=r.readFloat(),s.damping=r.readFloat(),s.massInverse=128&n?r.readFloat():1,s.wind=r.readFloat(),s.gravity=r.readFloat(),n=r.readByte(),1&n&&(s.inertiaGlobal=!0),2&n&&(s.strengthGlobal=!0),4&n&&(s.dampingGlobal=!0),8&n&&(s.massGlobal=!0),16&n&&(s.windGlobal=!0),32&n&&(s.gravityGlobal=!0),64&n&&(s.mixGlobal=!0),s.mix=128&n?r.readFloat():1,i.physicsConstraints.push(s)}let l=this.readSkin(r,i,!0,a);l&&(i.defaultSkin=l,i.skins.push(l));{let t=i.skins.length;for(ps.setArraySize(i.skins,o=t+r.readInt(!0));t<o;t++){let e=this.readSkin(r,i,!1,a);if(!e)throw new Error("readSkin() should not have returned null.");i.skins[t]=e}}o=this.linkedMeshes.length;for(let t=0;t<o;t++){let e=this.linkedMeshes[t];const r=i.skins[e.skinIndex];if(!e.parent)throw new Error("Linked mesh parent must not be null");let s=r.getAttachment(e.slotIndex,e.parent);if(!s)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?s:e.mesh,e.mesh.setParentMesh(s),null!=e.mesh.region&&e.mesh.updateRegion()}this.linkedMeshes.length=0,o=r.readInt(!0);for(let t=0;t<o;t++){let t=r.readString();if(!t)throw new Error("Event data name must not be null");let e=new aa(t);e.intValue=r.readInt(!1),e.floatValue=r.readFloat(),e.stringValue=r.readString(),e.audioPath=r.readString(),e.audioPath&&(e.volume=r.readFloat(),e.balance=r.readFloat()),i.events.push(e)}o=r.readInt(!0);for(let t=0;t<o;t++){let t=r.readString();if(!t)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(r,t,i))}return i}readSkin(t,e,i,r){let s=null,n=0;if(i){if(n=t.readInt(!0),0==n)return null;s=new ca("default")}else{let i=t.readString();if(!i)throw new Error("Skin name must not be null.");s=new ca(i),r&&us.rgba8888ToColor(s.color,t.readInt32()),s.bones.length=t.readInt(!0);for(let i=0,r=s.bones.length;i<r;i++)s.bones[i]=e.bones[t.readInt(!0)];for(let i=0,r=t.readInt(!0);i<r;i++)s.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let i=0,r=t.readInt(!0);i<r;i++)s.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let i=0,r=t.readInt(!0);i<r;i++)s.constraints.push(e.pathConstraints[t.readInt(!0)]);for(let i=0,r=t.readInt(!0);i<r;i++)s.constraints.push(e.physicsConstraints[t.readInt(!0)]);n=t.readInt(!0)}for(let i=0;i<n;i++){let i=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("Attachment name must not be null");let a=this.readAttachment(t,e,s,i,n,r);a&&s.setAttachment(i,n,a)}}return s}readAttachment(t,e,i,r,s,n){let a=this.scale,o=t.readByte();const l=8&o?t.readStringRef():s;if(!l)throw new Error("Attachment name must not be null");switch(7&o){case Yn.Region:{let e=16&o?t.readStringRef():null;const r=32&o?t.readInt32():4294967295,s=64&o?this.readSequence(t):null;let n=128&o?t.readFloat():0,h=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat(),f=t.readFloat(),p=t.readFloat();e||(e=l);let m=this.attachmentLoader.newRegionAttachment(i,l,e,s);return m?(m.path=e,m.x=h*a,m.y=c*a,m.scaleX=d,m.scaleY=u,m.rotation=n,m.width=f*a,m.height=p*a,us.rgba8888ToColor(m.color,r),m.sequence=s,null==s&&m.updateRegion(),m):null}case Yn.BoundingBox:{let e=this.readVertices(t,!!(16&o)),r=n?t.readInt32():0,s=this.attachmentLoader.newBoundingBoxAttachment(i,l);return s?(s.worldVerticesLength=e.length,s.vertices=e.vertices,s.bones=e.bones,n&&us.rgba8888ToColor(s.color,r),s):null}case Yn.Mesh:{let e=16&o?t.readStringRef():l;const r=32&o?t.readInt32():4294967295,s=64&o?this.readSequence(t):null,h=t.readInt(!0),c=this.readVertices(t,!!(128&o)),d=this.readFloatArray(t,c.length,1),u=this.readShortArray(t,3*(c.length-h-2));let f=[],p=0,m=0;n&&(f=this.readShortArray(t,t.readInt(!0)),p=t.readFloat(),m=t.readFloat()),e||(e=l);let g=this.attachmentLoader.newMeshAttachment(i,l,e,s);return g?(g.path=e,us.rgba8888ToColor(g.color,r),g.bones=c.bones,g.vertices=c.vertices,g.worldVerticesLength=c.length,g.triangles=u,g.regionUVs=d,null==s&&g.updateRegion(),g.hullLength=h<<1,g.sequence=s,n&&(g.edges=f,g.width=p*a,g.height=m*a),g):null}case Yn.LinkedMesh:{const e=16&o?t.readStringRef():l;if(null==e)throw new Error("Path of linked mesh must not be null");const s=32&o?t.readInt32():4294967295,h=64&o?this.readSequence(t):null,c=!!(128&o),d=t.readInt(!0),u=t.readStringRef();let f=0,p=0;n&&(f=t.readFloat(),p=t.readFloat());let m=this.attachmentLoader.newMeshAttachment(i,l,e,h);return m?(m.path=e,us.rgba8888ToColor(m.color,s),m.sequence=h,n&&(m.width=f*a,m.height=p*a),this.linkedMeshes.push(new ma(m,d,r,u,c)),m):null}case Yn.Path:{const e=!!(16&o),r=!!(32&o),s=this.readVertices(t,!!(64&o)),h=ps.newArray(s.length/6,0);for(let e=0,i=h.length;e<i;e++)h[e]=t.readFloat()*a;const c=n?t.readInt32():0,d=this.attachmentLoader.newPathAttachment(i,l);return d?(d.closed=e,d.constantSpeed=r,d.worldVerticesLength=s.length,d.vertices=s.vertices,d.bones=s.bones,d.lengths=h,n&&us.rgba8888ToColor(d.color,c),d):null}case Yn.Point:{const e=t.readFloat(),r=t.readFloat(),s=t.readFloat(),o=n?t.readInt32():0,h=this.attachmentLoader.newPointAttachment(i,l);return h?(h.x=r*a,h.y=s*a,h.rotation=e,n&&us.rgba8888ToColor(h.color,o),h):null}case Yn.Clipping:{const r=t.readInt(!0),s=this.readVertices(t,!!(16&o));let a=n?t.readInt32():0,h=this.attachmentLoader.newClippingAttachment(i,l);return h?(h.endSlot=e.slots[r],h.worldVerticesLength=s.length,h.vertices=s.vertices,h.bones=s.bones,n&&us.rgba8888ToColor(h.color,a),h):null}}return null}readSequence(t){let e=new ws(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readVertices(t,e){const i=this.scale,r=t.readInt(!0),s=new ga;if(s.length=r<<1,!e)return s.vertices=this.readFloatArray(t,s.length,i),s;let n=new Array,a=new Array;for(let e=0;e<r;e++){let e=t.readInt(!0);a.push(e);for(let r=0;r<e;r++)a.push(t.readInt(!0)),n.push(t.readFloat()*i),n.push(t.readFloat()*i),n.push(t.readFloat())}return s.vertices=ps.toFloatArray(n),s.bones=a,s}readFloatArray(t,e,i){let r=new Array(e);if(1==i)for(let i=0;i<e;i++)r[i]=t.readFloat();else for(let s=0;s<e;s++)r[s]=t.readFloat()*i;return r}readShortArray(t,e){let i=new Array(e);for(let r=0;r<e;r++)i[r]=t.readInt(!0);return i}readAnimation(t,e,i){t.readInt(!0);let r=new Array,s=this.scale;for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,s=t.readInt(!0);i<s;i++){let i=t.readByte(),s=t.readInt(!0),n=s-1;switch(i){case Ra:{let i=new Gs(s,e);for(let e=0;e<s;e++)i.setFrame(e,t.readFloat(),t.readStringRef());r.push(i);break}case Fa:{let i=t.readInt(!0),a=new Ns(s,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,d),e!=n;e++){let r=t.readFloat(),s=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;switch(t.readByte()){case Ka:a.setStepped(e);break;case Ja:wa(t,a,i++,e,0,o,r,l,s,1),wa(t,a,i++,e,1,o,r,h,n,1),wa(t,a,i++,e,2,o,r,c,u,1),wa(t,a,i++,e,3,o,r,d,f,1)}o=r,l=s,h=n,c=u,d=f}r.push(a);break}case Pa:{let i=t.readInt(!0),a=new Ws(s,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c),e!=n;e++){let r=t.readFloat(),s=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255;switch(t.readByte()){case Ka:a.setStepped(e);break;case Ja:wa(t,a,i++,e,0,o,r,l,s,1),wa(t,a,i++,e,1,o,r,h,n,1),wa(t,a,i++,e,2,o,r,c,d,1)}o=r,l=s,h=n,c=d}r.push(a);break}case La:{let i=t.readInt(!0),a=new Us(s,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,d,u,f,p),e!=n;e++){let r=t.readFloat(),s=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255;switch(t.readByte()){case Ka:a.setStepped(e);break;case Ja:wa(t,a,i++,e,0,o,r,l,s,1),wa(t,a,i++,e,1,o,r,h,n,1),wa(t,a,i++,e,2,o,r,c,m,1),wa(t,a,i++,e,3,o,r,d,g,1),wa(t,a,i++,e,4,o,r,u,b,1),wa(t,a,i++,e,5,o,r,f,x,1),wa(t,a,i++,e,6,o,r,p,w,1)}o=r,l=s,h=n,c=m,d=g,u=b,f=x,p=w}r.push(a);break}case Ya:{let i=t.readInt(!0),a=new qs(s,i,e),o=t.readFloat(),l=t.readUnsignedByte()/255,h=t.readUnsignedByte()/255,c=t.readUnsignedByte()/255,d=t.readUnsignedByte()/255,u=t.readUnsignedByte()/255,f=t.readUnsignedByte()/255;for(let e=0,i=0;a.setFrame(e,o,l,h,c,d,u,f),e!=n;e++){let r=t.readFloat(),s=t.readUnsignedByte()/255,n=t.readUnsignedByte()/255,p=t.readUnsignedByte()/255,m=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255;switch(t.readByte()){case Ka:a.setStepped(e);break;case Ja:wa(t,a,i++,e,0,o,r,l,s,1),wa(t,a,i++,e,1,o,r,h,n,1),wa(t,a,i++,e,2,o,r,c,p,1),wa(t,a,i++,e,3,o,r,d,m,1),wa(t,a,i++,e,4,o,r,u,g,1),wa(t,a,i++,e,5,o,r,f,b,1)}o=r,l=s,h=n,c=p,d=m,u=g,f=b}r.push(a);break}case Ba:{let i=new zs(s,t.readInt(!0),e),a=t.readFloat(),o=t.readUnsignedByte()/255;for(let e=0,r=0;i.setFrame(e,a,o),e!=n;e++){let s=t.readFloat(),n=t.readUnsignedByte()/255;switch(t.readByte()){case Ka:i.setStepped(e);break;case Ja:wa(t,i,r++,e,0,a,s,o,n,1)}a=s,o=n}r.push(i)}}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0);for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readByte(),n=t.readInt(!0);if(i==Ea){let i=new Vs(n,e);for(let e=0;e<n;e++)i.setFrame(e,t.readFloat(),t.readByte());r.push(i);continue}let a=t.readInt(!0);switch(i){case ya:r.push(ba(t,new Es(n,a,e),1));break;case va:r.push(xa(t,new Rs(n,a,e),s));break;case _a:r.push(ba(t,new Fs(n,a,e),s));break;case Aa:r.push(ba(t,new Ps(n,a,e),s));break;case Sa:r.push(xa(t,new Ls(n,a,e),1));break;case Ta:r.push(ba(t,new Ys(n,a,e),1));break;case ka:r.push(ba(t,new Bs(n,a,e),1));break;case Ca:r.push(xa(t,new Os(n,a,e),1));break;case Ia:r.push(ba(t,new Xs(n,a,e),1));break;case Ma:r.push(ba(t,new Ds(n,a,e),1))}}}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),n=i-1,a=new Ks(i,t.readInt(!0),e),o=t.readByte(),l=t.readFloat(),h=1&o?2&o?t.readFloat():1:0,c=4&o?t.readFloat()*s:0;for(let e=0,i=0;a.setFrame(e,l,h,c,8&o?1:-1,!!(16&o),!!(32&o)),e!=n;e++){o=t.readByte();const r=t.readFloat(),n=1&o?2&o?t.readFloat():1:0,d=4&o?t.readFloat()*s:0;64&o?a.setStepped(e):128&o&&(wa(t,a,i++,e,0,l,r,h,n,1),wa(t,a,i++,e,1,l,r,c,d,s)),l=r,h=n,c=d}r.push(a)}for(let e=0,i=t.readInt(!0);e<i;e++){let e=t.readInt(!0),i=t.readInt(!0),s=i-1,n=new Js(i,t.readInt(!0),e),a=t.readFloat(),o=t.readFloat(),l=t.readFloat(),h=t.readFloat(),c=t.readFloat(),d=t.readFloat(),u=t.readFloat();for(let e=0,i=0;n.setFrame(e,a,o,l,h,c,d,u),e!=s;e++){let r=t.readFloat(),s=t.readFloat(),f=t.readFloat(),p=t.readFloat(),m=t.readFloat(),g=t.readFloat(),b=t.readFloat();switch(t.readByte()){case Ka:n.setStepped(e);break;case Ja:wa(t,n,i++,e,0,a,r,o,s,1),wa(t,n,i++,e,1,a,r,l,f,1),wa(t,n,i++,e,2,a,r,h,p,1),wa(t,n,i++,e,3,a,r,c,m,1),wa(t,n,i++,e,4,a,r,d,g,1),wa(t,n,i++,e,5,a,r,u,b,1)}a=r,o=s,l=f,h=p,c=m,d=g,u=b}r.push(n)}for(let e=0,n=t.readInt(!0);e<n;e++){let e=t.readInt(!0),n=i.pathConstraints[e];for(let i=0,a=t.readInt(!0);i<a;i++){const i=t.readByte(),a=t.readInt(!0),o=t.readInt(!0);switch(i){case Da:r.push(ba(t,new Qs(a,o,e),n.positionMode==En.Fixed?s:1));break;case Va:r.push(ba(t,new Zs(a,o,e),n.spacingMode==Rn.Length||n.spacingMode==Rn.Fixed?s:1));break;case Na:let i=new tn(a,o,e),l=t.readFloat(),h=t.readFloat(),c=t.readFloat(),d=t.readFloat();for(let e=0,r=0,s=i.getFrameCount()-1;i.setFrame(e,l,h,c,d),e!=s;e++){let s=t.readFloat(),n=t.readFloat(),a=t.readFloat(),o=t.readFloat();switch(t.readByte()){case Ka:i.setStepped(e);break;case Ja:wa(t,i,r++,e,0,l,s,h,n,1),wa(t,i,r++,e,1,l,s,c,a,1),wa(t,i,r++,e,2,l,s,d,o,1)}l=s,h=n,c=a,d=o}r.push(i)}}}for(let e=0,i=t.readInt(!0);e<i;e++){const e=t.readInt(!0)-1;for(let i=0,s=t.readInt(!0);i<s;i++){const i=t.readByte(),s=t.readInt(!0);if(i==$a){const i=new cn(s,e);for(let e=0;e<s;e++)i.setFrame(e,t.readFloat());r.push(i);continue}const n=t.readInt(!0);switch(i){case Wa:r.push(ba(t,new rn(s,n,e),1));break;case za:r.push(ba(t,new sn(s,n,e),1));break;case Ua:r.push(ba(t,new nn(s,n,e),1));break;case qa:r.push(ba(t,new an(s,n,e),1));break;case Ga:r.push(ba(t,new on(s,n,e),1));break;case ja:r.push(ba(t,new ln(s,n,e),1));break;case Ha:r.push(ba(t,new hn(s,n,e),1))}}}for(let e=0,n=t.readInt(!0);e<n;e++){let e=i.skins[t.readInt(!0)];for(let i=0,n=t.readInt(!0);i<n;i++){let i=t.readInt(!0);for(let n=0,a=t.readInt(!0);n<a;n++){let n=t.readStringRef();if(!n)throw new Error("attachmentName must not be null.");let a=e.getAttachment(i,n),o=t.readByte(),l=t.readInt(!0),h=l-1;switch(o){case Oa:{let e=a,n=e.bones,o=e.vertices,c=n?o.length/3*2:o.length,d=t.readInt(!0),u=new js(l,d,i,e),f=t.readFloat();for(let e=0,i=0;;e++){let r,a=t.readInt(!0);if(0==a)r=n?ps.newFloatArray(c):o;else{r=ps.newFloatArray(c);let e=t.readInt(!0);if(a+=e,1==s)for(let i=e;i<a;i++)r[i]=t.readFloat();else for(let i=e;i<a;i++)r[i]=t.readFloat()*s;if(!n)for(let t=0,e=r.length;t<e;t++)r[t]+=o[t]}if(u.setFrame(e,f,r),e==h)break;let l=t.readFloat();switch(t.readByte()){case Ka:u.setStepped(e);break;case Ja:wa(t,u,i++,e,0,f,l,0,1,1)}f=l}r.push(u);break}case Xa:{let e=new dn(l,i,a);for(let i=0;i<l;i++){let r=t.readFloat(),s=t.readInt32();e.setFrame(i,r,vs[15&s],s>>4,t.readFloat())}r.push(e);break}}}}}let n=t.readInt(!0);if(n>0){let e=new $s(n),s=i.slots.length;for(let i=0;i<n;i++){let r=t.readFloat(),n=t.readInt(!0),a=ps.newArray(s,0);for(let t=s-1;t>=0;t--)a[t]=-1;let o=ps.newArray(s-n,0),l=0,h=0;for(let e=0;e<n;e++){let e=t.readInt(!0);for(;l!=e;)o[h++]=l++;a[l+t.readInt(!0)]=l++}for(;l<s;)o[h++]=l++;for(let t=s-1;t>=0;t--)-1==a[t]&&(a[t]=o[--h]);e.setFrame(i,r,a)}r.push(e)}let a=t.readInt(!0);if(a>0){let e=new Hs(a);for(let r=0;r<a;r++){let s=t.readFloat(),n=i.events[t.readInt(!0)],a=new na(s,n);a.intValue=t.readInt(!1),a.floatValue=t.readFloat(),a.stringValue=t.readString(),null==a.stringValue&&(a.stringValue=n.stringValue),a.data.audioPath&&(a.volume=t.readFloat(),a.balance=t.readFloat()),e.setFrame(r,a)}r.push(e)}let o=0;for(let t=0,e=r.length;t<e;t++)o=Math.max(o,r[t].getDuration());return new _s(e,r,o)}}class pa{strings;index;buffer;constructor(t,e=new Array,i=0,r=new DataView(t instanceof ArrayBuffer?t:t.buffer)){this.strings=e,this.index=i,this.buffer=r}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){let t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),i=127&e;return 128&e&&(e=this.readByte(),i|=(127&e)<<7,128&e&&(e=this.readByte(),i|=(127&e)<<14,128&e&&(e=this.readByte(),i|=(127&e)<<21,128&e&&(e=this.readByte(),i|=(127&e)<<28)))),t?i:i>>>1^-(1&i)}readStringRef(){let t=this.readInt(!0);return 0==t?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let i=0;i<t;){let t=this.readUnsignedByte();switch(t>>4){case 12:case 13:e+=String.fromCharCode((31&t)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&t)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(t),i++}}return e}readFloat(){let t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return 0!=this.readByte()}}class ma{parent;skinIndex;slotIndex;mesh;inheritTimeline;constructor(t,e,i,r,s){this.mesh=t,this.skinIndex=e,this.slotIndex=i,this.parent=r,this.inheritTimeline=s}}class ga{bones;vertices;length;constructor(t=null,e=null,i=0){this.bones=t,this.vertices=e,this.length=i}}function ba(t,e,i){let r=t.readFloat(),s=t.readFloat()*i;for(let n=0,a=0,o=e.getFrameCount()-1;e.setFrame(n,r,s),n!=o;n++){let o=t.readFloat(),l=t.readFloat()*i;switch(t.readByte()){case Ka:e.setStepped(n);break;case Ja:wa(t,e,a++,n,0,r,o,s,l,i)}r=o,s=l}return e}function xa(t,e,i){let r=t.readFloat(),s=t.readFloat()*i,n=t.readFloat()*i;for(let a=0,o=0,l=e.getFrameCount()-1;e.setFrame(a,r,s,n),a!=l;a++){let l=t.readFloat(),h=t.readFloat()*i,c=t.readFloat()*i;switch(t.readByte()){case Ka:e.setStepped(a);break;case Ja:wa(t,e,o++,a,0,r,l,s,h,i),wa(t,e,o++,a,1,r,l,n,c,i)}r=l,s=h,n=c}return e}function wa(t,e,i,r,s,n,a,o,l,h){e.setBezier(i,r,s,n,o,t.readFloat(),t.readFloat()*h,t.readFloat(),t.readFloat()*h,a,l)}!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(Yn||(Yn={}));const ya=0,va=1,_a=2,Aa=3,Sa=4,Ta=5,ka=6,Ca=7,Ia=8,Ma=9,Ea=10,Ra=0,Fa=1,Pa=2,La=3,Ya=4,Ba=5,Oa=0,Xa=1,Da=0,Va=1,Na=2,Wa=0,za=1,Ua=2,qa=4,Ga=5,ja=6,Ha=7,$a=8,Ka=1,Ja=2;class Qa{minX=0;minY=0;maxX=0;maxY=0;boundingBoxes=new Array;polygons=new Array;polygonPool=new ms(()=>ps.newFloatArray(16));update(t,e){if(!t)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,r=this.polygons,s=this.polygonPool,n=t.slots,a=n.length;i.length=0,s.freeAll(r),r.length=0;for(let t=0;t<a;t++){let e=n[t];if(!e.bone.active)continue;let a=e.getAttachment();if(a instanceof Sn){let t=a;i.push(t);let n=s.obtain();n.length!=t.worldVerticesLength&&(n=ps.newFloatArray(t.worldVerticesLength)),r.push(n),t.computeWorldVertices(e,0,t.worldVerticesLength,n,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,s=this.polygons;for(let n=0,a=s.length;n<a;n++){let a=s[n],o=a;for(let s=0,n=a.length;s<n;s+=2){let n=o[s],a=o[s+1];t=Math.min(t,n),e=Math.min(e,a),i=Math.max(i,n),r=Math.max(r,a)}}this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,i,r){let s=this.minX,n=this.minY,a=this.maxX,o=this.maxY;if(t<=s&&i<=s||e<=n&&r<=n||t>=a&&i>=a||e>=o&&r>=o)return!1;let l=(r-e)/(i-t),h=l*(s-t)+e;if(h>n&&h<o)return!0;if(h=l*(a-t)+e,h>n&&h<o)return!0;let c=(n-e)/l+t;return c>s&&c<a||(c=(o-e)/l+t,c>s&&c<a)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){let i=this.polygons;for(let r=0,s=i.length;r<s;r++)if(this.containsPointPolygon(i[r],t,e))return this.boundingBoxes[r];return null}containsPointPolygon(t,e,i){let r=t,s=t.length,n=s-2,a=!1;for(let t=0;t<s;t+=2){let s=r[t+1],o=r[n+1];if(s<i&&o>=i||o<i&&s>=i){let l=r[t];l+(i-s)/(o-s)*(r[n]-l)<e&&(a=!a)}n=t}return a}intersectsSegment(t,e,i,r){let s=this.polygons;for(let n=0,a=s.length;n<a;n++)if(this.intersectsSegmentPolygon(s[n],t,e,i,r))return this.boundingBoxes[n];return null}intersectsSegmentPolygon(t,e,i,r,s){let n=t,a=t.length,o=e-r,l=i-s,h=e*s-i*r,c=n[a-2],d=n[a-1];for(let t=0;t<a;t+=2){let a=n[t],u=n[t+1],f=c*u-d*a,p=c-a,m=d-u,g=o*m-l*p,b=(h*p-o*f)/g;if((b>=c&&b<=a||b>=a&&b<=c)&&(b>=e&&b<=r||b>=r&&b<=e)){let t=(h*m-l*f)/g;if((t>=d&&t<=u||t>=u&&t<=d)&&(t>=i&&t<=s||t>=s&&t<=i))return!0}c=a,d=u}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");let e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class Za{convexPolygons=new Array;convexPolygonsIndices=new Array;indicesArray=new Array;isConcaveArray=new Array;triangles=new Array;polygonPool=new ms(()=>new Array);polygonIndicesPool=new ms(()=>new Array);triangulate(t){let e=t,i=t.length>>1,r=this.indicesArray;r.length=0;for(let t=0;t<i;t++)r[t]=t;let s=this.isConcaveArray;s.length=0;for(let t=0,n=i;t<n;++t)s[t]=Za.isConcave(t,i,e,r);let n=this.triangles;for(n.length=0;i>3;){let t=i-1,a=0,o=1;for(;;){t:if(!s[a]){let n=r[t]<<1,l=r[a]<<1,h=r[o]<<1,c=e[n],d=e[n+1],u=e[l],f=e[l+1],p=e[h],m=e[h+1];for(let n=(o+1)%i;n!=t;n=(n+1)%i){if(!s[n])continue;let t=r[n]<<1,i=e[t],a=e[t+1];if(Za.positiveArea(p,m,c,d,i,a)&&Za.positiveArea(c,d,u,f,i,a)&&Za.positiveArea(u,f,p,m,i,a))break t}break}if(0==o){do{if(!s[a])break;a--}while(a>0);break}t=a,a=o,o=(o+1)%i}n.push(r[(i+a-1)%i]),n.push(r[a]),n.push(r[(a+1)%i]),r.splice(a,1),s.splice(a,1),i--;let l=(i+a-1)%i,h=a==i?0:a;s[l]=Za.isConcave(l,i,e,r),s[h]=Za.isConcave(h,i,e,r)}return 3==i&&(n.push(r[2]),n.push(r[0]),n.push(r[1])),n}decompose(t,e){let i=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;let s=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(s),s.length=0;let n=this.polygonIndicesPool.obtain();n.length=0;let a=this.polygonPool.obtain();a.length=0;let o=-1,l=0;for(let t=0,h=e.length;t<h;t+=3){let h=e[t]<<1,c=e[t+1]<<1,d=e[t+2]<<1,u=i[h],f=i[h+1],p=i[c],m=i[c+1],g=i[d],b=i[d+1],x=!1;if(o==h){let t=a.length-4,e=Za.winding(a[t],a[t+1],a[t+2],a[t+3],g,b),i=Za.winding(g,b,a[0],a[1],a[2],a[3]);e==l&&i==l&&(a.push(g),a.push(b),n.push(d),x=!0)}x||(a.length>0?(r.push(a),s.push(n)):(this.polygonPool.free(a),this.polygonIndicesPool.free(n)),a=this.polygonPool.obtain(),a.length=0,a.push(u),a.push(f),a.push(p),a.push(m),a.push(g),a.push(b),n=this.polygonIndicesPool.obtain(),n.length=0,n.push(h),n.push(c),n.push(d),l=Za.winding(u,f,p,m,g,b),o=h)}a.length>0&&(r.push(a),s.push(n));for(let t=0,e=r.length;t<e;t++){if(n=s[t],0==n.length)continue;let i=n[0],o=n[n.length-1];a=r[t];let l=a.length-4,h=a[l],c=a[l+1],d=a[l+2],u=a[l+3],f=a[0],p=a[1],m=a[2],g=a[3],b=Za.winding(h,c,d,u,f,p);for(let l=0;l<e;l++){if(l==t)continue;let e=s[l];if(3!=e.length)continue;let x=e[0],w=e[1],y=e[2],v=r[l],_=v[v.length-2],A=v[v.length-1];if(x!=i||w!=o)continue;let S=Za.winding(h,c,d,u,_,A),T=Za.winding(_,A,f,p,m,g);S==b&&T==b&&(v.length=0,e.length=0,a.push(_),a.push(A),n.push(y),h=d,c=u,d=_,u=A,l=0)}}for(let t=r.length-1;t>=0;t--)a=r[t],0==a.length&&(r.splice(t,1),this.polygonPool.free(a),n=s[t],s.splice(t,1),this.polygonIndicesPool.free(n));return r}static isConcave(t,e,i,r){let s=r[(e+t-1)%e]<<1,n=r[t]<<1,a=r[(t+1)%e]<<1;return!this.positiveArea(i[s],i[s+1],i[n],i[n+1],i[a],i[a+1])}static positiveArea(t,e,i,r,s,n){return t*(n-r)+i*(e-n)+s*(r-e)>=0}static winding(t,e,i,r,s,n){let a=i-t,o=r-e;return s*o-n*a+a*e-t*o>=0?1:-1}}class to{triangulator=new Za;clippingPolygon=new Array;clipOutput=new Array;clippedVertices=new Array;clippedUVs=new Array;clippedTriangles=new Array;scratch=new Array;clipAttachment=null;clippingPolygons=null;clipStart(t,e){if(this.clipAttachment)return 0;this.clipAttachment=e;let i=e.worldVerticesLength,r=ps.setArraySize(this.clippingPolygon,i);e.computeWorldVertices(t,0,i,r,0,2);let s=this.clippingPolygon;to.makeClockwise(s);let n=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s));for(let t=0,e=n.length;t<e;t++){let e=n[t];to.makeClockwise(e),e.push(e[0]),e.push(e[1])}return n.length}clipEndWithSlot(t){this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return null!=this.clipAttachment}clipTriangles(t,e,i,r,s,n,a,o){let l,h,c,d,u,f;"number"==typeof e?(l=i,h=r,c=s,d=n,u=a,f=o):(l=e,h=i,c=r,d=s,u=n,f=a),c&&d&&u&&"boolean"==typeof f?this.clipTrianglesRender(t,l,h,c,d,u,f):this.clipTrianglesNoRender(t,l,h)}clipTrianglesNoRender(t,e,i){let r=this.clipOutput,s=this.clippedVertices,n=this.clippedTriangles,a=this.clippingPolygons,o=a.length,l=0;s.length=0,n.length=0;for(let h=0;h<i;h+=3){let i=e[h]<<1,c=t[i],d=t[i+1];i=e[h+1]<<1;let u=t[i],f=t[i+1];i=e[h+2]<<1;let p=t[i],m=t[i+1];for(let t=0;t<o;t++){let e=s.length;if(!this.clip(c,d,u,f,p,m,a[t],r)){let t=ps.setArraySize(s,e+6);t[e]=c,t[e+1]=d,t[e+2]=u,t[e+3]=f,t[e+4]=p,t[e+5]=m,e=n.length;let i=ps.setArraySize(n,e+3);i[e]=l,i[e+1]=l+1,i[e+2]=l+2,l+=3;break}{let t=r.length;if(0==t)continue;let i=t>>1,a=this.clipOutput,o=ps.setArraySize(s,e+2*i);for(let i=0;i<t;i+=2,e+=2){let t=a[i],r=a[i+1];o[e]=t,o[e+1]=r}e=n.length;let h=ps.setArraySize(n,e+3*(i-2));i--;for(let t=1;t<i;t++,e+=3)h[e]=l,h[e+1]=l+t,h[e+2]=l+t+1;l+=i+1}}}}clipTrianglesRender(t,e,i,r,s,n,a){let o=this.clipOutput,l=this.clippedVertices,h=this.clippedTriangles,c=this.clippingPolygons,d=c.length,u=a?12:8,f=0;l.length=0,h.length=0;for(let p=0;p<i;p+=3){let i=e[p]<<1,m=t[i],g=t[i+1],b=r[i],x=r[i+1];i=e[p+1]<<1;let w=t[i],y=t[i+1],v=r[i],_=r[i+1];i=e[p+2]<<1;let A=t[i],S=t[i+1],T=r[i],k=r[i+1];for(let t=0;t<d;t++){let e=l.length;if(!this.clip(m,g,w,y,A,S,c[t],o)){let t=ps.setArraySize(l,e+3*u);t[e]=m,t[e+1]=g,t[e+2]=s.r,t[e+3]=s.g,t[e+4]=s.b,t[e+5]=s.a,a?(t[e+6]=b,t[e+7]=x,t[e+8]=n.r,t[e+9]=n.g,t[e+10]=n.b,t[e+11]=n.a,t[e+12]=w,t[e+13]=y,t[e+14]=s.r,t[e+15]=s.g,t[e+16]=s.b,t[e+17]=s.a,t[e+18]=v,t[e+19]=_,t[e+20]=n.r,t[e+21]=n.g,t[e+22]=n.b,t[e+23]=n.a,t[e+24]=A,t[e+25]=S,t[e+26]=s.r,t[e+27]=s.g,t[e+28]=s.b,t[e+29]=s.a,t[e+30]=T,t[e+31]=k,t[e+32]=n.r,t[e+33]=n.g,t[e+34]=n.b,t[e+35]=n.a):(t[e+6]=b,t[e+7]=x,t[e+8]=w,t[e+9]=y,t[e+10]=s.r,t[e+11]=s.g,t[e+12]=s.b,t[e+13]=s.a,t[e+14]=v,t[e+15]=_,t[e+16]=A,t[e+17]=S,t[e+18]=s.r,t[e+19]=s.g,t[e+20]=s.b,t[e+21]=s.a,t[e+22]=T,t[e+23]=k),e=h.length;let i=ps.setArraySize(h,e+3);i[e]=f,i[e+1]=f+1,i[e+2]=f+2,f+=3;break}{let t=o.length;if(0==t)continue;let i=y-S,r=A-w,c=m-A,d=S-g,p=1/(i*c+r*(g-S)),C=t>>1,I=this.clipOutput,M=ps.setArraySize(l,e+C*u);for(let o=0;o<t;o+=2,e+=u){let t=I[o],l=I[o+1];M[e]=t,M[e+1]=l,M[e+2]=s.r,M[e+3]=s.g,M[e+4]=s.b,M[e+5]=s.a;let h=t-A,u=l-S,f=(i*h+r*u)*p,m=(d*h+c*u)*p,g=1-f-m;M[e+6]=b*f+v*m+T*g,M[e+7]=x*f+_*m+k*g,a&&(M[e+8]=n.r,M[e+9]=n.g,M[e+10]=n.b,M[e+11]=n.a)}e=h.length;let E=ps.setArraySize(h,e+3*(C-2));C--;for(let t=1;t<C;t++,e+=3)E[e]=f,E[e+1]=f+t,E[e+2]=f+t+1;f+=C+1}}}}clipTrianglesUnpacked(t,e,i,r){let s=this.clipOutput,n=this.clippedVertices,a=this.clippedUVs,o=this.clippedTriangles,l=this.clippingPolygons,h=l.length,c=0;n.length=0,a.length=0,o.length=0;for(let d=0;d<i;d+=3){let i=e[d]<<1,u=t[i],f=t[i+1],p=r[i],m=r[i+1];i=e[d+1]<<1;let g=t[i],b=t[i+1],x=r[i],w=r[i+1];i=e[d+2]<<1;let y=t[i],v=t[i+1],_=r[i],A=r[i+1];for(let t=0;t<h;t++){let e=n.length;if(!this.clip(u,f,g,b,y,v,l[t],s)){let t=ps.setArraySize(n,e+6);t[e]=u,t[e+1]=f,t[e+2]=g,t[e+3]=b,t[e+4]=y,t[e+5]=v;let i=ps.setArraySize(a,e+6);i[e]=p,i[e+1]=m,i[e+2]=x,i[e+3]=w,i[e+4]=_,i[e+5]=A,e=o.length;let r=ps.setArraySize(o,e+3);r[e]=c,r[e+1]=c+1,r[e+2]=c+2,c+=3;break}{let t=s.length;if(0==t)continue;let i=b-v,r=y-g,l=u-y,h=v-f,d=1/(i*l+r*(f-v)),S=t>>1,T=this.clipOutput,k=ps.setArraySize(n,e+2*S),C=ps.setArraySize(a,e+2*S);for(let s=0;s<t;s+=2,e+=2){let t=T[s],n=T[s+1];k[e]=t,k[e+1]=n;let a=t-y,o=n-v,c=(i*a+r*o)*d,u=(h*a+l*o)*d,f=1-c-u;C[e]=p*c+x*u+_*f,C[e+1]=m*c+w*u+A*f}e=o.length;let I=ps.setArraySize(o,e+3*(S-2));S--;for(let t=1;t<S;t++,e+=3)I[e]=c,I[e+1]=c+t,I[e+2]=c+t+1;c+=S+1}}}}clip(t,e,i,r,s,n,a,o){let l,h=o,c=!1;a.length%4>=2?(l=o,o=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(i),l.push(r),l.push(s),l.push(n),l.push(t),l.push(e),o.length=0;let d=a.length-4,u=a;for(let t=0;;t+=2){let e=u[t],i=u[t+1],r=e-u[t+2],s=i-u[t+3],n=o.length,a=l;for(let t=0,n=l.length-2;t<n;){let n=a[t],l=a[t+1];t+=2;let h=a[t],d=a[t+1],u=s*(e-h)>r*(i-d),f=s*(e-n)-r*(i-l);if(f>0){if(u){o.push(h),o.push(d);continue}let t=h-n,e=d-l,i=f/(t*s-e*r);if(!(i>=0&&i<=1)){o.push(h),o.push(d);continue}o.push(n+t*i),o.push(l+e*i)}else if(u){let t=h-n,e=d-l,i=f/(t*s-e*r);if(!(i>=0&&i<=1)){o.push(h),o.push(d);continue}o.push(n+t*i),o.push(l+e*i),o.push(h),o.push(d)}c=!0}if(n==o.length)return h.length=0,!0;if(o.push(o[0]),o.push(o[1]),t==d)break;let f=o;(o=l).length=0,l=f}if(h!=o){h.length=0;for(let t=0,e=o.length-2;t<e;t++)h[t]=o[t]}else h.length=h.length-2;return c}static makeClockwise(t){let e=t,i=t.length,r=e[i-2]*e[1]-e[0]*e[i-1],s=0,n=0,a=0,o=0;for(let t=0,l=i-3;t<l;t+=2)s=e[t],n=e[t+1],a=e[t+2],o=e[t+3],r+=s*o-a*n;if(!(r<0))for(let t=0,r=i-2,s=i>>1;t<s;t+=2){let i=e[t],s=e[t+1],n=r-t;e[t]=e[n],e[t+1]=e[n+1],e[n]=i,e[n+1]=s}}}class eo{attachmentLoader;scale=1;linkedMeshes=new Array;constructor(t){this.attachmentLoader=t}readSkeletonData(t){let e=this.scale,i=new la,r="string"==typeof t?JSON.parse(t):t,s=r.skeleton;if(s&&(i.hash=s.hash,i.version=s.spine,i.x=s.x,i.y=s.y,i.width=s.width,i.height=s.height,i.referenceScale=ao(s,"referenceScale",100)*e,i.fps=s.fps,i.imagesPath=s.images??null,i.audioPath=s.audio??null),r.bones)for(let t=0;t<r.bones.length;t++){let s=r.bones[t],n=null,a=ao(s,"parent",null);a&&(n=i.findBone(a));let o=new Hn(i.bones.length,s.name,n);o.length=ao(s,"length",0)*e,o.x=ao(s,"x",0)*e,o.y=ao(s,"y",0)*e,o.rotation=ao(s,"rotation",0),o.scaleX=ao(s,"scaleX",1),o.scaleY=ao(s,"scaleY",1),o.shearX=ao(s,"shearX",0),o.shearY=ao(s,"shearY",0),o.inherit=ps.enumValue(Mn,ao(s,"inherit","Normal")),o.skinRequired=ao(s,"skin",!1);let l=ao(s,"color",null);l&&o.color.setFromString(l),i.bones.push(o)}if(r.slots)for(let t=0;t<r.slots.length;t++){let e=r.slots[t],s=e.name,n=i.findBone(e.bone);if(!n)throw new Error(`Couldn't find bone ${e.bone} for slot ${s}`);let a=new da(i.slots.length,s,n),o=ao(e,"color",null);o&&a.color.setFromString(o);let l=ao(e,"dark",null);l&&(a.darkColor=us.fromString(l)),a.attachmentName=ao(e,"attachment",null),a.blendMode=ps.enumValue(Ln,ao(e,"blend","normal")),a.visible=ao(e,"visible",!0),i.slots.push(a)}if(r.ik)for(let t=0;t<r.ik.length;t++){let s=r.ik[t],n=new Qn(s.name);n.order=ao(s,"order",0),n.skinRequired=ao(s,"skin",!1);for(let t=0;t<s.bones.length;t++){let e=i.findBone(s.bones[t]);if(!e)throw new Error(`Couldn't find bone ${s.bones[t]} for IK constraint ${s.name}.`);n.bones.push(e)}let a=i.findBone(s.target);if(!a)throw new Error(`Couldn't find target bone ${s.target} for IK constraint ${s.name}.`);n.target=a,n.mix=ao(s,"mix",1),n.softness=ao(s,"softness",0)*e,n.bendDirection=ao(s,"bendPositive",!0)?1:-1,n.compress=ao(s,"compress",!1),n.stretch=ao(s,"stretch",!1),n.uniform=ao(s,"uniform",!1),i.ikConstraints.push(n)}if(r.transform)for(let t=0;t<r.transform.length;t++){let s=r.transform[t],n=new ua(s.name);n.order=ao(s,"order",0),n.skinRequired=ao(s,"skin",!1);for(let t=0;t<s.bones.length;t++){let e=s.bones[t],r=i.findBone(e);if(!r)throw new Error(`Couldn't find bone ${e} for transform constraint ${s.name}.`);n.bones.push(r)}let a=s.target,o=i.findBone(a);if(!o)throw new Error(`Couldn't find target bone ${a} for transform constraint ${s.name}.`);n.target=o,n.local=ao(s,"local",!1),n.relative=ao(s,"relative",!1),n.offsetRotation=ao(s,"rotation",0),n.offsetX=ao(s,"x",0)*e,n.offsetY=ao(s,"y",0)*e,n.offsetScaleX=ao(s,"scaleX",0),n.offsetScaleY=ao(s,"scaleY",0),n.offsetShearY=ao(s,"shearY",0),n.mixRotate=ao(s,"mixRotate",1),n.mixX=ao(s,"mixX",1),n.mixY=ao(s,"mixY",n.mixX),n.mixScaleX=ao(s,"mixScaleX",1),n.mixScaleY=ao(s,"mixScaleY",n.mixScaleX),n.mixShearY=ao(s,"mixShearY",1),i.transformConstraints.push(n)}if(r.path)for(let t=0;t<r.path.length;t++){let s=r.path[t],n=new Zn(s.name);n.order=ao(s,"order",0),n.skinRequired=ao(s,"skin",!1);for(let t=0;t<s.bones.length;t++){let e=s.bones[t],r=i.findBone(e);if(!r)throw new Error(`Couldn't find bone ${e} for path constraint ${s.name}.`);n.bones.push(r)}let a=s.target,o=i.findSlot(a);if(!o)throw new Error(`Couldn't find target slot ${a} for path constraint ${s.name}.`);n.target=o,n.positionMode=ps.enumValue(En,ao(s,"positionMode","Percent")),n.spacingMode=ps.enumValue(Rn,ao(s,"spacingMode","Length")),n.rotateMode=ps.enumValue(Fn,ao(s,"rotateMode","Tangent")),n.offsetRotation=ao(s,"rotation",0),n.position=ao(s,"position",0),n.positionMode==En.Fixed&&(n.position*=e),n.spacing=ao(s,"spacing",0),n.spacingMode!=Rn.Length&&n.spacingMode!=Rn.Fixed||(n.spacing*=e),n.mixRotate=ao(s,"mixRotate",1),n.mixX=ao(s,"mixX",1),n.mixY=ao(s,"mixY",n.mixX),i.pathConstraints.push(n)}if(r.physics)for(let t=0;t<r.physics.length;t++){const s=r.physics[t],n=new oa(s.name);n.order=ao(s,"order",0),n.skinRequired=ao(s,"skin",!1);const a=s.bone,o=i.findBone(a);if(null==o)throw new Error("Physics bone not found: "+a);n.bone=o,n.x=ao(s,"x",0),n.y=ao(s,"y",0),n.rotate=ao(s,"rotate",0),n.scaleX=ao(s,"scaleX",0),n.shearX=ao(s,"shearX",0),n.limit=ao(s,"limit",5e3)*e,n.step=1/ao(s,"fps",60),n.inertia=ao(s,"inertia",1),n.strength=ao(s,"strength",100),n.damping=ao(s,"damping",1),n.massInverse=1/ao(s,"mass",1),n.wind=ao(s,"wind",0),n.gravity=ao(s,"gravity",0),n.mix=ao(s,"mix",1),n.inertiaGlobal=ao(s,"inertiaGlobal",!1),n.strengthGlobal=ao(s,"strengthGlobal",!1),n.dampingGlobal=ao(s,"dampingGlobal",!1),n.massGlobal=ao(s,"massGlobal",!1),n.windGlobal=ao(s,"windGlobal",!1),n.gravityGlobal=ao(s,"gravityGlobal",!1),n.mixGlobal=ao(s,"mixGlobal",!1),i.physicsConstraints.push(n)}if(r.skins)for(let t=0;t<r.skins.length;t++){let e=r.skins[t],s=new ca(e.name);if(e.bones)for(let t=0;t<e.bones.length;t++){let r=e.bones[t],n=i.findBone(r);if(!n)throw new Error(`Couldn't find bone ${r} for skin ${e.name}.`);s.bones.push(n)}if(e.ik)for(let t=0;t<e.ik.length;t++){let r=e.ik[t],n=i.findIkConstraint(r);if(!n)throw new Error(`Couldn't find IK constraint ${r} for skin ${e.name}.`);s.constraints.push(n)}if(e.transform)for(let t=0;t<e.transform.length;t++){let r=e.transform[t],n=i.findTransformConstraint(r);if(!n)throw new Error(`Couldn't find transform constraint ${r} for skin ${e.name}.`);s.constraints.push(n)}if(e.path)for(let t=0;t<e.path.length;t++){let r=e.path[t],n=i.findPathConstraint(r);if(!n)throw new Error(`Couldn't find path constraint ${r} for skin ${e.name}.`);s.constraints.push(n)}if(e.physics)for(let t=0;t<e.physics.length;t++){let r=e.physics[t],n=i.findPhysicsConstraint(r);if(!n)throw new Error(`Couldn't find physics constraint ${r} for skin ${e.name}.`);s.constraints.push(n)}for(let t in e.attachments){let r=i.findSlot(t);if(!r)throw new Error(`Couldn't find slot ${t} for skin ${e.name}.`);let n=e.attachments[t];for(let t in n){let e=this.readAttachment(n[t],s,r.index,t,i);e&&s.setAttachment(r.index,t,e)}}i.skins.push(s),"default"==s.name&&(i.defaultSkin=s)}for(let t=0,e=this.linkedMeshes.length;t<e;t++){let e=this.linkedMeshes[t],r=e.skin?i.findSkin(e.skin):i.defaultSkin;if(!r)throw new Error(`Skin not found: ${e.skin}`);let s=r.getAttachment(e.slotIndex,e.parent);if(!s)throw new Error(`Parent mesh not found: ${e.parent}`);e.mesh.timelineAttachment=e.inheritTimeline?s:e.mesh,e.mesh.setParentMesh(s),null!=e.mesh.region&&e.mesh.updateRegion()}if(this.linkedMeshes.length=0,r.events)for(let t in r.events){let e=r.events[t],s=new aa(t);s.intValue=ao(e,"int",0),s.floatValue=ao(e,"float",0),s.stringValue=ao(e,"string",""),s.audioPath=ao(e,"audio",null),s.audioPath&&(s.volume=ao(e,"volume",1),s.balance=ao(e,"balance",0)),i.events.push(s)}if(r.animations)for(let t in r.animations){let e=r.animations[t];this.readAnimation(e,t,i)}return i}readAttachment(t,e,i,r,s){let n=this.scale;switch(r=ao(t,"name",r),ao(t,"type","region")){case"region":{let i=ao(t,"path",r),s=this.readSequence(ao(t,"sequence",null)),a=this.attachmentLoader.newRegionAttachment(e,r,i,s);if(!a)return null;a.path=i,a.x=ao(t,"x",0)*n,a.y=ao(t,"y",0)*n,a.scaleX=ao(t,"scaleX",1),a.scaleY=ao(t,"scaleY",1),a.rotation=ao(t,"rotation",0),a.width=t.width*n,a.height=t.height*n,a.sequence=s;let o=ao(t,"color",null);return o&&a.color.setFromString(o),null!=a.region&&a.updateRegion(),a}case"boundingbox":{let i=this.attachmentLoader.newBoundingBoxAttachment(e,r);if(!i)return null;this.readVertices(t,i,t.vertexCount<<1);let s=ao(t,"color",null);return s&&i.color.setFromString(s),i}case"mesh":case"linkedmesh":{let s=ao(t,"path",r),a=this.readSequence(ao(t,"sequence",null)),o=this.attachmentLoader.newMeshAttachment(e,r,s,a);if(!o)return null;o.path=s;let l=ao(t,"color",null);l&&o.color.setFromString(l),o.width=ao(t,"width",0)*n,o.height=ao(t,"height",0)*n,o.sequence=a;let h=ao(t,"parent",null);if(h)return this.linkedMeshes.push(new io(o,ao(t,"skin",null),i,h,ao(t,"timelines",!0))),o;let c=t.uvs;return this.readVertices(t,o,c.length),o.triangles=t.triangles,o.regionUVs=c,null!=o.region&&o.updateRegion(),o.edges=ao(t,"edges",null),o.hullLength=2*ao(t,"hull",0),o}case"path":{let i=this.attachmentLoader.newPathAttachment(e,r);if(!i)return null;i.closed=ao(t,"closed",!1),i.constantSpeed=ao(t,"constantSpeed",!0);let s=t.vertexCount;this.readVertices(t,i,s<<1);let a=ps.newArray(s/3,0);for(let e=0;e<t.lengths.length;e++)a[e]=t.lengths[e]*n;i.lengths=a;let o=ao(t,"color",null);return o&&i.color.setFromString(o),i}case"point":{let i=this.attachmentLoader.newPointAttachment(e,r);if(!i)return null;i.x=ao(t,"x",0)*n,i.y=ao(t,"y",0)*n,i.rotation=ao(t,"rotation",0);let s=ao(t,"color",null);return s&&i.color.setFromString(s),i}case"clipping":{let i=this.attachmentLoader.newClippingAttachment(e,r);if(!i)return null;let n=ao(t,"end",null);n&&(i.endSlot=s.findSlot(n));let a=t.vertexCount;this.readVertices(t,i,a<<1);let o=ao(t,"color",null);return o&&i.color.setFromString(o),i}}return null}readSequence(t){if(null==t)return null;let e=new ws(ao(t,"count",0));return e.start=ao(t,"start",1),e.digits=ao(t,"digits",0),e.setupIndex=ao(t,"setup",0),e}readVertices(t,e,i){let r=this.scale;e.worldVerticesLength=i;let s=t.vertices;if(i==s.length){let t=ps.toFloatArray(s);if(1!=r)for(let e=0,i=s.length;e<i;e++)t[e]*=r;return void(e.vertices=t)}let n=new Array,a=new Array;for(let t=0,e=s.length;t<e;){let e=s[t++];a.push(e);for(let i=t+4*e;t<i;t+=4)a.push(s[t]),n.push(s[t+1]*r),n.push(s[t+2]*r),n.push(s[t+3])}e.bones=a,e.vertices=ps.toFloatArray(n)}readAnimation(t,e,i){let r=this.scale,s=new Array;if(t.slots)for(let e in t.slots){let r=t.slots[e],n=i.findSlot(e);if(!n)throw new Error("Slot not found: "+e);let a=n.index;for(let t in r){let e=r[t];if(!e)continue;let i=e.length;if("attachment"==t){let t=new Gs(i,a);for(let r=0;r<i;r++){let i=e[r];t.setFrame(r,ao(i,"time",0),ao(i,"name",null))}s.push(t)}else if("rgba"==t){let t=new Ns(i,i<<2,a),r=e[0],n=ao(r,"time",0),o=us.fromString(r.color);for(let i=0,s=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,o.a);let a=e[i+1];if(!a){t.shrink(s);break}let l=ao(a,"time",0),h=us.fromString(a.color),c=r.curve;c&&(s=no(c,t,s,i,0,n,l,o.r,h.r,1),s=no(c,t,s,i,1,n,l,o.g,h.g,1),s=no(c,t,s,i,2,n,l,o.b,h.b,1),s=no(c,t,s,i,3,n,l,o.a,h.a,1)),n=l,o=h,r=a}s.push(t)}else if("rgb"==t){let t=new Ws(i,3*i,a),r=e[0],n=ao(r,"time",0),o=us.fromString(r.color);for(let i=0,s=0;;i++){t.setFrame(i,n,o.r,o.g,o.b);let a=e[i+1];if(!a){t.shrink(s);break}let l=ao(a,"time",0),h=us.fromString(a.color),c=r.curve;c&&(s=no(c,t,s,i,0,n,l,o.r,h.r,1),s=no(c,t,s,i,1,n,l,o.g,h.g,1),s=no(c,t,s,i,2,n,l,o.b,h.b,1)),n=l,o=h,r=a}s.push(t)}else if("alpha"==t)s.push(ro(e,new zs(i,i,a),0,1));else if("rgba2"==t){let t=new Us(i,7*i,a),r=e[0],n=ao(r,"time",0),o=us.fromString(r.light),l=us.fromString(r.dark);for(let i=0,s=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,o.a,l.r,l.g,l.b);let a=e[i+1];if(!a){t.shrink(s);break}let h=ao(a,"time",0),c=us.fromString(a.light),d=us.fromString(a.dark),u=r.curve;u&&(s=no(u,t,s,i,0,n,h,o.r,c.r,1),s=no(u,t,s,i,1,n,h,o.g,c.g,1),s=no(u,t,s,i,2,n,h,o.b,c.b,1),s=no(u,t,s,i,3,n,h,o.a,c.a,1),s=no(u,t,s,i,4,n,h,l.r,d.r,1),s=no(u,t,s,i,5,n,h,l.g,d.g,1),s=no(u,t,s,i,6,n,h,l.b,d.b,1)),n=h,o=c,l=d,r=a}s.push(t)}else if("rgb2"==t){let t=new qs(i,6*i,a),r=e[0],n=ao(r,"time",0),o=us.fromString(r.light),l=us.fromString(r.dark);for(let i=0,s=0;;i++){t.setFrame(i,n,o.r,o.g,o.b,l.r,l.g,l.b);let a=e[i+1];if(!a){t.shrink(s);break}let h=ao(a,"time",0),c=us.fromString(a.light),d=us.fromString(a.dark),u=r.curve;u&&(s=no(u,t,s,i,0,n,h,o.r,c.r,1),s=no(u,t,s,i,1,n,h,o.g,c.g,1),s=no(u,t,s,i,2,n,h,o.b,c.b,1),s=no(u,t,s,i,3,n,h,l.r,d.r,1),s=no(u,t,s,i,4,n,h,l.g,d.g,1),s=no(u,t,s,i,5,n,h,l.b,d.b,1)),n=h,o=c,l=d,r=a}s.push(t)}}}if(t.bones)for(let e in t.bones){let n=t.bones[e],a=i.findBone(e);if(!a)throw new Error("Bone not found: "+e);let o=a.index;for(let t in n){let e=n[t],i=e.length;if(0!=i)if("rotate"===t)s.push(ro(e,new Es(i,i,o),0,1));else if("translate"===t){let t=new Rs(i,i<<1,o);s.push(so(e,t,"x","y",0,r))}else if("translatex"===t){let t=new Fs(i,i,o);s.push(ro(e,t,0,r))}else if("translatey"===t){let t=new Ps(i,i,o);s.push(ro(e,t,0,r))}else if("scale"===t){let t=new Ls(i,i<<1,o);s.push(so(e,t,"x","y",1,1))}else if("scalex"===t){let t=new Ys(i,i,o);s.push(ro(e,t,1,1))}else if("scaley"===t){let t=new Bs(i,i,o);s.push(ro(e,t,1,1))}else if("shear"===t){let t=new Os(i,i<<1,o);s.push(so(e,t,"x","y",0,1))}else if("shearx"===t){let t=new Xs(i,i,o);s.push(ro(e,t,0,1))}else if("sheary"===t){let t=new Ds(i,i,o);s.push(ro(e,t,0,1))}else if("inherit"===t){let t=new Vs(i,a.index);for(let i=0;i<e.length;i++){let r=e[i];t.setFrame(i,ao(r,"time",0),ps.enumValue(Mn,ao(r,"inherit","Normal")))}s.push(t)}}}if(t.ik)for(let e in t.ik){let n=t.ik[e],a=n[0];if(!a)continue;let o=i.findIkConstraint(e);if(!o)throw new Error("IK Constraint not found: "+e);let l=i.ikConstraints.indexOf(o),h=new Ks(n.length,n.length<<1,l),c=ao(a,"time",0),d=ao(a,"mix",1),u=ao(a,"softness",0)*r;for(let t=0,e=0;;t++){h.setFrame(t,c,d,u,ao(a,"bendPositive",!0)?1:-1,ao(a,"compress",!1),ao(a,"stretch",!1));let i=n[t+1];if(!i){h.shrink(e);break}let s=ao(i,"time",0),o=ao(i,"mix",1),l=ao(i,"softness",0)*r,f=a.curve;f&&(e=no(f,h,e,t,0,c,s,d,o,1),e=no(f,h,e,t,1,c,s,u,l,r)),c=s,d=o,u=l,a=i}s.push(h)}if(t.transform)for(let e in t.transform){let r=t.transform[e],n=r[0];if(!n)continue;let a=i.findTransformConstraint(e);if(!a)throw new Error("Transform constraint not found: "+e);let o=i.transformConstraints.indexOf(a),l=new Js(r.length,6*r.length,o),h=ao(n,"time",0),c=ao(n,"mixRotate",1),d=ao(n,"mixX",1),u=ao(n,"mixY",d),f=ao(n,"mixScaleX",1),p=ao(n,"mixScaleY",f),m=ao(n,"mixShearY",1);for(let t=0,e=0;;t++){l.setFrame(t,h,c,d,u,f,p,m);let i=r[t+1];if(!i){l.shrink(e);break}let s=ao(i,"time",0),a=ao(i,"mixRotate",1),o=ao(i,"mixX",1),g=ao(i,"mixY",o),b=ao(i,"mixScaleX",1),x=ao(i,"mixScaleY",b),w=ao(i,"mixShearY",1),y=n.curve;y&&(e=no(y,l,e,t,0,h,s,c,a,1),e=no(y,l,e,t,1,h,s,d,o,1),e=no(y,l,e,t,2,h,s,u,g,1),e=no(y,l,e,t,3,h,s,f,b,1),e=no(y,l,e,t,4,h,s,p,x,1),e=no(y,l,e,t,5,h,s,m,w,1)),h=s,c=a,d=o,u=g,f=b,p=x,f=b,n=i}s.push(l)}if(t.path)for(let e in t.path){let n=t.path[e],a=i.findPathConstraint(e);if(!a)throw new Error("Path constraint not found: "+e);let o=i.pathConstraints.indexOf(a);for(let t in n){let e=n[t],i=e[0];if(!i)continue;let l=e.length;if("position"===t){let t=new Qs(l,l,o);s.push(ro(e,t,0,a.positionMode==En.Fixed?r:1))}else if("spacing"===t){let t=new Zs(l,l,o);s.push(ro(e,t,0,a.spacingMode==Rn.Length||a.spacingMode==Rn.Fixed?r:1))}else if("mix"===t){let t=new tn(l,3*l,o),r=ao(i,"time",0),n=ao(i,"mixRotate",1),a=ao(i,"mixX",1),h=ao(i,"mixY",a);for(let s=0,o=0;;s++){t.setFrame(s,r,n,a,h);let l=e[s+1];if(!l){t.shrink(o);break}let c=ao(l,"time",0),d=ao(l,"mixRotate",1),u=ao(l,"mixX",1),f=ao(l,"mixY",u),p=i.curve;p&&(o=no(p,t,o,s,0,r,c,n,d,1),o=no(p,t,o,s,1,r,c,a,u,1),o=no(p,t,o,s,2,r,c,h,f,1)),r=c,n=d,a=u,h=f,i=l}s.push(t)}}}if(t.physics)for(let e in t.physics){let r=t.physics[e],n=-1;if(e.length>0){let t=i.findPhysicsConstraint(e);if(!t)throw new Error("Physics constraint not found: "+e);n=i.physicsConstraints.indexOf(t)}for(let t in r){let e=r[t],i=e[0];if(!i)continue;let a,o=e.length;if("reset"==t){const t=new cn(o,n);for(let r=0;null!=i;i=e[r+1],r++)t.setFrame(r,ao(i,"time",0));s.push(t);continue}if("inertia"==t)a=new rn(o,o,n);else if("strength"==t)a=new sn(o,o,n);else if("damping"==t)a=new nn(o,o,n);else if("mass"==t)a=new an(o,o,n);else if("wind"==t)a=new on(o,o,n);else if("gravity"==t)a=new ln(o,o,n);else{if("mix"!=t)continue;a=new hn(o,o,n)}s.push(ro(e,a,0,1))}}if(t.attachments)for(let e in t.attachments){let n=t.attachments[e],a=i.findSkin(e);if(!a)throw new Error("Skin not found: "+e);for(let t in n){let e=n[t],o=i.findSlot(t);if(!o)throw new Error("Slot not found: "+t);let l=o.index;for(let t in e){let i=e[t],n=a.getAttachment(l,t);for(let t in i){let e=i[t],a=e[0];if(a)if("deform"==t){let t=n.bones,i=n.vertices,o=t?i.length/3*2:i.length,h=new js(e.length,e.length,l,n),c=ao(a,"time",0);for(let s=0,n=0;;s++){let l,d=ao(a,"vertices",null);if(d){l=ps.newFloatArray(o);let e=ao(a,"offset",0);if(ps.arrayCopy(d,0,l,e,d.length),1!=r)for(let t=e,i=t+d.length;t<i;t++)l[t]*=r;if(!t)for(let t=0;t<o;t++)l[t]+=i[t]}else l=t?ps.newFloatArray(o):i;h.setFrame(s,c,l);let u=e[s+1];if(!u){h.shrink(n);break}let f=ao(u,"time",0),p=a.curve;p&&(n=no(p,h,n,s,0,c,f,0,1,1)),c=f,a=u}s.push(h)}else if("sequence"==t){let t=new dn(e.length,l,n),i=0;for(let r=0;r<e.length;r++){let s=ao(a,"delay",i),n=ao(a,"time",0),o=ys[ao(a,"mode","hold")],l=ao(a,"index",0);t.setFrame(r,n,o,l,s),i=s,a=e[r+1]}s.push(t)}}}}}if(t.drawOrder){let e=new $s(t.drawOrder.length),r=i.slots.length,n=0;for(let s=0;s<t.drawOrder.length;s++,n++){let a=t.drawOrder[s],o=null,l=ao(a,"offsets",null);if(l){o=ps.newArray(r,-1);let t=ps.newArray(r-l.length,0),e=0,s=0;for(let r=0;r<l.length;r++){let n=l[r],a=i.findSlot(n.slot);if(!a)throw new Error("Slot not found: "+a);let h=a.index;for(;e!=h;)t[s++]=e++;o[e+n.offset]=e++}for(;e<r;)t[s++]=e++;for(let e=r-1;e>=0;e--)-1==o[e]&&(o[e]=t[--s])}e.setFrame(n,ao(a,"time",0),o)}s.push(e)}if(t.events){let e=new Hs(t.events.length),r=0;for(let s=0;s<t.events.length;s++,r++){let n=t.events[s],a=i.findEvent(n.name);if(!a)throw new Error("Event not found: "+n.name);let o=new na(ps.toSinglePrecision(ao(n,"time",0)),a);o.intValue=ao(n,"int",a.intValue),o.floatValue=ao(n,"float",a.floatValue),o.stringValue=ao(n,"string",a.stringValue),o.data.audioPath&&(o.volume=ao(n,"volume",1),o.balance=ao(n,"balance",0)),e.setFrame(r,o)}s.push(e)}let n=0;for(let t=0,e=s.length;t<e;t++)n=Math.max(n,s[t].getDuration());i.animations.push(new _s(e,s,n))}}class io{parent;skin;slotIndex;mesh;inheritTimeline;constructor(t,e,i,r,s){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=r,this.inheritTimeline=s}}function ro(t,e,i,r){let s=t[0],n=ao(s,"time",0),a=ao(s,"value",i)*r,o=0;for(let l=0;;l++){e.setFrame(l,n,a);let h=t[l+1];if(!h)return e.shrink(o),e;let c=ao(h,"time",0),d=ao(h,"value",i)*r;s.curve&&(o=no(s.curve,e,o,l,0,n,c,a,d,r)),n=c,a=d,s=h}}function so(t,e,i,r,s,n){let a=t[0],o=ao(a,"time",0),l=ao(a,i,s)*n,h=ao(a,r,s)*n,c=0;for(let d=0;;d++){e.setFrame(d,o,l,h);let u=t[d+1];if(!u)return e.shrink(c),e;let f=ao(u,"time",0),p=ao(u,i,s)*n,m=ao(u,r,s)*n,g=a.curve;g&&(c=no(g,e,c,d,0,o,f,l,p,n),c=no(g,e,c,d,1,o,f,h,m,n)),o=f,l=p,h=m,a=u}}function no(t,e,i,r,s,n,a,o,l,h){if("stepped"==t)return e.setStepped(r),i;let c=s<<2,d=t[c],u=t[c+1]*h,f=t[c+2],p=t[c+3]*h;return e.setBezier(i,r,s,n,o,d,u,f,p,a,l),i+1}function ao(t,e,i){return void 0!==t[e]?t[e]:i}var oo;void 0===Math.fround&&(Math.fround=(oo=new Float32Array(1),function(t){return oo[0]=t,oo[0]}));class lo{canvas;gl;restorables=new Array;constructor(t,e={alpha:"true"}){if(t instanceof WebGLRenderingContext||"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext)this.gl=t,this.canvas=this.gl.canvas;else{let i=t;this.gl=i.getContext("webgl2",e)||i.getContext("webgl",e),this.canvas=i,i.addEventListener("webglcontextlost",t=>{t&&t.preventDefault()}),i.addEventListener("webglcontextrestored",t=>{for(let t=0,e=this.restorables.length;t<e;t++)this.restorables[t].restore()})}}addRestorable(t){this.restorables.push(t)}removeRestorable(t){let e=this.restorables.indexOf(t);e>-1&&this.restorables.splice(e,1)}}class ho extends kn{context;texture=null;boundUnit=0;useMipMaps=!1;static DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1;constructor(t,e,i=!1){super(e),this.context=t instanceof lo?t:new lo(t),this.useMipMaps=i,this.restore(),this.context.addRestorable(this)}setFilters(t,e){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,ho.validateMagFilter(e)),this.useMipMaps=ho.usesMipMaps(t),this.useMipMaps&&i.generateMipmap(i.TEXTURE_2D)}static validateMagFilter(t){switch(t){case Cn.MipMapLinearLinear:case Cn.MipMapLinearNearest:case Cn.MipMapNearestLinear:case Cn.MipMapNearestNearest:return Cn.Linear;default:return t}}static usesMipMaps(t){switch(t){case Cn.MipMapLinearLinear:case Cn.MipMapLinearNearest:case Cn.MipMapNearestLinear:case Cn.MipMapNearestNearest:return!0;default:return!1}}setWraps(t,e){let i=this.context.gl;this.bind(),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,e)}update(t){let e=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),ho.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._image),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t&&e.generateMipmap(e.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(t=0){let e=this.context.gl;this.boundUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}}class co{x=0;y=0;z=0;constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}setFrom(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}set(t,e,i){return this.x=t,this.y=e,this.z=i,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}scale(t){return this.x*=t,this.y*=t,this.z*=t,this}normalize(){let t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}multiply(t){let e=t.values;return this.set(this.x*e[uo]+this.y*e[fo]+this.z*e[po]+e[mo],this.x*e[go]+this.y*e[bo]+this.z*e[xo]+e[wo],this.x*e[yo]+this.y*e[vo]+this.z*e[_o]+e[Ao])}project(t){let e=t.values,i=1/(this.x*e[So]+this.y*e[To]+this.z*e[ko]+e[Co]);return this.set((this.x*e[uo]+this.y*e[fo]+this.z*e[po]+e[mo])*i,(this.x*e[go]+this.y*e[bo]+this.z*e[xo]+e[wo])*i,(this.x*e[yo]+this.y*e[vo]+this.z*e[_o]+e[Ao])*i)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(t){let e=t.x-this.x,i=t.y-this.y,r=t.z-this.z;return Math.sqrt(e*e+i*i+r*r)}}const uo=0,fo=4,po=8,mo=12,go=1,bo=5,xo=9,wo=13,yo=2,vo=6,_o=10,Ao=14,So=3,To=7,ko=11,Co=15;class Io{temp=new Float32Array(16);values=new Float32Array(16);static xAxis=new co;static yAxis=new co;static zAxis=new co;static tmpMatrix=new Io;constructor(){let t=this.values;t[uo]=1,t[bo]=1,t[_o]=1,t[Co]=1}set(t){return this.values.set(t),this}transpose(){let t=this.temp,e=this.values;return t[uo]=e[uo],t[fo]=e[go],t[po]=e[yo],t[mo]=e[So],t[go]=e[fo],t[bo]=e[bo],t[xo]=e[vo],t[wo]=e[To],t[yo]=e[po],t[vo]=e[xo],t[_o]=e[_o],t[Ao]=e[ko],t[So]=e[mo],t[To]=e[wo],t[ko]=e[Ao],t[Co]=e[Co],this.set(t)}identity(){let t=this.values;return t[uo]=1,t[fo]=0,t[po]=0,t[mo]=0,t[go]=0,t[bo]=1,t[xo]=0,t[wo]=0,t[yo]=0,t[vo]=0,t[_o]=1,t[Ao]=0,t[So]=0,t[To]=0,t[ko]=0,t[Co]=1,this}invert(){let t=this.values,e=this.temp,i=t[So]*t[vo]*t[xo]*t[mo]-t[yo]*t[To]*t[xo]*t[mo]-t[So]*t[bo]*t[_o]*t[mo]+t[go]*t[To]*t[_o]*t[mo]+t[yo]*t[bo]*t[ko]*t[mo]-t[go]*t[vo]*t[ko]*t[mo]-t[So]*t[vo]*t[po]*t[wo]+t[yo]*t[To]*t[po]*t[wo]+t[So]*t[fo]*t[_o]*t[wo]-t[uo]*t[To]*t[_o]*t[wo]-t[yo]*t[fo]*t[ko]*t[wo]+t[uo]*t[vo]*t[ko]*t[wo]+t[So]*t[bo]*t[po]*t[Ao]-t[go]*t[To]*t[po]*t[Ao]-t[So]*t[fo]*t[xo]*t[Ao]+t[uo]*t[To]*t[xo]*t[Ao]+t[go]*t[fo]*t[ko]*t[Ao]-t[uo]*t[bo]*t[ko]*t[Ao]-t[yo]*t[bo]*t[po]*t[Co]+t[go]*t[vo]*t[po]*t[Co]+t[yo]*t[fo]*t[xo]*t[Co]-t[uo]*t[vo]*t[xo]*t[Co]-t[go]*t[fo]*t[_o]*t[Co]+t[uo]*t[bo]*t[_o]*t[Co];if(0==i)throw new Error("non-invertible matrix");let r=1/i;return e[uo]=t[xo]*t[Ao]*t[To]-t[wo]*t[_o]*t[To]+t[wo]*t[vo]*t[ko]-t[bo]*t[Ao]*t[ko]-t[xo]*t[vo]*t[Co]+t[bo]*t[_o]*t[Co],e[fo]=t[mo]*t[_o]*t[To]-t[po]*t[Ao]*t[To]-t[mo]*t[vo]*t[ko]+t[fo]*t[Ao]*t[ko]+t[po]*t[vo]*t[Co]-t[fo]*t[_o]*t[Co],e[po]=t[po]*t[wo]*t[To]-t[mo]*t[xo]*t[To]+t[mo]*t[bo]*t[ko]-t[fo]*t[wo]*t[ko]-t[po]*t[bo]*t[Co]+t[fo]*t[xo]*t[Co],e[mo]=t[mo]*t[xo]*t[vo]-t[po]*t[wo]*t[vo]-t[mo]*t[bo]*t[_o]+t[fo]*t[wo]*t[_o]+t[po]*t[bo]*t[Ao]-t[fo]*t[xo]*t[Ao],e[go]=t[wo]*t[_o]*t[So]-t[xo]*t[Ao]*t[So]-t[wo]*t[yo]*t[ko]+t[go]*t[Ao]*t[ko]+t[xo]*t[yo]*t[Co]-t[go]*t[_o]*t[Co],e[bo]=t[po]*t[Ao]*t[So]-t[mo]*t[_o]*t[So]+t[mo]*t[yo]*t[ko]-t[uo]*t[Ao]*t[ko]-t[po]*t[yo]*t[Co]+t[uo]*t[_o]*t[Co],e[xo]=t[mo]*t[xo]*t[So]-t[po]*t[wo]*t[So]-t[mo]*t[go]*t[ko]+t[uo]*t[wo]*t[ko]+t[po]*t[go]*t[Co]-t[uo]*t[xo]*t[Co],e[wo]=t[po]*t[wo]*t[yo]-t[mo]*t[xo]*t[yo]+t[mo]*t[go]*t[_o]-t[uo]*t[wo]*t[_o]-t[po]*t[go]*t[Ao]+t[uo]*t[xo]*t[Ao],e[yo]=t[bo]*t[Ao]*t[So]-t[wo]*t[vo]*t[So]+t[wo]*t[yo]*t[To]-t[go]*t[Ao]*t[To]-t[bo]*t[yo]*t[Co]+t[go]*t[vo]*t[Co],e[vo]=t[mo]*t[vo]*t[So]-t[fo]*t[Ao]*t[So]-t[mo]*t[yo]*t[To]+t[uo]*t[Ao]*t[To]+t[fo]*t[yo]*t[Co]-t[uo]*t[vo]*t[Co],e[_o]=t[fo]*t[wo]*t[So]-t[mo]*t[bo]*t[So]+t[mo]*t[go]*t[To]-t[uo]*t[wo]*t[To]-t[fo]*t[go]*t[Co]+t[uo]*t[bo]*t[Co],e[Ao]=t[mo]*t[bo]*t[yo]-t[fo]*t[wo]*t[yo]-t[mo]*t[go]*t[vo]+t[uo]*t[wo]*t[vo]+t[fo]*t[go]*t[Ao]-t[uo]*t[bo]*t[Ao],e[So]=t[xo]*t[vo]*t[So]-t[bo]*t[_o]*t[So]-t[xo]*t[yo]*t[To]+t[go]*t[_o]*t[To]+t[bo]*t[yo]*t[ko]-t[go]*t[vo]*t[ko],e[To]=t[fo]*t[_o]*t[So]-t[po]*t[vo]*t[So]+t[po]*t[yo]*t[To]-t[uo]*t[_o]*t[To]-t[fo]*t[yo]*t[ko]+t[uo]*t[vo]*t[ko],e[ko]=t[po]*t[bo]*t[So]-t[fo]*t[xo]*t[So]-t[po]*t[go]*t[To]+t[uo]*t[xo]*t[To]+t[fo]*t[go]*t[ko]-t[uo]*t[bo]*t[ko],e[Co]=t[fo]*t[xo]*t[yo]-t[po]*t[bo]*t[yo]+t[po]*t[go]*t[vo]-t[uo]*t[xo]*t[vo]-t[fo]*t[go]*t[_o]+t[uo]*t[bo]*t[_o],t[uo]=e[uo]*r,t[fo]=e[fo]*r,t[po]=e[po]*r,t[mo]=e[mo]*r,t[go]=e[go]*r,t[bo]=e[bo]*r,t[xo]=e[xo]*r,t[wo]=e[wo]*r,t[yo]=e[yo]*r,t[vo]=e[vo]*r,t[_o]=e[_o]*r,t[Ao]=e[Ao]*r,t[So]=e[So]*r,t[To]=e[To]*r,t[ko]=e[ko]*r,t[Co]=e[Co]*r,this}determinant(){let t=this.values;return t[So]*t[vo]*t[xo]*t[mo]-t[yo]*t[To]*t[xo]*t[mo]-t[So]*t[bo]*t[_o]*t[mo]+t[go]*t[To]*t[_o]*t[mo]+t[yo]*t[bo]*t[ko]*t[mo]-t[go]*t[vo]*t[ko]*t[mo]-t[So]*t[vo]*t[po]*t[wo]+t[yo]*t[To]*t[po]*t[wo]+t[So]*t[fo]*t[_o]*t[wo]-t[uo]*t[To]*t[_o]*t[wo]-t[yo]*t[fo]*t[ko]*t[wo]+t[uo]*t[vo]*t[ko]*t[wo]+t[So]*t[bo]*t[po]*t[Ao]-t[go]*t[To]*t[po]*t[Ao]-t[So]*t[fo]*t[xo]*t[Ao]+t[uo]*t[To]*t[xo]*t[Ao]+t[go]*t[fo]*t[ko]*t[Ao]-t[uo]*t[bo]*t[ko]*t[Ao]-t[yo]*t[bo]*t[po]*t[Co]+t[go]*t[vo]*t[po]*t[Co]+t[yo]*t[fo]*t[xo]*t[Co]-t[uo]*t[vo]*t[xo]*t[Co]-t[go]*t[fo]*t[_o]*t[Co]+t[uo]*t[bo]*t[_o]*t[Co]}translate(t,e,i){let r=this.values;return r[mo]+=t,r[wo]+=e,r[Ao]+=i,this}copy(){return(new Io).set(this.values)}projection(t,e,i,r){this.identity();let s=1/Math.tan(i*(Math.PI/180)/2),n=(e+t)/(t-e),a=2*e*t/(t-e),o=this.values;return o[uo]=s/r,o[go]=0,o[yo]=0,o[So]=0,o[fo]=0,o[bo]=s,o[vo]=0,o[To]=0,o[po]=0,o[xo]=0,o[_o]=n,o[ko]=-1,o[mo]=0,o[wo]=0,o[Ao]=a,o[Co]=0,this}ortho2d(t,e,i,r){return this.ortho(t,t+i,e,e+r,0,1)}ortho(t,e,i,r,s,n){this.identity();let a=2/(e-t),o=2/(r-i),l=-2/(n-s),h=-(e+t)/(e-t),c=-(r+i)/(r-i),d=-(n+s)/(n-s),u=this.values;return u[uo]=a,u[go]=0,u[yo]=0,u[So]=0,u[fo]=0,u[bo]=o,u[vo]=0,u[To]=0,u[po]=0,u[xo]=0,u[_o]=l,u[ko]=0,u[mo]=h,u[wo]=c,u[Ao]=d,u[Co]=1,this}multiply(t){let e=this.temp,i=this.values,r=t.values;return e[uo]=i[uo]*r[uo]+i[fo]*r[go]+i[po]*r[yo]+i[mo]*r[So],e[fo]=i[uo]*r[fo]+i[fo]*r[bo]+i[po]*r[vo]+i[mo]*r[To],e[po]=i[uo]*r[po]+i[fo]*r[xo]+i[po]*r[_o]+i[mo]*r[ko],e[mo]=i[uo]*r[mo]+i[fo]*r[wo]+i[po]*r[Ao]+i[mo]*r[Co],e[go]=i[go]*r[uo]+i[bo]*r[go]+i[xo]*r[yo]+i[wo]*r[So],e[bo]=i[go]*r[fo]+i[bo]*r[bo]+i[xo]*r[vo]+i[wo]*r[To],e[xo]=i[go]*r[po]+i[bo]*r[xo]+i[xo]*r[_o]+i[wo]*r[ko],e[wo]=i[go]*r[mo]+i[bo]*r[wo]+i[xo]*r[Ao]+i[wo]*r[Co],e[yo]=i[yo]*r[uo]+i[vo]*r[go]+i[_o]*r[yo]+i[Ao]*r[So],e[vo]=i[yo]*r[fo]+i[vo]*r[bo]+i[_o]*r[vo]+i[Ao]*r[To],e[_o]=i[yo]*r[po]+i[vo]*r[xo]+i[_o]*r[_o]+i[Ao]*r[ko],e[Ao]=i[yo]*r[mo]+i[vo]*r[wo]+i[_o]*r[Ao]+i[Ao]*r[Co],e[So]=i[So]*r[uo]+i[To]*r[go]+i[ko]*r[yo]+i[Co]*r[So],e[To]=i[So]*r[fo]+i[To]*r[bo]+i[ko]*r[vo]+i[Co]*r[To],e[ko]=i[So]*r[po]+i[To]*r[xo]+i[ko]*r[_o]+i[Co]*r[ko],e[Co]=i[So]*r[mo]+i[To]*r[wo]+i[ko]*r[Ao]+i[Co]*r[Co],this.set(this.temp)}multiplyLeft(t){let e=this.temp,i=this.values,r=t.values;return e[uo]=r[uo]*i[uo]+r[fo]*i[go]+r[po]*i[yo]+r[mo]*i[So],e[fo]=r[uo]*i[fo]+r[fo]*i[bo]+r[po]*i[vo]+r[mo]*i[To],e[po]=r[uo]*i[po]+r[fo]*i[xo]+r[po]*i[_o]+r[mo]*i[ko],e[mo]=r[uo]*i[mo]+r[fo]*i[wo]+r[po]*i[Ao]+r[mo]*i[Co],e[go]=r[go]*i[uo]+r[bo]*i[go]+r[xo]*i[yo]+r[wo]*i[So],e[bo]=r[go]*i[fo]+r[bo]*i[bo]+r[xo]*i[vo]+r[wo]*i[To],e[xo]=r[go]*i[po]+r[bo]*i[xo]+r[xo]*i[_o]+r[wo]*i[ko],e[wo]=r[go]*i[mo]+r[bo]*i[wo]+r[xo]*i[Ao]+r[wo]*i[Co],e[yo]=r[yo]*i[uo]+r[vo]*i[go]+r[_o]*i[yo]+r[Ao]*i[So],e[vo]=r[yo]*i[fo]+r[vo]*i[bo]+r[_o]*i[vo]+r[Ao]*i[To],e[_o]=r[yo]*i[po]+r[vo]*i[xo]+r[_o]*i[_o]+r[Ao]*i[ko],e[Ao]=r[yo]*i[mo]+r[vo]*i[wo]+r[_o]*i[Ao]+r[Ao]*i[Co],e[So]=r[So]*i[uo]+r[To]*i[go]+r[ko]*i[yo]+r[Co]*i[So],e[To]=r[So]*i[fo]+r[To]*i[bo]+r[ko]*i[vo]+r[Co]*i[To],e[ko]=r[So]*i[po]+r[To]*i[xo]+r[ko]*i[_o]+r[Co]*i[ko],e[Co]=r[So]*i[mo]+r[To]*i[wo]+r[ko]*i[Ao]+r[Co]*i[Co],this.set(this.temp)}lookAt(t,e,i){let r=Io.xAxis,s=Io.yAxis,n=Io.zAxis;n.setFrom(e).normalize(),r.setFrom(e).normalize(),r.cross(i).normalize(),s.setFrom(r).cross(n).normalize(),this.identity();let a=this.values;return a[uo]=r.x,a[fo]=r.y,a[po]=r.z,a[go]=s.x,a[bo]=s.y,a[xo]=s.z,a[yo]=-n.x,a[vo]=-n.y,a[_o]=-n.z,Io.tmpMatrix.identity(),Io.tmpMatrix.values[mo]=-t.x,Io.tmpMatrix.values[wo]=-t.y,Io.tmpMatrix.values[Ao]=-t.z,this.multiply(Io.tmpMatrix),this}}class Mo{position=new co(0,0,0);direction=new co(0,0,-1);up=new co(0,1,0);near=0;far=100;zoom=1;viewportWidth=0;viewportHeight=0;projectionView=new Io;inverseProjectionView=new Io;projection=new Io;view=new Io;constructor(t,e){this.viewportWidth=t,this.viewportHeight=e,this.update()}update(){let t=this.projection,e=this.view,i=this.projectionView,r=this.inverseProjectionView,s=this.zoom,n=this.viewportWidth,a=this.viewportHeight;t.ortho(s*(-n/2),s*(n/2),s*(-a/2),s*(a/2),this.near,this.far),e.lookAt(this.position,this.direction,this.up),i.set(t.values),i.multiply(e),r.set(i.values).invert()}screenToWorld(t,e,i){let r=t.x,s=i-t.y-1;return t.x=2*r/e-1,t.y=2*s/i-1,t.z=2*t.z-1,t.project(this.inverseProjectionView),t}worldToScreen(t,e,i){return t.project(this.projectionView),t.x=e*(t.x+1)/2,t.y=i*(t.y+1)/2,t.z=(t.z+1)/2,t}setViewport(t,e){this.viewportWidth=t,this.viewportHeight=e}}class Eo{vertexShader;fragmentShader;static MVP_MATRIX="u_projTrans";static POSITION="a_position";static COLOR="a_color";static COLOR2="a_color2";static TEXCOORDS="a_texCoords";static SAMPLER="u_texture";context;vs=null;vsSource;fs=null;fsSource;program=null;tmp2x2=new Float32Array(4);tmp3x3=new Float32Array(9);tmp4x4=new Float32Array(16);getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}constructor(t,e,i){this.vertexShader=e,this.fragmentShader=i,this.vsSource=e,this.fsSource=i,this.context=t instanceof lo?t:new lo(t),this.context.addRestorable(this),this.compile()}compile(){let t=this.context.gl;try{if(this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(t,e){let i=this.context.gl,r=i.createShader(t);if(!r)throw new Error("Couldn't create shader.");if(i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS)){let t="Couldn't compile shader: "+i.getShaderInfoLog(r);if(i.deleteShader(r),!i.isContextLost())throw new Error(t)}return r}compileProgram(t,e){let i=this.context.gl,r=i.createProgram();if(!r)throw new Error("Couldn't compile program.");if(i.attachShader(r,t),i.attachShader(r,e),i.linkProgram(r),!i.getProgramParameter(r,i.LINK_STATUS)){let t="Couldn't compile shader program: "+i.getProgramInfoLog(r);if(i.deleteProgram(r),!i.isContextLost())throw new Error(t)}return r}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(t,e){this.context.gl.uniform1i(this.getUniformLocation(t),e)}setUniformf(t,e){this.context.gl.uniform1f(this.getUniformLocation(t),e)}setUniform2f(t,e,i){this.context.gl.uniform2f(this.getUniformLocation(t),e,i)}setUniform3f(t,e,i,r){this.context.gl.uniform3f(this.getUniformLocation(t),e,i,r)}setUniform4f(t,e,i,r,s){this.context.gl.uniform4f(this.getUniformLocation(t),e,i,r,s)}setUniform2x2f(t,e){let i=this.context.gl;this.tmp2x2.set(e),i.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)}setUniform3x3f(t,e){let i=this.context.gl;this.tmp3x3.set(e),i.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)}setUniform4x4f(t,e){let i=this.context.gl;this.tmp4x4.set(e),i.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)}getUniformLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=e.getUniformLocation(this.program,t);if(!i&&!e.isContextLost())throw new Error(`Couldn't find location for uniform ${t}`);return i}getAttributeLocation(t){let e=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=e.getAttribLocation(this.program,t);if(-1==i&&!e.isContextLost())throw new Error(`Couldn't find location for attribute ${t}`);return i}dispose(){this.context.removeRestorable(this);let t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)}static newColoredTextured(t){let e=`\nattribute vec4 ${Eo.POSITION};\nattribute vec4 ${Eo.COLOR};\nattribute vec2 ${Eo.TEXCOORDS};\nuniform mat4 ${Eo.MVP_MATRIX};\nvarying vec4 v_color;\nvarying vec2 v_texCoords;\n\nvoid main () {\n\tv_color = ${Eo.COLOR};\n\tv_texCoords = ${Eo.TEXCOORDS};\n\tgl_Position = ${Eo.MVP_MATRIX} * ${Eo.POSITION};\n}\n`;return new Eo(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_color;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n}\n")}static newTwoColoredTextured(t){let e=`\nattribute vec4 ${Eo.POSITION};\nattribute vec4 ${Eo.COLOR};\nattribute vec4 ${Eo.COLOR2};\nattribute vec2 ${Eo.TEXCOORDS};\nuniform mat4 ${Eo.MVP_MATRIX};\nvarying vec4 v_light;\nvarying vec4 v_dark;\nvarying vec2 v_texCoords;\n\nvoid main () {\n\tv_light = ${Eo.COLOR};\n\tv_dark = ${Eo.COLOR2};\n\tv_texCoords = ${Eo.TEXCOORDS};\n\tgl_Position = ${Eo.MVP_MATRIX} * ${Eo.POSITION};\n}\n`;return new Eo(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_light;\nvarying LOWP vec4 v_dark;\nvarying vec2 v_texCoords;\nuniform sampler2D u_texture;\n\nvoid main () {\n\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\tgl_FragColor.a = texColor.a * v_light.a;\n\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n}\n")}static newColored(t){let e=`\nattribute vec4 ${Eo.POSITION};\nattribute vec4 ${Eo.COLOR};\nuniform mat4 ${Eo.MVP_MATRIX};\nvarying vec4 v_color;\n\nvoid main () {\n\tv_color = ${Eo.COLOR};\n\tgl_Position = ${Eo.MVP_MATRIX} * ${Eo.POSITION};\n}\n`;return new Eo(t,e,"\n#ifdef GL_ES\n\t#define LOWP lowp\n\tprecision mediump float;\n#else\n\t#define LOWP\n#endif\nvarying LOWP vec4 v_color;\n\nvoid main () {\n\tgl_FragColor = v_color;\n}\n")}}class Ro{attributes;context;vertices;verticesBuffer=null;verticesLength=0;dirtyVertices=!1;indices;indicesBuffer=null;indicesLength=0;dirtyIndices=!1;elementsPerVertex=0;getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(t){this.dirtyVertices=!0,this.verticesLength=t}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(t){this.dirtyIndices=!0,this.indicesLength=t}getIndices(){return this.indices}getVertexSizeInFloats(){let t=0;for(var e=0;e<this.attributes.length;e++)t+=this.attributes[e].numElements;return t}constructor(t,e,i,r){this.attributes=e,this.context=t instanceof lo?t:new lo(t),this.elementsPerVertex=0;for(let t=0;t<e.length;t++)this.elementsPerVertex+=e[t].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(r),this.context.addRestorable(this)}setVertices(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length}setIndices(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length}draw(t,e){this.drawWithOffset(t,e,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(t,e,i,r){let s=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?s.drawElements(e,r,s.UNSIGNED_SHORT,2*i):s.drawArrays(e,i,r),this.unbind(t)}bind(t){let e=this.context.gl;e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let r=0;r<this.attributes.length;r++){let s=this.attributes[r],n=t.getAttributeLocation(s.name);e.enableVertexAttribArray(n),e.vertexAttribPointer(n,s.numElements,e.FLOAT,!1,4*this.elementsPerVertex,4*i),i+=s.numElements}this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(t){let e=this.context.gl;for(let i=0;i<this.attributes.length;i++){let r=this.attributes[i],s=t.getAttributeLocation(r.name);e.disableVertexAttribArray(s)}e.bindBuffer(e.ARRAY_BUFFER,null),this.indicesLength>0&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}update(){let t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)}}class Fo{name;type;numElements;constructor(t,e,i){this.name=t,this.type=e,this.numElements=i}}class Po extends Fo{constructor(){super(Eo.POSITION,Oo.Float,2)}}class Lo extends Fo{constructor(t=0){super(Eo.TEXCOORDS+(0==t?"":t),Oo.Float,2)}}class Yo extends Fo{constructor(){super(Eo.COLOR,Oo.Float,4)}}class Bo extends Fo{constructor(){super(Eo.COLOR2,Oo.Float,4)}}var Oo,Xo;!function(t){t[t.Float=0]="Float"}(Oo||(Oo={}));class Do{static disableCulling=!1;context;drawCalls=0;static globalDrawCalls=0;isDrawing=!1;mesh;shader=null;lastTexture=null;verticesLength=0;indicesLength=0;srcColorBlend;srcAlphaBlend;dstBlend;cullWasEnabled=!1;constructor(t,e=!0,i=10920){if(i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=t instanceof lo?t:new lo(t);let r=e?[new Po,new Yo,new Lo,new Bo]:[new Po,new Yo,new Lo];this.mesh=new Ro(t,r,i,3*i);let s=this.context.gl;this.srcColorBlend=s.SRC_ALPHA,this.srcAlphaBlend=s.ONE,this.dstBlend=s.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),Do.disableCulling&&(this.cullWasEnabled=e.isEnabled(e.CULL_FACE),this.cullWasEnabled&&e.disable(e.CULL_FACE))}static blendModesGL=[{srcRgb:770,srcRgbPma:1,dstRgb:771,srcAlpha:1},{srcRgb:770,srcRgbPma:1,dstRgb:1,srcAlpha:1},{srcRgb:774,srcRgbPma:774,dstRgb:771,srcAlpha:1},{srcRgb:1,srcRgbPma:1,dstRgb:769,srcAlpha:1}];setBlendMode(t,e){const i=Do.blendModesGL[t],r=e?i.srcRgbPma:i.srcRgb,s=i.srcAlpha,n=i.dstRgb;this.srcColorBlend==r&&this.srcAlphaBlend==s&&this.dstBlend==n||(this.srcColorBlend=r,this.srcAlphaBlend=s,this.dstBlend=n,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(r,n,s,n))}draw(t,e,i){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+e.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();let r=this.mesh.numVertices();this.mesh.getVertices().set(e,this.verticesLength),this.verticesLength+=e.length,this.mesh.setVerticesLength(this.verticesLength);let s=this.mesh.getIndices();for(let t=this.indicesLength,e=0;e<i.length;t++,e++)s[t]=i[e]+r;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(0!=this.verticesLength){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,Do.globalDrawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let t=this.context.gl;t.disable(t.BLEND),Do.disableCulling&&this.cullWasEnabled&&t.enable(t.CULL_FACE)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let t=Do.globalDrawCalls;return Do.globalDrawCalls=0,t}dispose(){this.mesh.dispose()}}class Vo{context;isDrawing=!1;mesh;shapeType=Xo.Filled;color=new us(1,1,1,1);shader=null;vertexIndex=0;tmp=new gs;srcColorBlend;srcAlphaBlend;dstBlend;constructor(t,e=10920){if(e>10920)throw new Error("Can't have more than 10920 triangles per batch: "+e);this.context=t instanceof lo?t:new lo(t),this.mesh=new Ro(t,[new Po,new Yo],e,0);let i=this.context.gl;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA}begin(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;let e=this.context.gl;e.enable(e.BLEND),e.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(t,e,i){this.srcColorBlend=t,this.srcAlphaBlend=e,this.dstBlend=i,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(t,i,e,i))}setColor(t){this.color.setFromColor(t)}setColorWith(t,e,i,r){this.color.set(t,e,i,r)}point(t,e,i){this.check(Xo.Point,1),i||(i=this.color),this.vertex(t,e,i)}line(t,e,i,r,s){this.check(Xo.Line,2),this.mesh.getVertices(),this.vertexIndex,s||(s=this.color),this.vertex(t,e,s),this.vertex(i,r,s)}triangle(t,e,i,r,s,n,a,o,l,h){this.check(t?Xo.Filled:Xo.Line,3),this.mesh.getVertices(),this.vertexIndex,o||(o=this.color),l||(l=this.color),h||(h=this.color),t?(this.vertex(e,i,o),this.vertex(r,s,l),this.vertex(n,a,h)):(this.vertex(e,i,o),this.vertex(r,s,l),this.vertex(r,s,o),this.vertex(n,a,l),this.vertex(n,a,o),this.vertex(e,i,l))}quad(t,e,i,r,s,n,a,o,l,h,c,d,u){this.check(t?Xo.Filled:Xo.Line,3),this.mesh.getVertices(),this.vertexIndex,h||(h=this.color),c||(c=this.color),d||(d=this.color),u||(u=this.color),t?(this.vertex(e,i,h),this.vertex(r,s,c),this.vertex(n,a,d),this.vertex(n,a,d),this.vertex(o,l,u),this.vertex(e,i,h)):(this.vertex(e,i,h),this.vertex(r,s,c),this.vertex(r,s,c),this.vertex(n,a,d),this.vertex(n,a,d),this.vertex(o,l,u),this.vertex(o,l,u),this.vertex(e,i,h))}rect(t,e,i,r,s,n){this.quad(t,e,i,e+r,i,e+r,i+s,e,i+s,n,n,n,n)}rectLine(t,e,i,r,s,n,a){this.check(t?Xo.Filled:Xo.Line,8),a||(a=this.color);let o=this.tmp.set(s-i,e-r);o.normalize(),n*=.5;let l=o.x*n,h=o.y*n;t?(this.vertex(e+l,i+h,a),this.vertex(e-l,i-h,a),this.vertex(r+l,s+h,a),this.vertex(r-l,s-h,a),this.vertex(r+l,s+h,a),this.vertex(e-l,i-h,a)):(this.vertex(e+l,i+h,a),this.vertex(e-l,i-h,a),this.vertex(r+l,s+h,a),this.vertex(r-l,s-h,a),this.vertex(r+l,s+h,a),this.vertex(e+l,i+h,a),this.vertex(r-l,s-h,a),this.vertex(e-l,i-h,a))}x(t,e,i){this.line(t-i,e-i,t+i,e+i),this.line(t-i,e+i,t+i,e-i)}polygon(t,e,i,r){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(Xo.Line,2*i),r||(r=this.color),this.mesh.getVertices(),this.vertexIndex,i<<=1;let s=t[e<<=1],n=t[e+1],a=e+i;for(let o=e,l=e+i-2;o<l;o+=2){let e=t[o],i=t[o+1],l=0,h=0;o+2>=a?(l=s,h=n):(l=t[o+2],h=t[o+3]),this.vertex(e,i,r),this.vertex(l,h,r)}}circle(t,e,i,r,s,n=0){if(0==n&&(n=Math.max(1,6*fs.cbrt(r)|0)),n<=0)throw new Error("segments must be > 0.");s||(s=this.color);let a=2*fs.PI/n,o=Math.cos(a),l=Math.sin(a),h=r,c=0;if(t){this.check(Xo.Filled,3*n+3),n--;for(let t=0;t<n;t++){this.vertex(e,i,s),this.vertex(e+h,i+c,s);let t=h;h=o*h-l*c,c=l*t+o*c,this.vertex(e+h,i+c,s)}this.vertex(e,i,s),this.vertex(e+h,i+c,s)}else{this.check(Xo.Line,2*n+2);for(let t=0;t<n;t++){this.vertex(e+h,i+c,s);let t=h;h=o*h-l*c,c=l*t+o*c,this.vertex(e+h,i+c,s)}this.vertex(e+h,i+c,s)}h=r,c=0,this.vertex(e+h,i+c,s)}curve(t,e,i,r,s,n,a,o,l,h){this.check(Xo.Line,2*l+2),h||(h=this.color);let c=1/l,d=c*c,u=c*c*c,f=3*c,p=3*d,m=6*d,g=6*u,b=t-2*i+s,x=e-2*r+n,w=3*(i-s)-t+a,y=3*(r-n)-e+o,v=t,_=e,A=(i-t)*f+b*p+w*u,S=(r-e)*f+x*p+y*u,T=b*m+w*g,k=x*m+y*g,C=w*g,I=y*g;for(;l-- >0;)this.vertex(v,_,h),v+=A,_+=S,A+=T,S+=k,T+=C,k+=I,this.vertex(v,_,h);this.vertex(v,_,h),this.vertex(a,o,h)}vertex(t,e,i){let r=this.vertexIndex,s=this.mesh.getVertices();s[r++]=t,s[r++]=e,s[r++]=i.r,s[r++]=i.g,s[r++]=i.b,s[r++]=i.a,this.vertexIndex=r}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let t=this.context.gl;t.disable(t.BLEND),this.isDrawing=!1}flush(){if(0!=this.vertexIndex){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(t,e){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<e))return;this.flush()}else this.flush(),this.shapeType=t}dispose(){this.mesh.dispose()}}!function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(Xo||(Xo={}));class No{boneLineColor=new us(1,0,0,1);boneOriginColor=new us(0,1,0,1);attachmentLineColor=new us(0,0,1,.5);triangleLineColor=new us(1,.64,0,.5);pathColor=(new us).setFromString("FF7F00");clipColor=new us(.8,0,0,2);aabbColor=new us(0,1,0,.5);drawBones=!0;drawRegionAttachments=!0;drawBoundingBoxes=!0;drawMeshHull=!0;drawMeshTriangles=!0;drawPaths=!0;drawSkeletonXY=!1;drawClipping=!0;premultipliedAlpha=!1;scale=1;boneWidth=2;context;bounds=new Qa;temp=new Array;vertices=ps.newFloatArray(2048);static LIGHT_GRAY=new us(192/255,192/255,192/255,1);static GREEN=new us(0,1,0,1);constructor(t){this.context=t instanceof lo?t:new lo(t)}draw(t,e,i){let r=e.x,s=e.y,n=this.context.gl,a=this.premultipliedAlpha?n.ONE:n.SRC_ALPHA;t.setBlendMode(a,n.ONE,n.ONE_MINUS_SRC_ALPHA);let o=e.bones;if(this.drawBones){t.setColor(this.boneLineColor);for(let e=0,r=o.length;e<r;e++){let r=o[e];if(i&&i.indexOf(r.data.name)>-1)continue;if(!r.parent)continue;let s=r.data.length*r.a+r.worldX,n=r.data.length*r.c+r.worldY;t.rectLine(!0,r.worldX,r.worldY,s,n,this.boneWidth*this.scale)}this.drawSkeletonXY&&t.x(r,s,4*this.scale)}if(this.drawRegionAttachments){t.setColor(this.attachmentLineColor);let i=e.slots;for(let e=0,r=i.length;e<r;e++){let r=i[e],s=r.getAttachment();if(s instanceof Gn){let e=s,i=this.vertices;e.computeWorldVertices(r,i,0,2),t.line(i[0],i[1],i[2],i[3]),t.line(i[2],i[3],i[4],i[5]),t.line(i[4],i[5],i[6],i[7]),t.line(i[6],i[7],i[0],i[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let i=e.slots;for(let e=0,r=i.length;e<r;e++){let r=i[e];if(!r.bone.active)continue;let s=r.getAttachment();if(!(s instanceof zn))continue;let n=s,a=this.vertices;n.computeWorldVertices(r,0,n.worldVerticesLength,a,0,2);let o=n.triangles,l=n.hullLength;if(this.drawMeshTriangles){t.setColor(this.triangleLineColor);for(let e=0,i=o.length;e<i;e+=3){let i=2*o[e],r=2*o[e+1],s=2*o[e+2];t.triangle(!1,a[i],a[i+1],a[r],a[r+1],a[s],a[s+1])}}if(this.drawMeshHull&&l>0){t.setColor(this.attachmentLineColor),l=2*(l>>1);let e=a[l-2],i=a[l-1];for(let r=0,s=l;r<s;r+=2){let s=a[r],n=a[r+1];t.line(s,n,e,i),e=s,i=n}}}}if(this.drawBoundingBoxes){let i=this.bounds;i.update(e,!0),t.setColor(this.aabbColor),t.rect(!1,i.minX,i.minY,i.getWidth(),i.getHeight());let r=i.polygons,s=i.boundingBoxes;for(let e=0,i=r.length;e<i;e++){let i=r[e];t.setColor(s[e].color),t.polygon(i,0,i.length)}}if(this.drawPaths){let i=e.slots;for(let e=0,r=i.length;e<r;e++){let r=i[e];if(!r.bone.active)continue;let s=r.getAttachment();if(!(s instanceof Un))continue;let n=s,a=n.worldVerticesLength,o=this.temp=ps.setArraySize(this.temp,a,0);n.computeWorldVertices(r,0,a,o,0,2);let l=this.pathColor,h=o[2],c=o[3],d=0,u=0;if(n.closed){t.setColor(l);let e=o[0],i=o[1],r=o[a-2],s=o[a-1];d=o[a-4],u=o[a-3],t.curve(h,c,e,i,r,s,d,u,32),t.setColor(No.LIGHT_GRAY),t.line(h,c,e,i),t.line(d,u,r,s)}a-=4;for(let e=4;e<a;e+=6){let i=o[e],r=o[e+1],s=o[e+2],n=o[e+3];d=o[e+4],u=o[e+5],t.setColor(l),t.curve(h,c,i,r,s,n,d,u,32),t.setColor(No.LIGHT_GRAY),t.line(h,c,i,r),t.line(d,u,s,n),h=d,c=u}}}if(this.drawBones){t.setColor(this.boneOriginColor);for(let e=0,r=o.length;e<r;e++){let r=o[e];i&&i.indexOf(r.data.name)>-1||t.circle(!0,r.worldX,r.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){let i=e.slots;t.setColor(this.clipColor);for(let e=0,r=i.length;e<r;e++){let r=i[e];if(!r.bone.active)continue;let s=r.getAttachment();if(!(s instanceof Tn))continue;let n=s,a=n.worldVerticesLength,o=this.temp=ps.setArraySize(this.temp,a,0);n.computeWorldVertices(r,0,a,o,0,2);for(let e=0,i=o.length;e<i;e+=2){let i=o[e],r=o[e+1],s=o[(e+2)%o.length],n=o[(e+3)%o.length];t.line(i,r,s,n)}}}}dispose(){}}class Wo{vertices;numVertices;numFloats;constructor(t,e,i){this.vertices=t,this.numVertices=e,this.numFloats=i}}class zo{static QUAD_TRIANGLES=[0,1,2,2,3,0];premultipliedAlpha=!1;tempColor=new us;tempColor2=new us;vertices;vertexSize=8;twoColorTint=!1;renderable=new Wo([],0,0);clipper=new to;temp=new gs;temp2=new gs;temp3=new us;temp4=new us;constructor(t,e=!0){this.twoColorTint=e,e&&(this.vertexSize+=4),this.vertices=ps.newFloatArray(1024*this.vertexSize)}draw(t,e,i=-1,r=-1,s=null){let n,a,o,l=this.clipper,h=this.premultipliedAlpha,c=this.twoColorTint,d=null,u=this.renderable,f=e.drawOrder,p=e.color,m=c?12:8,g=!1;-1==i&&(g=!0);for(let e=0,b=f.length;e<b;e++){let b=l.isClipping()?2:m,x=f[e];if(!x.bone.active){l.clipEndWithSlot(x);continue}if(i>=0&&i==x.data.index&&(g=!0),!g){l.clipEndWithSlot(x);continue}r>=0&&r==x.data.index&&(g=!1);let w,y=x.getAttachment();if(y instanceof Gn){let t=y;u.vertices=this.vertices,u.numVertices=4,u.numFloats=b<<2,t.computeWorldVertices(x,u.vertices,0,b),a=zo.QUAD_TRIANGLES,n=t.uvs,w=t.region.texture,o=t.color}else{if(!(y instanceof zn)){if(y instanceof Tn){let t=y;l.clipStart(x,t);continue}l.clipEndWithSlot(x);continue}{let t=y;u.vertices=this.vertices,u.numVertices=t.worldVerticesLength>>1,u.numFloats=u.numVertices*b,u.numFloats>u.vertices.length&&(u.vertices=this.vertices=ps.newFloatArray(u.numFloats)),t.computeWorldVertices(x,0,t.worldVerticesLength,u.vertices,0,b),a=t.triangles,w=t.region.texture,n=t.uvs,o=t.color}}if(w){let e=x.color,i=this.tempColor;i.r=p.r*e.r*o.r,i.g=p.g*e.g*o.g,i.b=p.b*e.b*o.b,i.a=p.a*e.a*o.a,h&&(i.r*=i.a,i.g*=i.a,i.b*=i.a);let r=this.tempColor2;x.darkColor?(h?(r.r=x.darkColor.r*i.a,r.g=x.darkColor.g*i.a,r.b=x.darkColor.b*i.a):r.setFromColor(x.darkColor),r.a=h?1:0):r.set(0,0,0,1);let f=x.data.blendMode;if(f!=d&&(d=f,t.setBlendMode(d,h)),l.isClipping()){l.clipTriangles(u.vertices,a,a.length,n,i,r,c);let e=new Float32Array(l.clippedVertices),o=l.clippedTriangles;s&&s(e,e.length,m),t.draw(w,e,o)}else{let e=u.vertices;if(c)for(let t=2,s=0,a=u.numFloats;t<a;t+=m,s+=2)e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a,e[t+4]=n[s],e[t+5]=n[s+1],e[t+6]=r.r,e[t+7]=r.g,e[t+8]=r.b,e[t+9]=r.a;else for(let t=2,r=0,s=u.numFloats;t<s;t+=m,r+=2)e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a,e[t+4]=n[r],e[t+5]=n[r+1];let o=u.vertices.subarray(0,u.numFloats);s&&s(u.vertices,u.numFloats,m),t.draw(w,o,a)}}l.clipEndWithSlot(x)}l.clipEnd()}getSkeletonClipping(){return this.clipper}}const Uo=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],qo=[0,1,2,2,3,0],Go=new us(1,1,1,1);class jo{context;canvas;camera;batcher;twoColorTint=!1;batcherShader;shapes;shapesShader;activeRenderer=null;skeletonRenderer;skeletonDebugRenderer;constructor(t,e,i=!0){this.canvas=t,this.context=e instanceof lo?e:new lo(e),this.twoColorTint=i,this.camera=new Mo(t.width,t.height),this.batcherShader=i?Eo.newTwoColoredTextured(this.context):Eo.newColoredTextured(this.context),this.batcher=new Do(this.context,i),this.shapesShader=Eo.newColored(this.context),this.shapes=new Vo(this.context),this.skeletonRenderer=new zo(this.context,i),this.skeletonDebugRenderer=new No(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(t,e=!1,i=-1,r=-1,s=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=e,this.skeletonRenderer.draw(this.batcher,t,i,r,s)}drawSkeletonDebug(t,e=!1,i){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=e,this.skeletonDebugRenderer.draw(this.shapes,t,i)}drawTexture(t,e,i,r,s,n){this.enableRenderer(this.batcher),n||(n=Go);var a=0;Uo[a++]=e,Uo[a++]=i,Uo[a++]=n.r,Uo[a++]=n.g,Uo[a++]=n.b,Uo[a++]=n.a,Uo[a++]=0,Uo[a++]=1,this.twoColorTint&&(Uo[a++]=0,Uo[a++]=0,Uo[a++]=0,Uo[a++]=0),Uo[a++]=e+r,Uo[a++]=i,Uo[a++]=n.r,Uo[a++]=n.g,Uo[a++]=n.b,Uo[a++]=n.a,Uo[a++]=1,Uo[a++]=1,this.twoColorTint&&(Uo[a++]=0,Uo[a++]=0,Uo[a++]=0,Uo[a++]=0),Uo[a++]=e+r,Uo[a++]=i+s,Uo[a++]=n.r,Uo[a++]=n.g,Uo[a++]=n.b,Uo[a++]=n.a,Uo[a++]=1,Uo[a++]=0,this.twoColorTint&&(Uo[a++]=0,Uo[a++]=0,Uo[a++]=0,Uo[a++]=0),Uo[a++]=e,Uo[a++]=i+s,Uo[a++]=n.r,Uo[a++]=n.g,Uo[a++]=n.b,Uo[a++]=n.a,Uo[a++]=0,Uo[a++]=0,this.twoColorTint&&(Uo[a++]=0,Uo[a++]=0,Uo[a++]=0,Uo[a]=0),this.batcher.draw(t,Uo,qo)}drawTextureUV(t,e,i,r,s,n,a,o,l,h){this.enableRenderer(this.batcher),h||(h=Go);var c=0;Uo[c++]=e,Uo[c++]=i,Uo[c++]=h.r,Uo[c++]=h.g,Uo[c++]=h.b,Uo[c++]=h.a,Uo[c++]=n,Uo[c++]=a,this.twoColorTint&&(Uo[c++]=0,Uo[c++]=0,Uo[c++]=0,Uo[c++]=0),Uo[c++]=e+r,Uo[c++]=i,Uo[c++]=h.r,Uo[c++]=h.g,Uo[c++]=h.b,Uo[c++]=h.a,Uo[c++]=o,Uo[c++]=a,this.twoColorTint&&(Uo[c++]=0,Uo[c++]=0,Uo[c++]=0,Uo[c++]=0),Uo[c++]=e+r,Uo[c++]=i+s,Uo[c++]=h.r,Uo[c++]=h.g,Uo[c++]=h.b,Uo[c++]=h.a,Uo[c++]=o,Uo[c++]=l,this.twoColorTint&&(Uo[c++]=0,Uo[c++]=0,Uo[c++]=0,Uo[c++]=0),Uo[c++]=e,Uo[c++]=i+s,Uo[c++]=h.r,Uo[c++]=h.g,Uo[c++]=h.b,Uo[c++]=h.a,Uo[c++]=n,Uo[c++]=l,this.twoColorTint&&(Uo[c++]=0,Uo[c++]=0,Uo[c++]=0,Uo[c]=0),this.batcher.draw(t,Uo,qo)}drawTextureRotated(t,e,i,r,s,n,a,o,l){this.enableRenderer(this.batcher),l||(l=Go);let h=e+n,c=i+a,d=-n,u=-a,f=r-n,p=s-a,m=d,g=u,b=d,x=p,w=f,y=p,v=f,_=u,A=0,S=0,T=0,k=0,C=0,I=0,M=0,E=0;if(0!=o){let t=fs.cosDeg(o),e=fs.sinDeg(o);A=t*m-e*g,S=e*m+t*g,M=t*b-e*x,E=e*b+t*x,C=t*w-e*y,I=e*w+t*y,T=C+(A-M),k=I+(S-E)}else A=m,S=g,M=b,E=x,C=w,I=y,T=v,k=_;A+=h,S+=c,T+=h,k+=c,C+=h,I+=c,M+=h,E+=c;var R=0;Uo[R++]=A,Uo[R++]=S,Uo[R++]=l.r,Uo[R++]=l.g,Uo[R++]=l.b,Uo[R++]=l.a,Uo[R++]=0,Uo[R++]=1,this.twoColorTint&&(Uo[R++]=0,Uo[R++]=0,Uo[R++]=0,Uo[R++]=0),Uo[R++]=T,Uo[R++]=k,Uo[R++]=l.r,Uo[R++]=l.g,Uo[R++]=l.b,Uo[R++]=l.a,Uo[R++]=1,Uo[R++]=1,this.twoColorTint&&(Uo[R++]=0,Uo[R++]=0,Uo[R++]=0,Uo[R++]=0),Uo[R++]=C,Uo[R++]=I,Uo[R++]=l.r,Uo[R++]=l.g,Uo[R++]=l.b,Uo[R++]=l.a,Uo[R++]=1,Uo[R++]=0,this.twoColorTint&&(Uo[R++]=0,Uo[R++]=0,Uo[R++]=0,Uo[R++]=0),Uo[R++]=M,Uo[R++]=E,Uo[R++]=l.r,Uo[R++]=l.g,Uo[R++]=l.b,Uo[R++]=l.a,Uo[R++]=0,Uo[R++]=0,this.twoColorTint&&(Uo[R++]=0,Uo[R++]=0,Uo[R++]=0,Uo[R]=0),this.batcher.draw(t,Uo,qo)}drawRegion(t,e,i,r,s,n){this.enableRenderer(this.batcher),n||(n=Go);var a=0;Uo[a++]=e,Uo[a++]=i,Uo[a++]=n.r,Uo[a++]=n.g,Uo[a++]=n.b,Uo[a++]=n.a,Uo[a++]=t.u,Uo[a++]=t.v2,this.twoColorTint&&(Uo[a++]=0,Uo[a++]=0,Uo[a++]=0,Uo[a++]=0),Uo[a++]=e+r,Uo[a++]=i,Uo[a++]=n.r,Uo[a++]=n.g,Uo[a++]=n.b,Uo[a++]=n.a,Uo[a++]=t.u2,Uo[a++]=t.v2,this.twoColorTint&&(Uo[a++]=0,Uo[a++]=0,Uo[a++]=0,Uo[a++]=0),Uo[a++]=e+r,Uo[a++]=i+s,Uo[a++]=n.r,Uo[a++]=n.g,Uo[a++]=n.b,Uo[a++]=n.a,Uo[a++]=t.u2,Uo[a++]=t.v,this.twoColorTint&&(Uo[a++]=0,Uo[a++]=0,Uo[a++]=0,Uo[a++]=0),Uo[a++]=e,Uo[a++]=i+s,Uo[a++]=n.r,Uo[a++]=n.g,Uo[a++]=n.b,Uo[a++]=n.a,Uo[a++]=t.u,Uo[a++]=t.v,this.twoColorTint&&(Uo[a++]=0,Uo[a++]=0,Uo[a++]=0,Uo[a]=0),this.batcher.draw(t.page.texture,Uo,qo)}line(t,e,i,r,s,n){this.enableRenderer(this.shapes),this.shapes.line(t,e,i,r,s)}triangle(t,e,i,r,s,n,a,o,l,h){this.enableRenderer(this.shapes),this.shapes.triangle(t,e,i,r,s,n,a,o,l,h)}quad(t,e,i,r,s,n,a,o,l,h,c,d,u){this.enableRenderer(this.shapes),this.shapes.quad(t,e,i,r,s,n,a,o,l,h,c,d,u)}rect(t,e,i,r,s,n){this.enableRenderer(this.shapes),this.shapes.rect(t,e,i,r,s,n)}rectLine(t,e,i,r,s,n,a){this.enableRenderer(this.shapes),this.shapes.rectLine(t,e,i,r,s,n,a)}polygon(t,e,i,r){this.enableRenderer(this.shapes),this.shapes.polygon(t,e,i,r)}circle(t,e,i,r,s,n=0){this.enableRenderer(this.shapes),this.shapes.circle(t,e,i,r,s,n)}curve(t,e,i,r,s,n,a,o,l,h){this.enableRenderer(this.shapes),this.shapes.curve(t,e,i,r,s,n,a,o,l,h)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(t){let e=this.canvas;var i=window.devicePixelRatio||1,r=Math.round(e.clientWidth*i),s=Math.round(e.clientHeight*i);if(e.width==r&&e.height==s||(e.width=r,e.height=s),this.context.gl.viewport(0,0,e.width,e.height),t===Ho.Expand)this.camera.setViewport(r,s);else if(t===Ho.Fit){let t=e.width,i=e.height,r=this.camera.viewportWidth,s=this.camera.viewportHeight,n=s/r<i/t?r/t:s/i;this.camera.setViewport(t*n,i*n)}this.camera.update()}enableRenderer(t){this.activeRenderer!==t&&(this.end(),t instanceof Do?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Eo.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof Vo?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Eo.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}}var Ho,$o;($o=Ho||(Ho={}))[$o.Stretch=0]="Stretch",$o[$o.Expand=1]="Expand",$o[$o.Fit=2]="Fit";let Ko=Phaser.GameObjects.Components;const Jo=Ko.ComputedSize,Qo=Ko.Depth,Zo=Ko.Flip,tl=Ko.ScrollFactor,el=Ko.Transform,il=Ko.Visible,rl=Ko.Origin,sl=Ko.Alpha;function nl(...t){return e=>(Phaser.Class.mixin(e,t),e)}const al=nl(Jo),ol=nl(Qo),ll=nl(Zo),hl=nl(tl),cl=nl(el),dl=nl(il),ul=nl(rl),fl=nl(sl);class pl extends Phaser.GameObjects.GameObject{constructor(t,e){super(t,e)}}class ml{clipping;constructor(t=!1){this.clipping=t}calculateBounds(t){if(!t.skeleton)return{x:0,y:0,width:0,height:0};const e=new sa(t.skeleton.data);e.setToSetupPose(),e.updateWorldTransform(Pn.update);const i=e.getBoundsRect(this.clipping?new to:void 0);return i.width==Number.NEGATIVE_INFINITY?{x:0,y:0,width:0,height:0}:i}}class gl extends(ol(ul(al(ll(hl(cl(dl(fl(pl))))))))){plugin;boundsProvider;blendMode=-1;skeleton;animationStateData;animationState;beforeUpdateWorldTransforms=()=>{};afterUpdateWorldTransforms=()=>{};premultipliedAlpha=!1;constructor(t,e,i,r,s,n,a=new ml){super(t,window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:cs),this.plugin=e,this.boundsProvider=a,this.setPosition(i,r),this.premultipliedAlpha=this.plugin.isAtlasPremultiplied(n),this.skeleton=this.plugin.createSkeleton(s,n),this.animationStateData=new An(this.skeleton.data),this.animationState=new un(this.animationStateData),this.skeleton.updateWorldTransform(Pn.update),this.updateSize()}updateSize(){if(!this.skeleton)return;let t=this.boundsProvider.calculateBounds(this);this.width=t.width,this.height=t.height,this.displayOriginX=-t.x,this.displayOriginY=-t.y}skeletonToPhaserWorldCoordinates(t){let e=this.getWorldTransformMatrix(),i=e.a,r=e.b,s=e.c,n=e.d,a=e.tx,o=e.ty,l=t.x,h=t.y;t.x=l*i+h*s+a,t.y=l*r+h*n+o}phaserWorldCoordinatesToSkeleton(t){let e=this.getWorldTransformMatrix();e=e.invert();let i=e.a,r=e.b,s=e.c,n=e.d,a=e.tx,o=e.ty,l=t.x,h=t.y;t.x=l*i+h*s+a,t.y=l*r+h*n+o}phaserWorldCoordinatesToBone(t,e){this.phaserWorldCoordinatesToSkeleton(t),e.parent?e.parent.worldToLocal(t):e.worldToLocal(t)}updatePose(t){this.animationState.update(t/1e3),this.animationState.apply(this.skeleton),this.beforeUpdateWorldTransforms(this),this.skeleton.update(t/1e3),this.skeleton.updateWorldTransform(Pn.update),this.afterUpdateWorldTransforms(this)}preUpdate(t,e){this.skeleton&&this.animationState&&this.updatePose(e)}preDestroy(){}willRender(t){var e=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(this.visible||(e=!1),!e&&this.parentContainer&&this.plugin.webGLRenderer){var i=this.plugin.webGLRenderer;this.plugin.gl&&this.plugin.phaserRenderer instanceof Phaser.Renderer.WebGL.WebGLRenderer&&i.batcher.isDrawing&&(i.end(),this.plugin.phaserRenderer.pipelines.rebind())}return e}renderWebGL(t,e,i,r){if(!this.skeleton||!this.animationState||!this.plugin.webGLRenderer)return;let s=this.plugin.webGLRenderer;t.newType&&(t.pipelines.clear(),s.begin()),i.addToRenderList(e);let n=Phaser.GameObjects.GetCalcMatrix(e,i,r).calc,a=n.a,o=n.b,l=n.c,h=n.d,c=n.tx,d=n.ty;s.drawSkeleton(this.skeleton,this.premultipliedAlpha,-1,-1,(t,e,i)=>{for(let r=0;r<e;r+=i){let e=t[r],i=t[r+1];t[r]=e*a+i*l+c,t[r+1]=e*o+i*h+d}}),t.nextTypeMatch||(s.end(),t.pipelines.rebind())}renderCanvas(t,e,i,r){if(!this.skeleton||!this.animationState||!this.plugin.canvasRenderer)return;let s=t.currentContext,n=this.plugin.canvasRenderer;n.ctx=s,i.addToRenderList(e);let a=Phaser.GameObjects.GetCalcMatrix(e,i,r).calc,o=this.skeleton;o.x=a.tx,o.y=a.ty,o.scaleX=a.scaleX,o.scaleY=a.scaleY,o.getRootBone().rotation=-fs.radiansToDegrees*a.rotationNormalized,this.skeleton.updateWorldTransform(Pn.update),s.save(),n.draw(o),s.restore()}}class bl extends kn{constructor(t){super(t)}setFilters(t,e){}setWraps(t,e){}dispose(){}}const xl=ps.newFloatArray(8);class wl{static QUAD_TRIANGLES=[0,1,2,2,3,0];static VERTEX_SIZE=8;ctx;triangleRendering=!1;debugRendering=!1;vertices=ps.newFloatArray(8192);tempColor=new us;constructor(t){this.ctx=t}draw(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)}drawImages(t){let e=this.ctx,i=this.tempColor,r=t.color,s=t.drawOrder;this.debugRendering&&(e.strokeStyle="green");for(let t=0,n=s.length;t<n;t++){let n=s[t],a=n.bone;if(!a.active)continue;let o=n.getAttachment();if(!(o instanceof Gn))continue;o.computeWorldVertices(n,xl,0,2);let l=o.region,h=l.texture.getImage(),c=n.color,d=o.color;i.set(r.r*c.r*d.r,r.g*c.g*d.g,r.b*c.b*d.b,r.a*c.a*d.a),e.save(),e.transform(a.a,a.c,a.b,a.d,a.worldX,a.worldY),e.translate(o.offset[0],o.offset[1]),e.rotate(o.rotation*Math.PI/180);let u=o.width/l.originalWidth;e.scale(u*o.scaleX,u*o.scaleY);let f=l.width,p=l.height;if(e.translate(f/2,p/2),90==o.region.degrees){let t=f;f=p,p=t,e.rotate(-Math.PI/2)}e.scale(1,-1),e.translate(-f/2,-p/2),e.globalAlpha=i.a,e.drawImage(h,h.width*l.u,h.height*l.v,f,p,0,0,f,p),this.debugRendering&&e.strokeRect(0,0,f,p),e.restore()}}drawTriangles(t){let e=this.ctx,i=this.tempColor,r=t.color,s=t.drawOrder,n=null,a=this.vertices,o=null;for(let t=0,h=s.length;t<h;t++){let h,c=s[t],d=c.getAttachment();if(d instanceof Gn){let t=d;a=this.computeRegionVertices(c,t,!1),o=wl.QUAD_TRIANGLES,h=t.region.texture.getImage()}else{if(!(d instanceof zn))continue;{let t=d;a=this.computeMeshVertices(c,t,!1),o=t.triangles,h=t.region.texture.getImage()}}if(h){c.data.blendMode!=n&&(n=c.data.blendMode);let t=c.color,s=d.color;i.set(r.r*t.r*s.r,r.g*t.g*s.g,r.b*t.b*s.b,r.a*t.a*s.a),e.globalAlpha=i.a;for(var l=0;l<o.length;l+=3){let t=8*o[l],i=8*o[l+1],r=8*o[l+2],s=a[t],n=a[t+1],c=a[t+6],d=a[t+7],u=a[i],f=a[i+1],p=a[i+6],m=a[i+7],g=a[r],b=a[r+1],x=a[r+6],w=a[r+7];this.drawTriangle(h,s,n,c,d,u,f,p,m,g,b,x,w),this.debugRendering&&(e.strokeStyle="green",e.beginPath(),e.moveTo(s,n),e.lineTo(u,f),e.lineTo(g,b),e.lineTo(s,n),e.stroke())}}}this.ctx.globalAlpha=1}drawTriangle(t,e,i,r,s,n,a,o,l,h,c,d,u){let f=this.ctx;const p=t.width-1,m=t.height-1;r*=p,s*=m,o*=p,l*=m,d*=p,u*=m,f.beginPath(),f.moveTo(e,i),f.lineTo(n,a),f.lineTo(h,c),f.closePath();let g=(o-=r)*(u-=s)-(d-=r)*(l-=s);if(0==g)return;g=1/g;const b=(u*(n-=e)-l*(h-=e))*g,x=(u*(a-=i)-l*(c-=i))*g,w=(o*h-d*n)*g,y=(o*c-d*a)*g,v=e-b*r-w*s,_=i-x*r-y*s;f.save(),f.transform(b,x,w,y,v,_),f.clip(),f.drawImage(t,0,0),f.restore()}computeRegionVertices(t,e,i){let r=t.bone.skeleton.color,s=t.color,n=e.color,a=r.a*s.a*n.a,o=i?a:1,l=this.tempColor;l.set(r.r*s.r*n.r*o,r.g*s.g*n.g*o,r.b*s.b*n.b*o,a),e.computeWorldVertices(t,this.vertices,0,wl.VERTEX_SIZE);let h=this.vertices,c=e.uvs;return h[Gn.C1R]=l.r,h[Gn.C1G]=l.g,h[Gn.C1B]=l.b,h[Gn.C1A]=l.a,h[Gn.U1]=c[0],h[Gn.V1]=c[1],h[Gn.C2R]=l.r,h[Gn.C2G]=l.g,h[Gn.C2B]=l.b,h[Gn.C2A]=l.a,h[Gn.U2]=c[2],h[Gn.V2]=c[3],h[Gn.C3R]=l.r,h[Gn.C3G]=l.g,h[Gn.C3B]=l.b,h[Gn.C3A]=l.a,h[Gn.U3]=c[4],h[Gn.V3]=c[5],h[Gn.C4R]=l.r,h[Gn.C4G]=l.g,h[Gn.C4B]=l.b,h[Gn.C4A]=l.a,h[Gn.U4]=c[6],h[Gn.V4]=c[7],h}computeMeshVertices(t,e,i){let r=t.bone.skeleton.color,s=t.color,n=e.color,a=r.a*s.a*n.a,o=i?a:1,l=this.tempColor;l.set(r.r*s.r*n.r*o,r.g*s.g*n.g*o,r.b*s.b*n.b*o,a);let h=e.worldVerticesLength/2,c=this.vertices;c.length<e.worldVerticesLength&&(this.vertices=c=ps.newFloatArray(e.worldVerticesLength)),e.computeWorldVertices(t,0,e.worldVerticesLength,c,0,wl.VERTEX_SIZE);let d=e.uvs;for(let t=0,e=0,i=2;t<h;t++)c[i++]=l.r,c[i++]=l.g,c[i++]=l.b,c[i++]=l.a,c[i++]=d[e++],c[i++]=d[e++],i+=2;return c}}class yl extends r.Plugins.ScenePlugin{game;isWebGL;gl;static gameWebGLRenderer=null;get webGLRenderer(){return yl.gameWebGLRenderer}canvasRenderer;phaserRenderer;skeletonDataCache;atlasCache;constructor(t,e,i){super(t,e,i),this.game=e.game,this.isWebGL=2===this.game.config.renderType,this.gl=this.isWebGL?this.game.renderer.gl:null,this.phaserRenderer=this.game.renderer,this.canvasRenderer=null,this.skeletonDataCache=this.game.cache.addCustom("esotericsoftware.spine.skeletonFile.cache"),this.atlasCache=this.game.cache.addCustom("esotericsoftware.spine.atlas.cache"),e.registerFileType("spineJson",function(t,e,i){let r=new _l(this,t,e,vl.json,i);return this.addFile(r.files),this},t),e.registerFileType("spineBinary",function(t,e,i){let r=new _l(this,t,e,vl.binary,i);return this.addFile(r.files),this},t),e.registerFileType("spineAtlas",function(t,e,i,r){let s=new Al(this,t,e,i,r);return this.addFile(s.files),this},t),e.registerGameObject(window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:cs,function(t,e,s,n,a){this.scene.sys.renderer instanceof r.Renderer.WebGL.WebGLRenderer&&this.scene.sys.renderer.pipelines.clear();const o=this.scene.sys[i];let l=new gl(this.scene,o,t,e,s,n,a);return this.displayList.add(l),this.updateList.add(l),this.scene.sys.renderer instanceof r.Renderer.WebGL.WebGLRenderer&&this.scene.sys.renderer.pipelines.rebind(),l},function(t,e=!1){this.scene.sys.renderer instanceof r.Renderer.WebGL.WebGLRenderer&&this.scene.sys.renderer.pipelines.clear();let s=t.x?t.x:0,n=t.y?t.y:0,a=t.boundsProvider?t.boundsProvider:void 0;const o=this.scene.sys[i];let l=new gl(this.scene,o,s,n,t.dataKey,t.atlasKey,a);return void 0!==e&&(t.add=e),this.scene.sys.renderer instanceof r.Renderer.WebGL.WebGLRenderer&&this.scene.sys.renderer.pipelines.rebind(),r.GameObjects.BuildGameObject(this.scene,l,t)})}static rendererId=0;boot(){sa.yDown=!0,this.isWebGL?(yl.gameWebGLRenderer||(yl.gameWebGLRenderer=new jo(this.game.renderer.canvas,this.gl,!0)),this.onResize(),this.game.scale.on(r.Scale.Events.RESIZE,this.onResize,this)):this.canvasRenderer||(this.canvasRenderer=new wl(this.scene.sys.context));var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)}onResize(){var t=this.game.renderer,e=this.webGLRenderer;if(t&&e){var i=t.width,r=t.height;e.camera.position.x=i/2,e.camera.position.y=r/2,e.camera.up.y=-1,e.camera.direction.z=1,e.camera.setViewport(i,r)}}shutdown(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(r.Scale.Events.RESIZE,this.onResize,this)}destroy(){this.shutdown()}gameDestroy(){this.pluginManager.removeGameObject(window.SPINE_GAME_OBJECT_TYPE?window.SPINE_GAME_OBJECT_TYPE:cs,!0,!0),this.webGLRenderer&&this.webGLRenderer.dispose(),yl.gameWebGLRenderer=null}getAtlas(t){let e;if(this.atlasCache.exists(t))e=this.atlasCache.get(t);else{let i=this.game.cache.text.get(t);if(e=new Dn(i.data),this.isWebGL){let i=this.gl;const r=i.getParameter(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL);r&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);for(let r of e.pages)r.setTexture(new ho(i,this.game.textures.get(t+"!"+r.name).getSourceImage(),!1));r&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}else for(let i of e.pages)i.setTexture(new bl(this.game.textures.get(t+"!"+i.name).getSourceImage()));this.atlasCache.add(t,e)}return e}isAtlasPremultiplied(t){let e=this.game.cache.text.get(t);return!!e&&e.premultipliedAlpha}getSkeletonData(t,e){const i=this.getAtlas(e),r=t+e;let s;if(this.skeletonDataCache.exists(r))s=this.skeletonDataCache.get(r);else{if(this.game.cache.json.exists(t)){let e=this.game.cache.json.get(t);s=new eo(new jn(i)).readSkeletonData(e)}else{let e=this.game.cache.binary.get(t);s=new fa(new jn(i)).readSkeletonData(new Uint8Array(e))}this.skeletonDataCache.add(r,s)}return s}createSkeleton(t,e){return new sa(this.getSkeletonData(t,e))}}var vl;!function(t){t[t.json=0]="json",t[t.binary=1]="binary"}(vl||(vl={}));class _l extends r.Loader.MultiFile{fileType;constructor(t,e,i,s,n){if("string"!=typeof e){const t=e;e=t.key,i=t.url,s="spineJson"===t.type?vl.json:vl.binary,n=t.xhrSettings}let a=null;a=s==vl.json?new r.Loader.FileTypes.JSONFile(t,{key:e,url:i,extension:"json",xhrSettings:n}):new r.Loader.FileTypes.BinaryFile(t,{key:e,url:i,extension:"skel",xhrSettings:n}),super(t,"spineSkeletonData",e,[a]),this.fileType=s}onFileComplete(t){this.pending--}addToCache(){this.isReadyToProcess()&&this.files[0].addToCache()}}class Al extends r.Loader.MultiFile{premultipliedAlpha;constructor(t,e,i,s,n){if("string"!=typeof e){const t=e;e=t.key,i=t.url,s=t.premultipliedAlpha,n=t.xhrSettings}super(t,"spineAtlasData",e,[new r.Loader.FileTypes.TextFile(t,{key:e,url:i,xhrSettings:n,extension:"atlas"})]),this.premultipliedAlpha=s}onFileComplete(t){if(-1!=this.files.indexOf(t)&&(this.pending--,"text"==t.type)){var e=t.data.split(/\r\n|\r|\n/);let h=[];h.push(e[0]);for(var i=1;i<e.length;i++){var s=e[i];""===s.trim()&&i<e.length-1&&(s=e[i+1],h.push(s))}let c=t.src.match(/^.*\//)??"";for(var n=0;n<h.length;n++){var a=c+h[n],o=t.key+"!"+h[n],l=new r.Loader.FileTypes.ImageFile(this.loader,o,a);this.loader.keyExists(l)||(this.addToMultiFile(l),this.loader.addFile(l))}}}addToCache(){if(this.isReadyToProcess()){let t=this.loader.textureManager;for(let e of this.files)"image"==e.type?t.exists(e.key)||t.addImage(e.key,e.data):(this.premultipliedAlpha=this.premultipliedAlpha??(e.data.indexOf("pma: true")>=0||e.data.indexOf("pma:true")>=0),e.data={data:e.data,premultipliedAlpha:this.premultipliedAlpha},e.addToCache())}}}window.spine={SpinePlugin:yl},window["spine.SpinePlugin"]=yl;const Sl={type:s().WEBGL,parent:"game",width:n.gameWidth,height:n.gameHeight,scale:{mode:s().Scale.FIT,autoCenter:s().Scale.CENTER_BOTH},antialiasGL:!1,physics:{default:"none",arcade:{debug:!1}},backgroundColor:"#1a1a1a",scene:[a,o,hs],plugins:{scene:[{key:"spine.SpinePlugin",plugin:yl,mapping:"spine"}]}};class Tl{constructor(){const t=new(s().Game)(Sl);globalThis.__PHASER_GAME__=t}}window.onload=async()=>{new Tl}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i="",r=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),r&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),r&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i}).join("")},e.i=function(t,i,r,s,n){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var h=0;h<t.length;h++){var c=[].concat(t[h]);r&&a[c[0]]||(void 0!==n&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=n),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),e.push(c))}},e}},354:t=>{t.exports=function(t){var e=t[1],i=t[3];if(!i)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),n="/*# ".concat(s," */");return[e].concat([n]).join("\n")}return[e].join("\n")}},535:(t,e,i)=>{var r=i(72),s=i.n(r),n=i(825),a=i.n(n),o=i(659),l=i.n(o),h=i(56),c=i.n(h),d=i(540),u=i.n(d),f=i(113),p=i.n(f),m=i(16),g={};g.styleTagTransform=p(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=u();var b=s()(m.default,g);if(!m.default.locals||t.hot.invalidate){var x=!m.default.locals,w=x?m:m.default.locals;t.hot.accept(16,e=>{m=i(16),function(t,e,i){if(!t&&e||t&&!e)return!1;var r;for(r in t)if((!i||"default"!==r)&&t[r]!==e[r])return!1;for(r in e)if(!(i&&"default"===r||t[r]))return!1;return!0}(w,x?m:m.default.locals,x)?(w=x?m:m.default.locals,b(m.default)):t.hot.invalidate()})}t.hot.dispose(function(){b()}),m.default&&m.default.locals&&m.default.locals},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},659:t=>{var e={};t.exports=function(t,i){var r=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,s&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},s={};function n(t){var e=s[t];if(void 0!==e){if(void 0!==e.error)throw e.error;return e.exports}var i=s[t]={id:t,exports:{}};try{var a={id:t,module:i,factory:r[t],require:n};n.i.forEach(function(t){t(a)}),i=a.module,a.factory.call(i.exports,i,i.exports,a.require)}catch(t){throw i.error=t,t}return i.exports}n.m=r,n.c=s,n.i=[],t=[],n.O=(e,i,r,s)=>{if(!i){var a=1/0;for(c=0;c<t.length;c++){for(var[i,r,s]=t[c],o=!0,l=0;l<i.length;l++)(!1&s||a>=s)&&Object.keys(n.O).every(t=>n.O[t](i[l]))?i.splice(l--,1):(o=!1,s<a&&(a=s));if(o){t.splice(c--,1);var h=r();void 0!==h&&(e=h)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[i,r,s]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.hu=t=>t+"."+n.h()+".hot-update.js",n.hmrF=()=>"main."+n.h()+".hot-update.json",n.h=()=>"7950144c983da6bb0c72",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e={},i="phaser3-test-slot-project:",n.l=(t,r,s,a)=>{if(e[t])e[t].push(r);else{var o,l;if(void 0!==s)for(var h=document.getElementsByTagName("script"),c=0;c<h.length;c++){var d=h[c];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")==i+s){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",i+s),o.src=t),e[t]=[r];var u=(i,r)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[t];if(delete e[t],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(t=>t(r)),i)return i(r)},f=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t,e,i,r={},s=n.c,a=[],o=[],l="idle",h=0,c=[];function d(t){l=t;for(var e=[],i=0;i<o.length;i++)e[i]=o[i].call(null,t);return Promise.all(e).then(function(){})}function u(){0===--h&&d("ready").then(function(){if(0===h){var t=c;c=[];for(var e=0;e<t.length;e++)t[e]()}})}function f(t){if("idle"!==l)throw new Error("check() is only allowed in idle status");return d("check").then(n.hmrM).then(function(i){return i?d("prepare").then(function(){var r=[];return e=[],Promise.all(Object.keys(n.hmrC).reduce(function(t,s){return n.hmrC[s](i.c,i.r,i.m,t,e,r),t},[])).then(function(){return e=function(){return t?m(t):d("ready").then(function(){return r})},0===h?e():new Promise(function(t){c.push(function(){t(e())})});var e})}):d(g()?"ready":"idle").then(function(){return null})})}function p(t){return"ready"!==l?Promise.resolve().then(function(){throw new Error("apply() is only allowed in ready status (state: "+l+")")}):m(t)}function m(t){t=t||{},g();var r=e.map(function(e){return e(t)});e=void 0;var s=r.map(function(t){return t.error}).filter(Boolean);if(s.length>0)return d("abort").then(function(){throw s[0]});var n=d("dispose");r.forEach(function(t){t.dispose&&t.dispose()});var a,o=d("apply"),l=function(t){a||(a=t)},h=[];return Promise.all(r.filter(function(t){return t.apply}).map(function(t){return t.apply(l)})).then(function(t){t.forEach(function(t){if(t)for(var e=0;e<t.length;e++)h.push(t[e])})}).then(function(){return Promise.all([n,o]).then(function(){return a?d("fail").then(function(){throw a}):i?m(t).then(function(t){return h.forEach(function(e){t.indexOf(e)<0&&t.push(e)}),t}):d("idle").then(function(){return h})})})}function g(){if(i)return e||(e=[]),Object.keys(n.hmrI).forEach(function(t){i.forEach(function(i){n.hmrI[t](i,e)})}),i=void 0,!0}n.hmrD=r,n.i.push(function(c){var m,g,b,x,w=c.module,y=function(e,i){var r=s[i];if(!r)return e;var n=function(n){if(r.hot.active){if(s[n]){var o=s[n].parents;-1===o.indexOf(i)&&o.push(i)}else a=[i],t=n;-1===r.children.indexOf(n)&&r.children.push(n)}else console.warn("[HMR] unexpected require("+n+") from disposed module "+i),a=[];return e(n)},o=function(t){return{configurable:!0,enumerable:!0,get:function(){return e[t]},set:function(i){e[t]=i}}};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&"e"!==c&&Object.defineProperty(n,c,o(c));return n.e=function(t,i){return function(t){switch(l){case"ready":d("prepare");case"prepare":return h++,t.then(u,u),t;default:return t}}(e.e(t,i))},n}(c.require,c.id);w.hot=(m=c.id,g=w,x={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:b=t!==m,_requireSelf:function(){a=g.parents.slice(),t=b?void 0:m,n(m)},active:!0,accept:function(t,e,i){if(void 0===t)x._selfAccepted=!0;else if("function"==typeof t)x._selfAccepted=t;else if("object"==typeof t&&null!==t)for(var r=0;r<t.length;r++)x._acceptedDependencies[t[r]]=e||function(){},x._acceptedErrorHandlers[t[r]]=i;else x._acceptedDependencies[t]=e||function(){},x._acceptedErrorHandlers[t]=i},decline:function(t){if(void 0===t)x._selfDeclined=!0;else if("object"==typeof t&&null!==t)for(var e=0;e<t.length;e++)x._declinedDependencies[t[e]]=!0;else x._declinedDependencies[t]=!0},dispose:function(t){x._disposeHandlers.push(t)},addDisposeHandler:function(t){x._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=x._disposeHandlers.indexOf(t);e>=0&&x._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,l){case"idle":e=[],Object.keys(n.hmrI).forEach(function(t){n.hmrI[t](m,e)}),d("ready");break;case"ready":Object.keys(n.hmrI).forEach(function(t){n.hmrI[t](m,e)});break;case"prepare":case"check":case"dispose":case"apply":(i=i||[]).push(m)}},check:f,apply:p,status:function(t){if(!t)return l;o.push(t)},addStatusHandler:function(t){o.push(t)},removeStatusHandler:function(t){var e=o.indexOf(t);e>=0&&o.splice(e,1)},data:r[m]},t=void 0,x),w.parents=a,w.children=[],a=[],c.require=y}),n.hmrC={},n.hmrI={}})(),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),(()=>{var t,e,i,r,s,a=n.hmrS_jsonp=n.hmrS_jsonp||{792:0},o={};function l(e,i){return t=i,new Promise((t,i)=>{o[e]=t;var r=n.p+n.hu(e),s=new Error;n.l(r,t=>{if(o[e]){o[e]=void 0;var r=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;s.message="Loading hot update chunk "+e+" failed.\n("+r+": "+n+")",s.name="ChunkLoadError",s.type=r,s.request=n,i(s)}})})}function h(t){function o(t){for(var e=[t],i={},r=e.map(function(t){return{chain:[t],id:t}});r.length>0;){var s=r.pop(),a=s.id,o=s.chain,h=n.c[a];if(h&&(!h.hot._selfAccepted||h.hot._selfInvalidated)){if(h.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:a};if(h.hot._main)return{type:"unaccepted",chain:o,moduleId:a};for(var c=0;c<h.parents.length;c++){var d=h.parents[c],u=n.c[d];if(u){if(u.hot._declinedDependencies[a])return{type:"declined",chain:o.concat([d]),moduleId:a,parentId:d};-1===e.indexOf(d)&&(u.hot._acceptedDependencies[a]?(i[d]||(i[d]=[]),l(i[d],[a])):(delete i[d],e.push(d),r.push({chain:o.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:i}}function l(t,e){for(var i=0;i<e.length;i++){var r=e[i];-1===t.indexOf(r)&&t.push(r)}}n.f&&delete n.f.jsonpHmr,e=void 0;var h={},c=[],d={},u=function(t){console.warn("[HMR] unexpected require("+t.id+") to disposed module")};for(var f in i)if(n.o(i,f)){var p=i[f],m=p?o(f):{type:"disposed",moduleId:f},g=!1,b=!1,x=!1,w="";switch(m.chain&&(w="\nUpdate propagation: "+m.chain.join(" -> ")),m.type){case"self-declined":t.onDeclined&&t.onDeclined(m),t.ignoreDeclined||(g=new Error("Aborted because of self decline: "+m.moduleId+w));break;case"declined":t.onDeclined&&t.onDeclined(m),t.ignoreDeclined||(g=new Error("Aborted because of declined dependency: "+m.moduleId+" in "+m.parentId+w));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(m),t.ignoreUnaccepted||(g=new Error("Aborted because "+f+" is not accepted"+w));break;case"accepted":t.onAccepted&&t.onAccepted(m),b=!0;break;case"disposed":t.onDisposed&&t.onDisposed(m),x=!0;break;default:throw new Error("Unexception type "+m.type)}if(g)return{error:g};if(b)for(f in d[f]=p,l(c,m.outdatedModules),m.outdatedDependencies)n.o(m.outdatedDependencies,f)&&(h[f]||(h[f]=[]),l(h[f],m.outdatedDependencies[f]));x&&(l(c,[m.moduleId]),d[f]=u)}i=void 0;for(var y,v=[],_=0;_<c.length;_++){var A=c[_],S=n.c[A];S&&(S.hot._selfAccepted||S.hot._main)&&d[A]!==u&&!S.hot._selfInvalidated&&v.push({module:A,require:S.hot._requireSelf,errorHandler:S.hot._selfAccepted})}return{dispose:function(){var t;r.forEach(function(t){delete a[t]}),r=void 0;for(var e,i=c.slice();i.length>0;){var s=i.pop(),o=n.c[s];if(o){var l={},d=o.hot._disposeHandlers;for(_=0;_<d.length;_++)d[_].call(null,l);for(n.hmrD[s]=l,o.hot.active=!1,delete n.c[s],delete h[s],_=0;_<o.children.length;_++){var u=n.c[o.children[_]];u&&(t=u.parents.indexOf(s))>=0&&u.parents.splice(t,1)}}}for(var f in h)if(n.o(h,f)&&(o=n.c[f]))for(y=h[f],_=0;_<y.length;_++)e=y[_],(t=o.children.indexOf(e))>=0&&o.children.splice(t,1)},apply:function(e){var i=[];for(var r in d)n.o(d,r)&&(n.m[r]=d[r]);for(var a=0;a<s.length;a++)s[a](n);for(var o in h)if(n.o(h,o)){var l=n.c[o];if(l){y=h[o];for(var u=[],f=[],p=[],m=0;m<y.length;m++){var g=y[m],b=l.hot._acceptedDependencies[g],x=l.hot._acceptedErrorHandlers[g];if(b){if(-1!==u.indexOf(b))continue;u.push(b),f.push(x),p.push(g)}}for(var w=0;w<u.length;w++){var _;try{_=u[w].call(null,y)}catch(i){if("function"==typeof f[w])try{f[w](i,{moduleId:o,dependencyId:p[w]})}catch(r){t.onErrored&&t.onErrored({type:"accept-error-handler-errored",moduleId:o,dependencyId:p[w],error:r,originalError:i}),t.ignoreErrored||(e(r),e(i))}else t.onErrored&&t.onErrored({type:"accept-errored",moduleId:o,dependencyId:p[w],error:i}),t.ignoreErrored||e(i)}_&&"function"==typeof _.then&&i.push(_)}}}return Promise.all(i).then(function(){for(var i=0;i<v.length;i++){var r=v[i],s=r.module;try{r.require(s)}catch(i){if("function"==typeof r.errorHandler)try{r.errorHandler(i,{moduleId:s,module:n.c[s]})}catch(r){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:s,error:r,originalError:i}),t.ignoreErrored||(e(r),e(i))}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:s,error:i}),t.ignoreErrored||e(i)}}}).then(function(){return c})}}}self.webpackHotUpdatephaser3_test_slot_project=(e,r,a)=>{for(var l in r)n.o(r,l)&&(i[l]=r[l],t&&t.push(l));a&&s.push(a),o[e]&&(o[e](),o[e]=void 0)},n.hmrI.jsonp=function(t,e){i||(i={},s=[],r=[],e.push(h)),n.o(i,t)||(i[t]=n.m[t])},n.hmrC.jsonp=function(t,o,c,d,u,f){u.push(h),e={},r=o,i=c.reduce(function(t,e){return t[e]=!1,t},{}),s=[],t.forEach(function(t){n.o(a,t)&&void 0!==a[t]?(d.push(l(t,f)),e[t]=!0):e[t]=!1}),n.f&&(n.f.jsonpHmr=function(t,i){e&&n.o(e,t)&&!e[t]&&(i.push(l(t)),e[t]=!0)})},n.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(n.p+n.hmrF()).then(t=>{if(404!==t.status){if(!t.ok)throw new Error("Failed to fetch update manifest "+t.statusText);return t.json()}})},n.O.j=t=>0===a[t];var c=(t,e)=>{var i,r,[s,o,l]=e,h=0;if(s.some(t=>0!==a[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)var c=l(n)}for(t&&t(e);h<s.length;h++)r=s[h],n.o(a,r)&&a[r]&&a[r][0](),a[r]=0;return n.O(c)},d=self.webpackChunkphaser3_test_slot_project=self.webpackChunkphaser3_test_slot_project||[];d.forEach(c.bind(null,0)),d.push=c.bind(null,d.push.bind(d))})(),n.nc=void 0;var a=n.O(void 0,[418],()=>n(194));a=n.O(a)})();
//# sourceMappingURL=main.bundle.js.map